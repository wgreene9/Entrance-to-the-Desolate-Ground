EDG_OA_on_startup_effect = {
	if = {
		limit = {
			NOT = { has_global_flag = end_of_the_tatar_yoke }
			owns = 466
			is_year = 1480
		}
		set_global_flag = end_of_the_tatar_yoke
	}
	if = {
		limit = {
			OR = {
				has_country_modifier = rise_of_the_ottomans
				has_country_modifier = zenith_of_the_ottomans
				has_country_modifier = twilight_of_the_ottomans
				has_country_modifier = decline_of_the_ottomans
			}
		}
		remove_country_modifier = rise_of_the_ottomans
		remove_country_modifier = zenith_of_the_ottomans
		remove_country_modifier = twilight_of_the_ottomans
		remove_country_modifier = decline_of_the_ottomans
	}
	if = {
		limit = {
			has_government_mechanic = ottoman_decadence_mechanic
			current_age = age_of_discovery
		}
		add_country_modifier = {
			name = rise_of_the_ottomans
			duration = -1
			desc = until_end_of_age_desc
		}
	}
	if = {
		limit = {
			has_government_mechanic = ottoman_decadence_mechanic
			current_age = age_of_reformation
		}
		add_country_modifier = {
			name = zenith_of_the_ottomans
			duration = -1
			desc = until_end_of_age_desc
		}
	}
	if = {
		limit = {
			has_government_mechanic = ottoman_decadence_mechanic
			current_age = age_of_absolutism
		}
		add_country_modifier = {
			name = twilight_of_the_ottomans
			duration = -1
			desc = until_end_of_age_desc
		}
	}
	if = {
		limit = {
			has_government_mechanic = ottoman_decadence_mechanic
			current_age = age_of_revolutions
		}
		add_country_modifier = {
			name = decline_of_the_ottomans
			duration = -1
			desc = until_end_of_age_desc
		}
	}
	if = {
		limit = {
			any_country = {
				has_country_modifier = EDG_PER_Shahanshah_the_tag_modifier
			}
		}
		every_country = {
			limit = { has_country_modifier = EDG_PER_Shahanshah_the_tag_modifier }
			save_global_event_target_as = EDG_PER_Shahanshah_target
		}
	}
}

EDG_OA_on_startup_effect_only_once = {
	FRA = {
		if = {
			limit = { ai = yes }
			add_country_modifier = {
				name = EDG_AI_less_manpower_modifier
				duration = 18250
			}
		}
	}
	MHM = {
		set_ai_personality = {
			personality = ai_militarist
			locked = yes
		}
	}
	AKK = {
		set_ai_personality = {
			personality = ai_militarist
			locked = yes
		}
	}
	BUL = {
		set_ai_personality = {
			personality = ai_militarist
			locked = yes
		}
	}
	FRA = {
		set_ai_personality = {
			personality = ai_militarist
			locked = yes
		}
	}
	WUR = {
		set_ai_personality = {
			personality = ai_diplomat
			locked = yes
		}
	}
	HZB = {
		EDG_NEW_PER_Shahanshah_target_effect = yes
		set_variable = {
			which = EDG_PER_Shahanshah_authority_var
			value = 60
		}
		add_country_modifier = {
			name = EDG_PER_Shahanshah_the_tag_modifier
			duration = -1
			hidden = yes
		}
	}
	every_country = {
        limit = {
			technology_group = EDG_Iran_groups
		}
        EDG_Iran_groups_discovered_effect = yes
	}
	MOS = {
        country_event = {
			id = EDG_tve_missions.102
		}
	}
	ASU = {
		country_event = {
			id = FOICommonEvents.0
		}
	}
	FRA = {
		country_event = {
			id = EDG_flavorFRA_mission.4
		}
	}
	418 = { add_permanent_province_modifier = { name = EDG_PER_Turkmen_tribe_province_modifier duration = -1 } }
	2308 = { add_permanent_province_modifier = { name = EDG_PER_Turkmen_tribe_province_modifier duration = -1 } }
	377 = { add_permanent_province_modifier = { name = EDG_PER_Turkmen_tribe_province_modifier duration = -1 } }
	4298 = { add_permanent_province_modifier = { name = EDG_PER_Turkmen_tribe_province_modifier duration = -1 } }
	2303 = { add_permanent_province_modifier = { name = EDG_PER_Turkmen_tribe_province_modifier duration = -1 } }
	every_province = {
		limit = {
			OR = {
				culture_group = iranian
				culture = al_iraqiya_arabic
			}
		}
		if = {
			limit = {
				OR = {
					owner = {
						OR = {
							tag = AKK
							tag = ART
							tag = AK1
							tag = AFS
						}
					}
					culture = azerbaijani
				}
				OR = {
					NOT = { development = 8 }
					is_capital = yes
				}
				OR = {
					has_terrain = hills
					has_terrain = mountain
					has_terrain = grasslands
				}
			}
			add_permanent_province_modifier = {
				name = EDG_PER_Turkmen_tribe_province_modifier
				duration = -1
			}
		}
		if = {
			limit = { religion_group = muslim }
			add_permanent_province_modifier = {
				name = EDG_PER_Primary_Muslims_province_modifier
				duration = -1
			}
		}
		else_if = {
			limit = { religion_group = christian }
			add_permanent_province_modifier = {
				name = EDG_PER_Primary_Christian_province_modifier
				duration = -1
			}
		}
		else_if = {
			limit = { religion_group = zoroastrian_group }
			add_permanent_province_modifier = {
				name = EDG_PER_Primary_Zoroastrianism_province_modifier
				duration = -1
			}
		}
		if = {
			limit = {
				NOT = { religion_group = muslim }
				base_tax = 2
				NOT = { culture = baluchi }
			}
			add_permanent_province_modifier = {
				name = EDG_PER_Minority_Muslims_province_modifier
				duration = -1
			}
		}
		if = {
			limit = {
				NOT = { religion_group = christian }
				development = 10
			}
			add_permanent_province_modifier = {
				name = EDG_PER_Minority_Christian_province_modifier
				duration = -1
			}
		}
		if = {
			limit = {
				NOT = { religion_group = zoroastrian_group }
				base_manpower = 3
				culture = persian
			}
			add_permanent_province_modifier = {
				name = EDG_PER_Minority_Zoroastrianism_province_modifier
				duration = -1
			}
		}
	}
}
EDG_on_emperor_elected_OA_effect = {
	clr_global_flag = EDG_EMP_privilege_Freie_Stadt_give_already_global_flag
	clr_global_flag = EDG_EMP_privilege_elector_prince_give_already_global_flag
	emperor = {
		country_event = { id = EDG_flavorHRE.0 }
	}
	every_country = {
		limit = {
			is_subject_of_type = EDG_HRE_march
		}
		emperor = { create_subject = { subject_type = EDG_HRE_march subject = PREV } }
	}
}
EDG_OA_on_war_won_effect = {
	ROOT = {
		add_government_power = {
			mechanic_type = EDG_Militaristic_fervor_ability
			power_type = EDG_Militaristic_fervor_power
			value = 2.5
		}
		add_government_power = {
			mechanic_type = ability_EDG_KAZ_Monarchy_ability
			power_type = EDG_KAZ_Monarchy_power
			value = 2.5
		}
	}

}
EDG_OA_on_battle_won_country_effect = {
	ROOT = {
		add_government_power = {
			mechanic_type = EDG_Militaristic_fervor_ability
			power_type = EDG_Militaristic_fervor_power
			value = 0.5
		}
		add_government_power = {
			mechanic_type = ability_EDG_KAZ_Monarchy_ability
			power_type = EDG_KAZ_Monarchy_power
			value = 0.5
		}
	}
}
EDG_OA_on_siege_won_country_effect = {
	root = {
		add_government_power = {
			mechanic_type = EDG_Militaristic_fervor_ability
			power_type = EDG_Militaristic_fervor_power
			value = 0.5
		}
		add_government_power = {
			mechanic_type = ability_EDG_KAZ_Monarchy_ability
			power_type = EDG_KAZ_Monarchy_power
			value = 0.5
		}
	}
	FYM = {
		country_event = { id = EDG_FYM_Caliph_war.8 }
	}
}
EDG_on_province_culture_changed_effect = {
	
	if = {
		limit = { owner = { has_government_attribute = EDG_YIN_Monarchy_government_ability } }
		owner = {
			add_government_power = {
				mechanic_type = EDG_YIN_Monarchy_government_ability
				power_type = EDG_YIN_Monarchy_government_power
				value = 2
			}
		}
	}
}
EDG_OA_on_leader_recruited_effect = {

}
EDG_OA_on_center_of_trade_upgrade_effect = {
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_upgrade_center_of_trade_provide_4mercantilism_flag
			}
		}
		owner = {
			add_mercantilism = 4
		}
	}
}
EDG_OA_on_culture_promoted_effect = {
	if = {
		limit = { has_country_flag = EDG_culture_promoted_provide_10_prestige_flag }
		add_prestige_or_monarch_power = { amount = 10 }
	}
	if = {
		limit = { has_country_flag = EDG_culture_promoted_provide_10_army_tradition_flag }
		add_army_tradition = 10
	}
	if = {
		limit = { has_country_flag = EDG_culture_promoted_provide_2_5_innovativeness_flag }
		change_innovativeness = 2.5
	}
	if = {
		limit = { has_country_flag = EDG_culture_promoted_provide_2_mercantilism_flag }
		add_mercantilism = 2
	}
	if = {
		limit = { has_country_flag = EDG_culture_promoted_provide_10_republican_tradition_flag }
		add_republican_tradition = 10
	}
}
EDG_OA_on_create_vassal_effect = {

}
EDG_OA_on_institution_embracement_effect = {
	if = {
		limit = { has_country_flag = EDG_institution_embracement_provide_10_army_tradition_flag }
		add_army_tradition = 10
	}
	if = {
		limit = { has_country_flag = EDG_institution_embracement_provide_5_innovativeness_flag }
		change_innovativeness = 5
	}
	if = {
		limit = { has_country_flag = EDG_institution_embracement_provide_5_mercantilism_flag }
		add_mercantilism = 5
	}
	if = {
		limit = { has_country_flag = EDG_institution_embracement_provide_10_republican_tradition_flag }
		add_republican_tradition = 10
	}
	if = {
		limit = { has_country_flag = EDG_institution_embracement_provide_100_splendor_flag }
		add_splendor = 100
	}
}
EDG_OA_on_centralized_state_effect = {
	if = {
		limit = { has_country_flag = EDG_centralized_state_provide_10_government_reform_progress_flag }
		change_government_reform_progress = 10
	}
	if = {
		limit = { has_country_flag = EDG_centralized_state_provide_2_5_innovativeness_flag }
		change_innovativeness = 2.5
	}
}
EDG_OA_on_defender_of_faith_loss_effect = {
	remove_country_modifier = EDG_faith_protector_provide_war_province_cost_modifier
	remove_country_modifier = EDG_faith_protector_provide_governing_10_capacity_modifier
	remove_country_modifier = EDG_faith_protector_provide_1_tolerance_own_modifier
}
EDG_OA_on_defender_of_faith_claim_effect = {
	if = {
		limit = {
			NOT = { has_country_flag = EDG_defender_of_faith_claim_effect_once_flag }
			has_country_flag = EDG_defender_of_faith_claim_provide_100_power_first_flag
		}
		set_country_flag = EDG_defender_of_faith_claim_effect_once_flag
		add_adm_power = 100
		add_dip_power = 100
		add_mil_power = 100
	}
	if = {
		limit = {
			has_country_flag = EDG_faith_protector_provide_war_province_cost_modifier_flag
		}
		add_country_modifier = {
			name = EDG_faith_protector_provide_war_province_cost_modifier
			duration = -1
		}
	}
	if = {
		limit = {
			has_country_flag = EDG_faith_protector_provide_governing_10_capacity_modifier_flag
		}
		add_country_modifier = {
			name = EDG_faith_protector_provide_governing_10_capacity_modifier
			duration = -1
		}
	}
	if = {
		limit = {
			has_country_flag = EDG_faith_protector_provide_1_tolerance_own_modifier_flag
		}
		add_country_modifier = {
			name = EDG_faith_protector_provide_1_tolerance_own_modifier
			duration = -1
		}
	}
}
EDG_OA_on_battle_lost_unit_effect = {
	if = {
	  limit = {
		unit_owner = {
		  OR = {
			  tag = ARL
			  tag = PER
		  }
		  has_ruler_flag = EDG_ARL_Isma_ruler_flag
		}
		is_ruler_commanding_unit = yes
	  }
	  ARL = {
		country_event = {
		  id = EDG_flavorARL.8
		}
	  }
	
	}
}
EDG_OA_on_battle_won_unit_effect = {
	
}
EDG_OA_on_monarch_death_effect = {
	if = {
	  limit = {
		tag = SMO
		  NOT = { has_ruler_flag = EDG_flavorSMO_1_a_ruler_ruler_flag }
		  has_country_flag = EDG_flavorSMO_1_a_ruler_flag
	  }
	  SMO = { country_event = { id = EDG_flavorSMO.3 } }
	}
	if = {
	  limit = {
		tag = FRA
		NOT = { has_global_flag = EDG_flavorFRA_25_flag }
	  }
	  FRA = { country_event = { id = EDG_flavorFRA.26 } }
	}
	if = {
		limit = {
			tag = VRS
			has_country_flag = EDG_ers_rus_gongting_flag
		}
		VRS = {
			country_event = {
				id = EDG_ers.1004
			}
		}
	}
}
EDG_OA_on_mandate_of_heaven_gained_effect = {
	country_event = {
	  id = EDG_flavorChina.1
	}
}
EDG_OA_on_yearly_pulse_effect = {
	if = {
		limit = {
			ai = yes
			is_emperor = yes
		}
		hidden_effect = {
			country_event = { id = EDG_flavor_HRE_reform.0 }
		}
	}
}


EDG_RUS_landowners_startup_effect = {#罗斯地主
	if = {
		limit = {
			development = 8
			NOT = { province_has_center_of_trade_of_level = 1 }
		}
		add_permanent_province_modifier = {
			name = EDG_RUS_landowners_noble_province_modifier
			duration = -1
		}
	}
	else_if = {
		limit = {
			OR = {
				base_production = 3
				province_has_center_of_trade_of_level = 1
			}
		}
		add_permanent_province_modifier = {
			name = EDG_RUS_landowners_burghers_province_modifier
			duration = -1
		}
	}
	else_if = {
		limit = {
			base_tax = 2
			religion = owner
		}
		add_permanent_province_modifier = {
			name = EDG_RUS_landowners_church_province_modifier
			duration = -1
		}
	}
	else = {
		add_permanent_province_modifier = {
			name = EDG_RUS_landowners_noble_province_modifier
			duration = -1
		}
	}
}