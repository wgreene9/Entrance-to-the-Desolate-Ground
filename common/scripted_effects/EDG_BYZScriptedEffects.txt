EDG_modifier_mil_var = {
	if = {
		limit = { 
			NOT = {
				check_variable = {
					which = $var$
					value = 0
				}
			}
		}
		multiply_variable = {
			which = $var$
			value = -1
		}
	}
}

EDG_BYZ_add_constantinople_slot = {
	[[slot_1]
		change_variable = {
			which = EDG_BYZ_constantinople_1_slot_var
			value = $slot_1$
		}
		hidden_effect = {
			change_variable = {
				which = EDG_BYZ_constantinople_1_slot_leisure_var
				value = $slot_1$
			}
			change_variable = {
				which = EDG_BYZ_total_constantinople_slot_var
				value = $slot_1$
			}
		}
	]
	[[slot_2]
		change_variable = {
			which = EDG_BYZ_constantinople_2_slot_var
			value = $slot_2$
		}
		hidden_effect = {
			change_variable = {
				which = EDG_BYZ_constantinople_2_slot_leisure_var
				value = $slot_2$
			}
			change_variable = {
				which = EDG_BYZ_total_constantinople_slot_var
				value = $slot_2$
			}
		}
	]
	[[slot_3]
		change_variable = {
			which = EDG_BYZ_constantinople_3_slot_var
			value = $slot_3$
		}
		hidden_effect = {
			change_variable = {
				which = EDG_BYZ_constantinople_3_slot_leisure_var
				value = $slot_3$
			}
			change_variable = {
				which = EDG_BYZ_total_constantinople_slot_var
				value = $slot_3$
			}
		}
	]
	[[slot_4]
		change_variable = {
			which = EDG_BYZ_constantinople_4_slot_var
			value = $slot_4$
		}
		hidden_effect = {
			change_variable = {
				which = EDG_BYZ_constantinople_4_slot_leisure_var
				value = $slot_4$
			}
			change_variable = {
				which = EDG_BYZ_total_constantinople_slot_var
				value = $slot_4$
			}
		}
	]
}

EDG_BYZ_use_constantinople_slot = {
	custom_tooltip = "--------------"
	[[cost]
		owner = {
			add_treasury = -$cost$
		}
		custom_tooltip = EDG_SPACE_TT
	]
	[[yearly_cost]
		owner = {
			add_years_of_income = -$yearly_cost$
		}
		custom_tooltip = EDG_SPACE_TT
	]
	if = {
		limit = { 
			check_variable = {
				which = EDG_BYZ_province_window_var
				value = 1
			}
			NOT = {
				check_variable = {
					which = EDG_BYZ_province_window_var
					value = 2
				}
			}
		}
		subtract_variable = {
			which = EDG_BYZ_constantinople_1_slot_leisure_var
			value = $slot$
		}
		hidden_effect = {
			change_variable = {
				which = EDG_BYZ_constantinople_1_slot_use_var
				value = $slot$
			}
		}
		custom_tooltip = EDG_SPACE_TT
	}
	else_if = {
		limit = { 
			check_variable = {
				which = EDG_BYZ_province_window_var
				value = 2
			}
			NOT = {
				check_variable = {
					which = EDG_BYZ_province_window_var
					value = 3
				}
			}
		}
		subtract_variable = {
			which = EDG_BYZ_constantinople_2_slot_leisure_var
			value = $slot$
		}
		hidden_effect = {
			change_variable = {
				which = EDG_BYZ_constantinople_2_slot_use_var
				value = $slot$
			}
		}
		custom_tooltip = EDG_SPACE_TT
	}
	else_if = {
		limit = { 
			check_variable = {
				which = EDG_BYZ_province_window_var
				value = 3
			}
			NOT = {
				check_variable = {
					which = EDG_BYZ_province_window_var
					value = 4
				}
			}
		}
		subtract_variable = {
			which = EDG_BYZ_constantinople_3_slot_leisure_var
			value = $slot$
		}
		hidden_effect = {
			change_variable = {
				which = EDG_BYZ_constantinople_3_slot_use_var
				value = $slot$
			}
		}
		custom_tooltip = EDG_SPACE_TT
	}
	else_if = {
		limit = { 
			check_variable = {
				which = EDG_BYZ_province_window_var
				value = 4
			}
			NOT = {
				check_variable = {
					which = EDG_BYZ_province_window_var
					value = 5
				}
			}
		}
		subtract_variable = {
			which = EDG_BYZ_constantinople_4_slot_leisure_var
			value = $slot$
		}
		hidden_effect = {
			change_variable = {
				which = EDG_BYZ_constantinople_4_slot_use_var
				value = $slot$
			}
		}
		custom_tooltip = EDG_SPACE_TT
	}
	[[extravagant]
		change_variable = {
			which = EDG_BYZ_constantinople_extravagant_var
			value = $extravagant$
		}
		custom_tooltip = EDG_SPACE_TT
	]
	[[efficiency]
		change_variable = {
			which = EDG_BYZ_constantinople_efficiency_var
			value = $efficiency$
		}
		custom_tooltip = EDG_SPACE_TT
	]
	[[safety]
		change_variable = {
			which = EDG_BYZ_constantinople_safety_var
			value = $safety$
		}
		custom_tooltip = EDG_SPACE_TT
	]
	[[sub_extravagant]
		subtract_variable = {
			which = EDG_BYZ_constantinople_extravagant_var
			value = $sub_extravagant$
		}
		custom_tooltip = EDG_SPACE_TT
	]
	[[sub_efficiency]
		subtract_variable = {
			which = EDG_BYZ_constantinople_efficiency_var
			value = $sub_efficiency$
		}
		custom_tooltip = EDG_SPACE_TT
	]
	[[sub_safety]
		subtract_variable = {
			which = EDG_BYZ_constantinople_safety_var
			value = $sub_safety$
		}
		custom_tooltip = EDG_SPACE_TT
	]
	[[base_tax]
		add_base_tax = $base_tax$
		custom_tooltip = EDG_SPACE_TT
	]
	[[base_production]
		add_base_production = $base_production$
		custom_tooltip = EDG_SPACE_TT
	]
	[[base_manpower]
		add_base_manpower = $base_manpower$
		custom_tooltip = EDG_SPACE_TT
	]
}
EDG_BYZ_build_province_effect = {
	if = {
		limit = { 
			NOT = {
				exists = $tag$
			}
		}
		tooltip = {
			create_subject = {
				subject_type = $type$
				subject = $tag$
			}
		}
		custom_tooltip = EDG_SPACE_TT
		tooltip = {
			$tooltip$
		}
		hidden_effect = {
			random_province = {
				limit = {
					$limit$
				}
				add_core = $tag$
				owner = {
					release = $tag$
				}
			}
			every_province = {
				limit = {
					$limit$
				}
				if = {
					limit = { 
						is_core = owner
					}
					add_core = $tag$
				}
				cede_province = $tag$
			}
			create_subject = {
				subject_type = $type$
				subject = $tag$
			}
			
			$tag$ = {
				change_government = monarchy
				add_treasury = 500
				add_years_of_income = 2.5
				add_yearly_manpower = 10
				add_yearly_sailors = 10
				set_government_rank = 2
				add_adm_power = 200
				add_dip_power = 200
				add_mil_power = 200
				set_country_flag = change_country_color_EDG_flag
				change_country_color = { country = root }
				add_government_reform = EDG_BYZ_province_reform
				change_religion = root
				change_primary_culture = root
			}
		}
	}
	else = {
		custom_tooltip = EDG_BYZ_province_cede.effect.tt
		hidden_effect = {
			every_province = {
				limit = {
					$limit$
				}
				if = {
					limit = { 
						is_core = owner
					}
					add_core = $tag$
				}
				cede_province = $tag$
			}
		}
	}

}