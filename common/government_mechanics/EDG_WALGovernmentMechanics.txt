EDG_WAL_atrocity_mechanic = {
	powers = {
		EDG_WAL_atrocity = {
			gui = EDG_WAL_atrocity_mech
			max = 100
			show_before_interactions = yes
			reset_on_new_ruler = no
			base_monthly_growth = 0.5
			monarch_power = MIL
			scaled_modifier = {
				modifier = { 
					global_monthly_devastation = -1
					improve_relation_modifier = -0.5
					diplomatic_reputation = -6
					global_unrest = 8
					all_estate_loyalty_equilibrium = -0.1
					core_creation = -0.5
					morale_damage_received = -0.1
					spy_offence = 0.5
					harsh_treatment_cost = -0.75
				}
			}
			scaled_modifier = {
				trigger = {
					has_country_flag = EDG_H06_mission_5_24_flag
				}
				modifier = { 
					years_of_nationalism = -10
				}
			}
			scaled_modifier = {
				trigger = {
					has_country_flag = EDG_H06_mission_5_24_flag
				}
				modifier = { 
					development_cost = -0.5
				}
			}
			scaled_modifier = {
				trigger = {
					has_country_flag = EDG_H06_mission_3_20_flag
				}
				modifier = { 
					culture_conversion_time = -0.25
					culture_conversion_cost = -0.25
					promote_culture_cost = 1
				}
			}
			scaled_modifier = {
				trigger = {
					has_country_flag = EDG_H06_mission_3_17_flag
				}
				modifier = {
					global_unrest = -4
				}
			}
			scaled_modifier = {
				trigger = {
					has_country_flag = EDG_WAL_mission_5_9_flag
				}
				modifier = {
					diplomatic_reputation = 3
				}
			}
			scaled_modifier = {
				trigger = {
					has_country_flag = EDG_WAL_mission_3_14_flag
				}
				modifier = {
					governing_cost = -0.25
				}
			}
			scaled_modifier = {
				trigger = {
					has_country_flag = EDG_WAL_mission_5_8_flag
				}
				modifier = {
					global_unrest = -4
				}
			}
			scaled_modifier = {
				trigger = {
					has_country_flag = EDG_WAL_mission_2_13_flag
				}
				modifier = { 
					harsh_treatment_cost = -0.15
				}
			}
			scaled_modifier = {
				trigger = {
					has_country_flag = EDG_WAL_mission_2_3_flag
				}
				modifier = {
					morale_damage = 0.1
				}
			}
			range_modifier = {
				trigger = {
					has_country_flag = EDG_WAL_mission_2_4_flag
				}
				modifier = {
					diplomats = 1
				}
			}
			range_modifier = {
				trigger = {
					legitimacy = 50
				}
				modifier = { 
					monthly_EDG_WAL_atrocity = 0.5
				}
			}
			range_modifier = {
				trigger = {
					NOT = {
						legitimacy = 50
					}
				}
				modifier = { 
					monthly_EDG_WAL_atrocity = -0.1
				}
			}
			range_modifier = {
				trigger = {
					stability = 3
				}
				modifier = { 
					monthly_EDG_WAL_atrocity = 0.2
				}
			}
			range_modifier = {
				trigger = {
					NOT = {
						stability = 3
					}
				}
				modifier = { 
					monthly_EDG_WAL_atrocity = -0.1
				}
			}
			range_modifier = {
				trigger = {
					prestige = 50
				}
				modifier = {
					monthly_EDG_WAL_atrocity = 0.1
				}
			}
			range_modifier = {
				trigger = {
					NOT = {
						prestige = 50
					}
				}
				modifier = {
					monthly_EDG_WAL_atrocity = -0.1
				}
			}
		}
	}
	interactions = {
		EDG_WAL_atrocity_interactions_1 = {
			icon = GFX_mechanic_EDG_WAL_atrocity_interactions_1
			cost_type = EDG_WAL_atrocity
			cost = 50
			cooldown_years = 5
			effect = {
				
				if = {
					limit = { 
						has_country_flag = EDG_WAL_mission_3_12_flag
					}
					custom_tooltip = EDG_WAL_atrocity_interactions_1.effect_1.tt
				}
				else = {
					custom_tooltip = EDG_WAL_atrocity_interactions_1.effect.tt
				}
				hidden_effect = {
					change_variable = {
						which = EDG_WAL_atrocity_interactions_1_count
						value = 1
					}
					clear_global_event_target = EDG_WAL_power_target
					root = {
						save_global_event_target_as = EDG_WAL_power_target
					}
					if = {
						limit = { 
							has_country_flag = EDG_WAL_mission_3_12_flag
						}
						every_neighbor_province = {
							limit = {
								owner = {
									NOT = {
										is_subject_of = root
									}
								}
							}
							set_variable = {
								which = EDG_province_development_var
								value = 0
							}
							export_to_variable = {
								which = EDG_province_development_var
								value = development
							}
							while = {
								limit = { 
									check_variable = {
										which = EDG_province_development_var
										value = 1
									}
								}
								subtract_variable = {
									which = EDG_province_development_var
									value = 1
								}
								root = {
									add_treasury = 5
								}
							}
						}
					}
					every_neighbor_province = {
						limit = {
							owner = {
								NOT = {
									is_subject_of = root
								}
							}
						}
						
						set_variable = {
							which = EDG_base_tax_var
							value = 0
						}
						set_variable = {
							which = EDG_base_production_var
							value = 0
						}
						set_variable = {
							which = EDG_base_manpower_var
							value = 0
						}
						export_to_variable = {
							which = EDG_base_tax_var
							value = trigger_value:base_tax
						}
						export_to_variable = {
							which = EDG_base_production_var
							value = trigger_value:base_production
						}
						export_to_variable = {
							which = EDG_base_manpower_var
							value = trigger_value:base_manpower
						}
						
						
						while = {
							limit = { 
								check_variable = {
									which = EDG_base_tax_var
									value = 1
								}
							}
							subtract_variable = {
								which = EDG_base_tax_var
								value = 1
							}
							root = {
								add_adm_power = 1
							}
						}
						while = {
							limit = { 
								check_variable = {
									which = EDG_base_production_var
									value = 1
								}
							}
							subtract_variable = {
								which = EDG_base_production_var
								value = 1
							}
							root = {
								add_dip_power = 1
							}
						}
						while = {
							limit = { 
								check_variable = {
									which = EDG_base_manpower_var
									value = 1
								}
							}
							subtract_variable = {
								which = EDG_base_manpower_var
								value = 1
							}
							root = {
								add_mil_power = 1
							}
						}
						add_devastation = 100
						add_permanent_province_modifier = {
							name = EDG_WAL_raiding_province
							duration = 1825
						}
					}
					every_neighbor_country = {
						limit = {
							NOT = {
								is_subject_of = root
							}
						}
						if = {
							limit = { 
								is_subject = yes
							}
							overlord = {
								country_event = {
									id = EDG_WALActionEvent.0
								}
							}
						}
						else = {
							country_event = {
								id = EDG_WALActionEvent.0
							}
						}
					}
				}
			}
		}
		EDG_WAL_atrocity_interactions_2 = {
			icon = GFX_mechanic_EDG_WAL_atrocity_interactions_2
			cost_type = EDG_WAL_atrocity
			cost = 50
			effect = {
				change_variable = {
					which = EDG_WAL_assassinate_count
					value = 1
				}
			}
		}
		EDG_WAL_atrocity_interactions_3 = {
			icon = GFX_mechanic_EDG_WAL_atrocity_interactions_3
			cost_type = EDG_WAL_atrocity
			cost = 75
			effect = {
				change_variable = {
					which = EDG_WAL_spread_fear_count
					value = 1
				}
			}
		}
	}
}