EDG_VEN_personal_union_state_action = {#要求成为丹多洛联统国
	category = influence
    require_acceptance = no	   # 是否该行动需要被目标国家接受，以便执行接受效果
    # 决定何时该行动是可见的
	is_visible = {
		has_reform = EDG_venice_monarchy_reform #有政府改革“威尼斯王朝”
        FROM = { #前者是
            is_subject_of = ROOT #当前国家的一个属国
			OR = {
				is_subject_of_type = personal_union #当前国家的一个联统国
				is_subject_of_type = vassal #当前国家的一个附庸国
			}
			
        }
    }
    # 决定何时该行动能被采用
    is_allowed = {
        if = {
			limit = {
				FROM = { liberty_desire = 50 } 
			}
			custom_trigger_tooltip = {
				tooltip = FROM_IS_REBELLIOUS_TT 
				FROM = { liberty_desire = 50 }
			}
		}
		if = {
			limit = {
				FROM = { is_at_war = yes }
			}
			custom_trigger_tooltip = {
				tooltip = FROM_IS_AT_WAR_TT
				FROM = { is_at_war = no }
			}
		}
		if = {
			limit = {
				FROM = { NOT = { government = monarchy } }
			}
			custom_trigger_tooltip = {
				tooltip = FROM_IS_NOT_MONARCHY
				FROM = { government = monarchy }
			}
		}
		if = {
			limit = {
				FROM = { NOT = { dynasty = ROOT } }
			}
			custom_trigger_tooltip = {
				tooltip = FROM_IS_NOT_DYNASTY
				FROM = { dynasty = ROOT }
			}
		}
    }
    # 接受时执行哪个效果
    on_accept = {
		create_subject = { 
            subject_type = EDG_VEN_personal_union 
            subject = FROM 
        }
        FROM = {
			change_country_color = {
				color = { 232  106  84 }
			}
        }
	}
    # 控制AI对该行动的使用
    ai_will_do = {
        always = yes
    }
}

EDG_VEN_trade_state_action = { #要求成为贸易伙伴
	category = influence
	require_acceptance = yes

	is_visible = {
		has_reform = EDG_VEN_tradecircle_reform #有政府改革“威尼斯贸易圈”
		is_subject = no
		FROM = { is_subject = no }
	}
	is_allowed = {
		if = {
			limit = {
				NOT = {
					FROM = {
						capital_scope = {
							trade_range = ROOT
						}
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = REQUIRES_CAPITAL_IN_TRADE_RANGE_TT
				FROM = {
					capital_scope = {
						trade_range = ROOT
					}
				}
			}
		}
		if = {
			limit = {
				FROM = { is_at_war = yes }
			}
			custom_trigger_tooltip = {
				tooltip = FROM_IS_AT_WAR_TT
				FROM = { is_at_war = no }
			}
		}
		if = {
			limit = {
				is_at_war = yes
			}
			custom_trigger_tooltip = {
				tooltip = ROOT_IS_AT_WAR_TT
				is_at_war = no
			}
		}
	}
	on_accept = {
		create_subject = {
			subject_type = EDG_VEN_trade_state
			subject = FROM
		}
	}
	on_decline = {
	}

	ai_will_do = { # this is a trigger
		OR = {
			ai_attitude = {
				who = FROM
				attitude = attitude_friendly
			}
			ai_attitude = {
				who = FROM
				attitude = attitude_protective
			}
			FROM = {
				any_neighbor_country = {
					NOT = { tag = ROOT }
					FROM = {
						ai_attitude = {
							who = PREV
							attitude = attitude_threatened
						}
					}
				}
			}
			FROM = {
				ai_attitude = {
					who = ROOT
					attitude = attitude_threatened
				}
			}
		}
		NOT = {
			ai_attitude = {
				who = FROM
				attitude = attitude_domineering
			}
		}
		NOT = {
			ai_attitude = {
				who = FROM
				attitude = attitude_hostile
			}
		}
		NOT = {
			ai_attitude = {
				who = FROM
				attitude = attitude_outraged
			}
		}
		has_opinion = {
			who = FROM
			value = 50
		}
		NOT = {
			FROM = {
				has_country_modifier = dissolve_protectorate_timer
			}
		}
	}

	ai_acceptance = {
        add_entry = {
            name = DIPLO_OPPINION
			export_to_variable = {
				variable_name = ai_value
				value = opinion
				who = FROM
				with = ROOT
			}
			multiply_variable = {
				which = ai_value 
				value = 0.125
			}
        }
		add_entry = {
			name = AI_TRUST_TOWARDS_ROOT
			export_to_variable = {
				variable_name = ai_value
				value = trust
				who = FROM
				with = ROOT
			}			
			subtract_variable = { 
				which = ai_value
				value = 50
			}
			#1 trust = +4 ai points
			multiply_variable = {
				which = ai_value
				value = 0.4
			}
		}
		add_entry = {
			name = AI_DIPLOMATIC_REPUTATION
			export_to_variable = {
				variable_name = ai_value
				value = trigger_value:diplomatic_reputation
			}
			#1 rep = 3
			multiply_variable = {
				which = ai_value
				value = 3
			}
		}
		add_entry = {
			name = AI_TOTAL_DEVELOPMENT
			export_to_variable = {
				variable_name = ai_value
				value = total_development
				who = FROM
			}
			#4 dev = -1
			multiply_variable = {
				which = ai_value
				value = -0.25
			}
		}
		add_entry = {
			name = DIPLO_HAS_AI_HAS_OWN_SUBJECTS_TT
			limit = {
				FROM = { num_of_subjects = 1 }
			}
			export_to_variable = {
				variable_name = ai_value
				value = 1
			}
			multiply_variable = {
				which = ai_value
				value = -1000
			}
		}
		add_entry = {
			name = attitude_neutral_DIPLO_ATTITUDE_TT
			limit = { FROM = { ai_attitude = { who = ROOT attitude = attitude_neutral } } }
			export_to_variable = { variable_name = ai_value value = 1 }
			multiply_variable = { which = ai_value value = -20 }
		}
		add_entry = {
			name = attitude_rivalry_DIPLO_ATTITUDE_TT
			limit = { FROM = { ai_attitude = { who = ROOT attitude = attitude_rivalry } } }
			export_to_variable = { variable_name = ai_value value = 1 }
			multiply_variable = { which = ai_value value = -1000 }
		}
		add_entry = {
			name = attitude_hostile_DIPLO_ATTITUDE_TT
			limit = { FROM = { ai_attitude = { who = ROOT attitude = attitude_hostile } } }
			export_to_variable = { variable_name = ai_value value = 1 }
			multiply_variable = { which = ai_value value = -1000 }
		}
		add_entry = {
			name = attitude_friendly_DIPLO_ATTITUDE_TT
			limit = { FROM = { ai_attitude = { who = ROOT attitude = attitude_friendly } } }
			export_to_variable = { variable_name = ai_value value = 1 }
			multiply_variable = { which = ai_value value = 10 }
		}
		add_entry = {
			name = attitude_threatened_DIPLO_ATTITUDE_TT
			limit = { FROM = { ai_attitude = { who = ROOT attitude = attitude_threatened } } }
			export_to_variable = { variable_name = ai_value value = 1 }
			multiply_variable = { which = ai_value value = 10 }
		}
		add_entry = {
			name = attitude_outraged_DIPLO_ATTITUDE_TT
			limit = { FROM = { ai_attitude = { who = ROOT attitude = attitude_outraged } } }
			export_to_variable = { variable_name = ai_value value = 1 }
			multiply_variable = { which = ai_value value = -1000 }
		}
		add_entry = {
			name = attitude_domineering_DIPLO_ATTITUDE_TT
			limit = { FROM = { ai_attitude = { who = ROOT attitude = attitude_domineering } } }
			export_to_variable = { variable_name = ai_value value = 1 }
			multiply_variable = { which = ai_value value = -1000 }
		}
		add_entry = {
			name = DIPLO_BORDER_DISTANCE_TT
			export_to_variable = {
				variable_name = ai_value
				value = border_distance
				who = FROM
				with = ROOT
			}
			#2 units = -1
			multiply_variable = {
				which = ai_value
				value = -0.5
			}
		}
	}
}

# Call trade_state into wars
EDG_VEN_call_trade_state_into_wars = { #召唤贸易伙伴参战
	category = influence
	require_acceptance = no
	is_visible = {
		FROM = {
			is_subject_of = ROOT
			is_subject_of_type = EDG_VEN_trade_state
		}
	}
	is_allowed = {
		if = {
			limit = {
				FROM = { liberty_desire = 50 }
			}
			custom_trigger_tooltip = {
				tooltip = FROM_IS_REBELLIOUS_TT
				FROM = { liberty_desire = 50 }
			}
		}
		if = {
			limit = {
				is_at_war = no
			}
			custom_trigger_tooltip = {
				tooltip = ROOT_IS_NOT_AT_WAR_TT
				is_at_war = yes
			}
		}
		if = {
			limit = {
				FROM = {
					NOT = {
						has_opinion = {
							who = ROOT
							value = 0
						}
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = FROM_MUST_HAVE_POSITIVE_OPINION_TT
				FROM = {
					has_opinion = {
						who = ROOT
						value = 0
					}
				}
			}
		}
		if = {
			limit = {
				FROM = { is_at_war = yes }
			}
			custom_trigger_tooltip = {
				tooltip = FROM_IS_AT_WAR_TT
				FROM = { is_at_war = no }
			}
		}
	}
	on_accept = {
		FROM = {
			add_opinion = {
				who = ROOT
				modifier = trade_protectorate_called_into_war
			}
			join_all_defensive_wars_of = ROOT
		}
		if = {
			limit = {
				is_in_war = { attackers = ROOT }
			}
			FROM = {
				add_opinion = {
					who = ROOT
					modifier = trade_protectorate_called_into_war
				}
				join_all_offensive_wars_of = ROOT
			}
		}
	}
	on_decline = {
	}

	ai_will_do = { # this is a trigger
		always = yes
	}
}

#EDG_VEN_tributary_state_action = {#要求成为贸易伙伴
#	category = influence
#	alert_tooltip = EDG_VEN_tributary_state_action_tt #要显示在警告工具提示的本地化关键字
#    require_acceptance = yes	   # 是否该行动需要被目标国家接受，以便执行接受效果
#    # 决定何时该行动是可见的
#	is_visible = {
#		has_reform = EDG_VEN_3_reform #有政府改革“丹多洛王室贸易公司”
#        FROM = { #前者是
#            is_subject = no #不是属国
#        }
#    }
#    # 决定何时该行动能被采用
#    is_allowed = {
#		if = {
#			limit = {
#				FROM = { is_at_war = yes }
#			}
#			custom_trigger_tooltip = {
#				tooltip = FROM_IS_AT_WAR_TT
#				FROM = { is_at_war = no }
#			}
#		}
#    }
#    # 接受时执行哪个效果
#    on_accept = {
#		create_subject = { 
#            subject_type = EDG_VEN_tributary_state 
#            subject = FROM 
#        }
#        FROM = {
#			change_country_color = {
#				color = { 232  106  84 }
#			}
#        }
#	}
#	# 控制AI对该行动的接受倾向，如果需要目标国家同意。非必须。
#    ai_acceptance = {
#		add_entry = {
#			name = DIPLO_OPPINION
#			export_to_variable = {
#				variable_name = ai_value
#				value = opinion
#				who = FROM
#				with = ROOT
#			}
#			multiply_variable = {
#				which = ai_value 
#				value = 0.125
#			}
#        }
#		add_entry = {
#			name = AI_TRUST_TOWARDS_ROOT
#			export_to_variable = {
#				variable_name = ai_value
#				value = trust
#				who = FROM
#				with = ROOT
#			}			
#			subtract_variable = { 
#				which = ai_value
#				value = 50
#			}
#			#1 trust = +4 ai points
#			multiply_variable = {
#				which = ai_value
#				value = 0.4
#			}
#		}
#		add_entry = {
#			name = AI_DIPLOMATIC_REPUTATION
#			export_to_variable = {
#				variable_name = ai_value
#				value = trigger_value:diplomatic_reputation
#			}
#			#1 rep = 3
#			multiply_variable = {
#				which = ai_value
#				value = 3
#			}
#		}
#		add_entry = {
#			name = AI_TOTAL_DEVELOPMENT
#			export_to_variable = {
#				variable_name = ai_value
#				value = total_development
#				who = FROM
#			}
#			#4 dev = -1
#			multiply_variable = {
#				which = ai_value
#				value = -5
#			}
#		}
#		add_entry = {
#			name = DIPLO_HAS_AI_HAS_OWN_SUBJECTS_TT
#			limit = {
#				FROM = { num_of_subjects = 1 }
#			}
#			export_to_variable = {
#				variable_name = ai_value
#				value = 1
#			}
#			multiply_variable = {
#				which = ai_value
#				value = -1000
#			}
#		}
#		add_entry = {
#			name = attitude_neutral_DIPLO_ATTITUDE_TT
#			limit = { FROM = { ai_attitude = { who = ROOT attitude = attitude_neutral } } }
#			export_to_variable = { variable_name = ai_value value = 1 }
#			multiply_variable = { which = ai_value value = -20 }
#		}
#		add_entry = {
#			name = attitude_rivalry_DIPLO_ATTITUDE_TT
#			limit = { FROM = { ai_attitude = { who = ROOT attitude = attitude_rivalry } } }
#			export_to_variable = { variable_name = ai_value value = 1 }
#			multiply_variable = { which = ai_value value = -1000 }
#		}
#		add_entry = {
#			name = attitude_hostile_DIPLO_ATTITUDE_TT
#			limit = { FROM = { ai_attitude = { who = ROOT attitude = attitude_hostile } } }
#			export_to_variable = { variable_name = ai_value value = 1 }
#			multiply_variable = { which = ai_value value = -1000 }
#		}
#		add_entry = {
#			name = attitude_friendly_DIPLO_ATTITUDE_TT
#			limit = { FROM = { ai_attitude = { who = ROOT attitude = attitude_friendly } } }
#			export_to_variable = { variable_name = ai_value value = 1 }
#			multiply_variable = { which = ai_value value = 10 }
#		}
#		add_entry = {
#			name = attitude_threatened_DIPLO_ATTITUDE_TT
#			limit = { FROM = { ai_attitude = { who = ROOT attitude = attitude_threatened } } }
#			export_to_variable = { variable_name = ai_value value = 1 }
#			multiply_variable = { which = ai_value value = 10 }
#		}
#		add_entry = {
#			name = attitude_outraged_DIPLO_ATTITUDE_TT
#			limit = { FROM = { ai_attitude = { who = ROOT attitude = attitude_outraged } } }
#			export_to_variable = { variable_name = ai_value value = 1 }
#			multiply_variable = { which = ai_value value = -1000 }
#		}
#		add_entry = {
#			name = attitude_domineering_DIPLO_ATTITUDE_TT
#			limit = { FROM = { ai_attitude = { who = ROOT attitude = attitude_domineering } } }
#			export_to_variable = { variable_name = ai_value value = 1 }
#			multiply_variable = { which = ai_value value = -1000 }
#		}
#		add_entry = {
#			name = DIPLO_BORDER_DISTANCE_TT
#			export_to_variable = {
#				variable_name = ai_value
#				value = border_distance
#				who = FROM
#				with = ROOT
#			}
#			#2 units = -1
#			multiply_variable = {
#				which = ai_value
#				value = -2.5
#			}
#		}
#	}
#    # 控制AI对该行动的使用
#    ai_will_do = {
#        always = no
#    }
#}

#EDG_VEN_trade_city_action = {#特许贸易城市
#	category = influence
#	alert_tooltip = EDG_VEN_tributary_state_action_tt #要显示在警告工具提示的本地化关键字
#	require_acceptance = yes
#	# 决定何时该行动是可见的
#	is_visible = {
#		has_reform = EDG_VEN_3_reform #有政府改革“丹多洛王室贸易公司”
#		NOT = {
#			OR = {
#				num_of_cities = 2
#				is_subject_of = root
#			}
#		}
#	}
#	# 决定何时该行动能被采用
#	is_allowed = {
#		is_trade_league_leader = yes
#		is_in_trade_league_with = from
#		from = {
#			has_opinion = {
#				who = root
#				value = 190
#			}
#		}
#	}
#	# 接受时执行哪个效果
#	on_accept = {
#		create_subject = { 
#            subject_type = EDG_VEN_trade_city 
#            subject = FROM 
#        }
#        FROM = {
#			change_country_color = {
#				color = { 232  106  84 }
#			}
#        }
#	}
#	# 控制AI对该行动的使用
#	ai_will_do = {
#		always = no
#	}
#	# 控制AI对该行动的接受倾向，如果需要目标国家同意。非必须。
#	ai_acceptance = {
#		add_entry = {
#			name = BASE_AI_ACCEPTANCE
#			subtract_variable = { 
#				which = ai_value
#				value = 40
#			}
#		}
#		add_entry = {
#            name = DIPLO_OPPINION
#			export_to_variable = {
#				variable_name = ai_value
#				value = opinion
#				who = FROM
#				with = ROOT
#			}
#			multiply_variable = {
#				which = ai_value 
#				value = 0.2
#			}
#        }
#		add_entry = {
#			name = AI_TRUST_TOWARDS_ROOT
#			export_to_variable = {
#				variable_name = ai_value
#				value = trust
#				who = FROM
#				with = ROOT
#			}			
#			subtract_variable = { 
#				which = ai_value
#				value = 50
#			}
#			#1 trust = +4 ai points
#			multiply_variable = {
#				which = ai_value
#				value = 0.4
#			}
#		}
#		add_entry = {
#			name = AI_DIPLOMATIC_REPUTATION
#			export_to_variable = {
#				variable_name = ai_value
#				value = trigger_value:diplomatic_reputation
#			}
#			#1 rep = 4
#			multiply_variable = {
#				which = ai_value
#				value = 4
#			}
#		}
#	}
#}



