custom_window = {
	name = EDG_MEN_main_window
	potential = {
		from = {
			has_country_flag = EDG_MEN_1_21_flag
			has_country_flag = EDG_MEN_open_window_flag
			has_estate_privilege = estate_EDG_bard_reciting_new_legends
		}
		NOT = {
			tag = from
		}
	}
}

custom_button = {
	#控制按钮
	name = EDG_MEN_window_button
	tooltip = EDG_MEN_window_button.tt	#控制面板开关
	potential = {
		from = {
			has_country_flag = EDG_MEN_1_21_flag
		}
		NOT = {
			tag = from
		}
	}
	trigger = {
	}
	effect = {
		custom_tooltip = EDG_MEN_window_button.effect.tt		#控制面板开关
		hidden_effect = {
			from = {
				if = {
					limit = {
						has_country_flag = EDG_MEN_open_window_flag
					}
					clr_country_flag = EDG_MEN_open_window_flag
				}
				else = {
					set_country_flag = EDG_MEN_open_window_flag
				}
			}
		}
	}
}

custom_button = {
	#
	name = EDG_MEN_dip_button_1
	tooltip = EDG_MEN_dip_button_1.tt	#互动名称
	potential = {
	}
	trigger = {
		from = {
			treasury = 50
			has_country_flag = EDG_MEN_1_21_flag
		}
		if = {
			limit = {
				has_country_flag = EDG_MEN_already_spread_myth_a_flag
			}
			custom_trigger_tooltip = {
				tooltip = EDG_MEN_already_spread_myth.tt				#我们已经向§Y[Root.GetName]§!传播过该神话了
				NOT = {
					has_country_flag = EDG_MEN_already_spread_myth_a_flag
				}
			}
		}
	}
	effect = {
		custom_tooltip = EDG_MEN_exta_cost_gold.tt		#§T传播史诗§!基础费用为§Y50§!¤，每§T传播史诗§!一次将花费额外§Y10§!¤
		custom_tooltip = EDG_SPACE_TT
		from = {
			#对执行者的效果
			change_variable = {
				which = EDG_MEN_POEM_a_var
				value = 1
			}
			add_treasury = -50
			add_dip_power = 10
			custom_tooltip = EDG_SPACE_TT
			if = {
				limit = {
					from = {
						check_variable = {
							which = EDG_MEN_spread_myth_count_1
							value = 1
						}
					}
				}
				custom_tooltip = EDG_MEN_extat_gold_cost_1	#当前已§T传播史诗§!次数：§Y[EDG_MEN_spread_myth_count_1.GetValue]§!，额外§R支付费用§!为：§Y[EDG_MEN_spread_myth_extra_cost_1.GetValue]§!¤
				from = {
					hidden_effect = {
						set_variable = {
							which = EDG_MEN_spread_myth_count_copy_1
							which = EDG_MEN_spread_myth_count_1
						}
						while = {
							limit = {
								check_variable = {
									which = EDG_MEN_spread_myth_count_copy_1
									value = 1
								}
							}
							subtract_variable = {
								which = EDG_MEN_spread_myth_count_copy_1
								value = 1
							}
							add_treasury = -10
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_a_var
						value = 1
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_a_var
							value = 10
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_1_1_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_ibashi_legend_2_modifier	
					remove_country_modifier = EDG_MEN_ibashi_legend_3_modifier	
					remove_country_modifier = EDG_MEN_ibashi_legend_4_modifier	
					remove_country_modifier = EDG_MEN_ibashi_legend_5_modifier	
				}
				add_country_modifier = {
					name = EDG_MEN_ibashi_legend_1_modifier	
					duration = -1
					hidden = yes
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_a_var
						value = 10
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_a_var
							value = 20
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_1_2_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_ibashi_legend_1_modifier	
					remove_country_modifier = EDG_MEN_ibashi_legend_3_modifier	
					remove_country_modifier = EDG_MEN_ibashi_legend_4_modifier	
					remove_country_modifier = EDG_MEN_ibashi_legend_5_modifier	
				}
				add_country_modifier = {
					name = EDG_MEN_ibashi_legend_2_modifier	
					duration = -1
					hidden = yes
				}
			}	
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_a_var
						value = 20
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_a_var
							value = 30
						}
					}
				}
				##custom_tooltip = EDG_MEN_P_1_3_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_ibashi_legend_1_modifier	
					remove_country_modifier = EDG_MEN_ibashi_legend_2_modifier	
					remove_country_modifier = EDG_MEN_ibashi_legend_4_modifier	
					remove_country_modifier = EDG_MEN_ibashi_legend_5_modifier	
				}
				add_country_modifier = {
					name = EDG_MEN_ibashi_legend_3_modifier	
					duration = -1
					hidden = yes
				}
			}		
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_a_var
						value = 30
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_a_var
							value = 40
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_1_4_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_ibashi_legend_1_modifier	
					remove_country_modifier = EDG_MEN_ibashi_legend_2_modifier	
					remove_country_modifier = EDG_MEN_ibashi_legend_3_modifier	
					remove_country_modifier = EDG_MEN_ibashi_legend_5_modifier	
				}
				add_country_modifier = {
					name = EDG_MEN_ibashi_legend_4_modifier	
					duration = -1
					hidden = yes
				}
			}		
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_a_var
						value = 40
					}
				}
				#custom_tooltip = EDG_MEN_P_1_5_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_ibashi_legend_1_modifier	
					remove_country_modifier = EDG_MEN_ibashi_legend_2_modifier	
					remove_country_modifier = EDG_MEN_ibashi_legend_3_modifier	
					remove_country_modifier = EDG_MEN_ibashi_legend_4_modifier	
				}
				add_country_modifier = {
					name = EDG_MEN_ibashi_legend_5_modifier	
					duration = -1
					hidden = yes
				}
			}				
		}
		hidden_effect = {
			from = {
				change_variable = {
					which = EDG_MEN_spread_myth_count_1
					value = 1
				}
				set_variable = {
					which = EDG_MEN_spread_myth_extra_cost_1
					which = EDG_MEN_spread_myth_count_1
				}
				multiply_variable = {
					which = EDG_MEN_spread_myth_extra_cost_1
					value = 10
				}
				root = {
					set_variable = {
						which = EDG_MEN_spread_myth_count_1
						which = prev
					}
					set_variable = {
						which = EDG_MEN_spread_myth_extra_cost_1
						which = prev
					}
				}
			}
			set_country_flag = EDG_MEN_already_spread_myth_a_flag
		}
	}
}

custom_button = {
	name = EDG_MEN_dip_button_2
	tooltip = EDG_MEN_dip_button_2.tt
	potential = {
	}
	trigger = {
		from = {
			treasury = 50
			has_country_flag = EDG_MEN_RUM_betheone_after
		}
		if = {
			limit = {
				has_country_flag = EDG_MEN_already_spread_myth_b_flag
			}
			custom_trigger_tooltip = {
				tooltip = EDG_MEN_already_spread_myth.tt
				NOT = {
					has_country_flag = EDG_MEN_already_spread_myth_b_flag
				}
			}
		}
	}
	effect = {
		custom_tooltip = EDG_MEN_exta_cost_gold.tt
		custom_tooltip = EDG_SPACE_TT
		from = {
			#对执行者的效果
			change_variable = {
				which = EDG_MEN_POEM_b_var
				value = 1
			}
			add_treasury = -50
			add_dip_power = 10
			custom_tooltip = EDG_SPACE_TT
			if = {
				limit = {
					from = {
						check_variable = {
							which = EDG_MEN_spread_myth_count_2
							value = 1
						}
					}
				}
				custom_tooltip = EDG_MEN_extat_gold_cost_2
				from = {
					hidden_effect = {
						set_variable = {
							which = EDG_MEN_spread_myth_count_copy_2
							which = EDG_MEN_spread_myth_count_2
						}
						while = {
							limit = {
								check_variable = {
									which = EDG_MEN_spread_myth_count_copy_2
									value = 1
								}
							}
							subtract_variable = {
								which = EDG_MEN_spread_myth_count_copy_2
								value = 1
							}
							add_treasury = -10
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_b_var
						value = 1
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_b_var
							value = 10
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_2_1_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_orthdox_2_modifier	
					remove_country_modifier = EDG_MEN_orthdox_3_modifier
					remove_country_modifier = EDG_MEN_orthdox_4_modifier	
					remove_country_modifier = EDG_MEN_orthdox_5_modifier
				}
				add_country_modifier = {
					name = EDG_MEN_orthdox_1_modifier
					duration = -1
					hidden = yes
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_b_var
						value = 10
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_b_var
							value = 20
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_2_2_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_orthdox_1_modifier	
					remove_country_modifier = EDG_MEN_orthdox_3_modifier
					remove_country_modifier = EDG_MEN_orthdox_4_modifier	
					remove_country_modifier = EDG_MEN_orthdox_5_modifier
				}
				add_country_modifier = {
					name = EDG_MEN_orthdox_2_modifier
					duration = -1
					hidden = yes
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_b_var
						value = 20
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_b_var
							value = 30
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_2_3_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_orthdox_1_modifier	
					remove_country_modifier = EDG_MEN_orthdox_2_modifier
					remove_country_modifier = EDG_MEN_orthdox_4_modifier	
					remove_country_modifier = EDG_MEN_orthdox_5_modifier
				}
				add_country_modifier = {
					name = EDG_MEN_orthdox_3_modifier
					duration = -1
					hidden = yes
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_b_var
						value = 30
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_b_var
							value = 40
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_2_4_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_orthdox_1_modifier	
					remove_country_modifier = EDG_MEN_orthdox_2_modifier
					remove_country_modifier = EDG_MEN_orthdox_3_modifier	
					remove_country_modifier = EDG_MEN_orthdox_5_modifier
				}
				add_country_modifier = {
					name = EDG_MEN_orthdox_4_modifier
					duration = -1
					hidden = yes
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_b_var
						value = 40
					}
				}
				#custom_tooltip = EDG_MEN_P_2_5_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_orthdox_1_modifier	
					remove_country_modifier = EDG_MEN_orthdox_2_modifier
					remove_country_modifier = EDG_MEN_orthdox_3_modifier	
					remove_country_modifier = EDG_MEN_orthdox_4_modifier
				}
				add_country_modifier = {
					name = EDG_MEN_orthdox_5_modifier
					duration = -1
					hidden = yes
				}
			}
		}
		hidden_effect = {
			from = {
				change_variable = {
					which = EDG_MEN_spread_myth_count_2
					value = 1
				}
				set_variable = {
					which = EDG_MEN_spread_myth_extra_cost_2
					which = EDG_MEN_spread_myth_count_2
				}
				multiply_variable = {
					which = EDG_MEN_spread_myth_extra_cost_2
					value = 10
				}
				root = {
					set_variable = {
						which = EDG_MEN_spread_myth_count_2
						which = prev
					}
					set_variable = {
						which = EDG_MEN_spread_myth_extra_cost_2
						which = prev
					}
				}
			}
			set_country_flag = EDG_MEN_already_spread_myth_b_flag
		}
	}
}

custom_button = {
	name = EDG_MEN_dip_button_3
	tooltip = EDG_MEN_dip_button_3.tt
	potential = {
	}
	trigger = {
		from = {
			treasury = 50
			has_country_flag = EDG_MEN_3_25_flag
		}
		if = {
			limit = {
				has_country_flag = EDG_MEN_already_spread_myth_c_flag
			}
			custom_trigger_tooltip = {
				tooltip = EDG_MEN_already_spread_myth.tt
				NOT = {
					has_country_flag = EDG_MEN_already_spread_myth_c_flag
				}
			}
		}
	}
	effect = {
		custom_tooltip = EDG_MEN_exta_cost_gold.tt
		custom_tooltip = EDG_SPACE_TT
		from = {
			#对执行者的效果
			change_variable = {
				which = EDG_MEN_POEM_c_var
				value = 1
			}
			add_treasury = -50
			add_dip_power = 10
			custom_tooltip = EDG_SPACE_TT
			if = {
				limit = {
					from = {
						check_variable = {
							which = EDG_MEN_spread_myth_count_3
							value = 1
						}
					}
				}
				custom_tooltip = EDG_MEN_extat_gold_cost_3
				from = {
					hidden_effect = {
						set_variable = {
							which = EDG_MEN_spread_myth_count_copy_3
							which = EDG_MEN_spread_myth_count_3
						}
						while = {
							limit = {
								check_variable = {
									which = EDG_MEN_spread_myth_count_copy_3
									value = 1
								}
							}
							subtract_variable = {
								which = EDG_MEN_spread_myth_count_copy_3
								value = 1
							}
							add_treasury = -10
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_c_var
						value = 1
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_c_var
							value = 10
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_3_1_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_the_roman_2_modifier	
					remove_country_modifier = EDG_MEN_the_roman_3_modifier
					remove_country_modifier = EDG_MEN_the_roman_4_modifier	
					remove_country_modifier = EDG_MEN_the_roman_5_modifier
				}
				add_country_modifier = {
					name = EDG_MEN_the_roman_1_modifier
					duration = -1
					hidden = yes
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_c_var
						value = 10
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_c_var
							value = 20
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_3_2_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_the_roman_1_modifier	
					remove_country_modifier = EDG_MEN_the_roman_3_modifier
					remove_country_modifier = EDG_MEN_the_roman_4_modifier	
					remove_country_modifier = EDG_MEN_the_roman_5_modifier
				}
				add_country_modifier = {
					name = EDG_MEN_the_roman_2_modifier
					duration = -1
					hidden = yes
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_c_var
						value = 20
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_c_var
							value = 30
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_3_3_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_the_roman_1_modifier	
					remove_country_modifier = EDG_MEN_the_roman_2_modifier
					remove_country_modifier = EDG_MEN_the_roman_4_modifier	
					remove_country_modifier = EDG_MEN_the_roman_5_modifier
				}
				add_country_modifier = {
					name = EDG_MEN_the_roman_3_modifier
					duration = -1
					hidden = yes
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_c_var
						value = 30
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_c_var
							value = 40
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_3_4_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_the_roman_1_modifier	
					remove_country_modifier = EDG_MEN_the_roman_2_modifier
					remove_country_modifier = EDG_MEN_the_roman_3_modifier	
					remove_country_modifier = EDG_MEN_the_roman_5_modifier
				}
				add_country_modifier = {
					name = EDG_MEN_the_roman_4_modifier
					duration = -1
					hidden = yes
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_c_var
						value = 40
					}
				}
				#custom_tooltip = EDG_MEN_P_3_5_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_the_roman_1_modifier	
					remove_country_modifier = EDG_MEN_the_roman_2_modifier
					remove_country_modifier = EDG_MEN_the_roman_3_modifier	
					remove_country_modifier = EDG_MEN_the_roman_4_modifier
				}
				add_country_modifier = {
					name = EDG_MEN_the_roman_5_modifier
					duration = -1
					hidden = yes
				}
			}
		}
		hidden_effect = {
			from = {
				change_variable = {
					which = EDG_MEN_spread_myth_count_3
					value = 1
				}
				set_variable = {
					which = EDG_MEN_spread_myth_extra_cost_3
					which = EDG_MEN_spread_myth_count_3
				}
				multiply_variable = {
					which = EDG_MEN_spread_myth_extra_cost_3
					value = 10
				}
				root = {
					set_variable = {
						which = EDG_MEN_spread_myth_count_3
						which = prev
					}
					set_variable = {
						which = EDG_MEN_spread_myth_extra_cost_3
						which = prev
					}
				}
			}
			set_country_flag = EDG_MEN_already_spread_myth_c_flag
		}
	}
}

custom_button = {
	name = EDG_MEN_dip_button_4
	tooltip = EDG_MEN_dip_button_4.tt
	potential = {
	}
	trigger = {
		from = {
			treasury = 50
			has_country_flag = 	EDG_MEN_3_28_flag	
		}
		if = {
			limit = {
				has_country_flag = EDG_MEN_already_spread_myth_d_flag
			}
			custom_trigger_tooltip = {
				tooltip = EDG_MEN_already_spread_myth.tt
				NOT = {
					has_country_flag = EDG_MEN_already_spread_myth_d_flag
				}
			}
		}
	}
	effect = {
		custom_tooltip = EDG_MEN_exta_cost_gold.tt
		custom_tooltip = EDG_SPACE_TT
		from = {
			#对执行者的效果
			change_variable = {
				which = EDG_MEN_POEM_d_var
				value = 1
			}
			add_treasury = -50
			add_dip_power = 10
			custom_tooltip = EDG_SPACE_TT
			if = {
				limit = {
					from = {
						check_variable = {
							which = EDG_MEN_spread_myth_count_4
							value = 1
						}
					}
				}
				custom_tooltip = EDG_MEN_extat_gold_cost_4
				from = {
					hidden_effect = {
						set_variable = {
							which = EDG_MEN_spread_myth_count_copy_4
							which = EDG_MEN_spread_myth_count_4
						}
						while = {
							limit = {
								check_variable = {
									which = EDG_MEN_spread_myth_count_copy_4
									value = 1
								}
							}
							subtract_variable = {
								which = EDG_MEN_spread_myth_count_copy_4
								value = 1
							}
							add_treasury = -10
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_c_var
						value = 1
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_c_var
							value = 10
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_4_1_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_the_world_2_modifier	
					remove_country_modifier = EDG_MEN_the_world_3_modifier	
					remove_country_modifier = EDG_MEN_the_world_4_modifier	
					remove_country_modifier = EDG_MEN_the_world_5_modifier	
				}
				add_country_modifier = {
					name = EDG_MEN_the_world_1_modifier	
					duration = -1
					hidden = yes
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_c_var
						value = 10
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_c_var
							value = 20
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_4_2_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_the_world_1_modifier	
					remove_country_modifier = EDG_MEN_the_world_3_modifier	
					remove_country_modifier = EDG_MEN_the_world_4_modifier	
					remove_country_modifier = EDG_MEN_the_world_5_modifier	
				}
				add_country_modifier = {
					name = EDG_MEN_the_world_2_modifier	
					duration = -1
					hidden = yes
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_c_var
						value = 20
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_c_var
							value = 30
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_4_3_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_the_world_1_modifier	
					remove_country_modifier = EDG_MEN_the_world_2_modifier	
					remove_country_modifier = EDG_MEN_the_world_4_modifier	
					remove_country_modifier = EDG_MEN_the_world_5_modifier	
				}
				add_country_modifier = {
					name = EDG_MEN_the_world_3_modifier	
					duration = -1
					hidden = yes
				}
			}
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_c_var
						value = 30
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_c_var
							value = 40
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_4_4_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_the_world_1_modifier	
					remove_country_modifier = EDG_MEN_the_world_2_modifier	
					remove_country_modifier = EDG_MEN_the_world_3_modifier	
					remove_country_modifier = EDG_MEN_the_world_5_modifier	
				}
				add_country_modifier = {
					name = EDG_MEN_the_world_4_modifier	
					duration = -1
					hidden = yes
				}
			}	
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_c_var
						value = 40
					}
				}
				#custom_tooltip = EDG_MEN_P_4_5_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_the_world_1_modifier	
					remove_country_modifier = EDG_MEN_the_world_2_modifier	
					remove_country_modifier = EDG_MEN_the_world_3_modifier	
					remove_country_modifier = EDG_MEN_the_world_4_modifier	
				}
				add_country_modifier = {
					name = EDG_MEN_the_world_5_modifier	
					duration = -1
					hidden = yes
				}
			}			
		}
		hidden_effect = {
			from = {
				change_variable = {
					which = EDG_MEN_spread_myth_count_4
					value = 1
				}
				set_variable = {
					which = EDG_MEN_spread_myth_extra_cost_4
					which = EDG_MEN_spread_myth_count_4
				}
				multiply_variable = {
					which = EDG_MEN_spread_myth_extra_cost_4
					value = 10
				}
				root = {
					set_variable = {
						which = EDG_MEN_spread_myth_count_4
						which = prev
					}
					set_variable = {
						which = EDG_MEN_spread_myth_extra_cost_4
						which = prev
					}
				}
			}
			set_country_flag = EDG_MEN_already_spread_myth_d_flag_4
		}
	}
}

custom_button = {
	name = EDG_MEN_dip_button_5
	tooltip = EDG_MEN_dip_button_5.tt
	potential = {
	}
	trigger = {
		from = {
			treasury = 50
			has_country_flag =  EDG_MEN_5_36_flag
		}
		if = {
			limit = {
				has_country_flag = EDG_MEN_already_spread_myth_e_flag
			}
			custom_trigger_tooltip = {
				tooltip = EDG_MEN_already_spread_myth.tt
				NOT = {
					has_country_flag = EDG_MEN_already_spread_myth_e_flag
				}
			}
		}
	}
	effect = {
		custom_tooltip = EDG_MEN_exta_cost_gold.tt		#§T传播史诗§!基础费用为§Y50§!¤，每§T传播史诗§!一次将花费额外§Y10§!¤
		custom_tooltip = EDG_SPACE_TT
		from = {
			#对执行者的效果
			change_variable = {
				which = EDG_MEN_POEM_e_var
				value = 1
			}
			add_treasury = -50
			add_dip_power = 10
			custom_tooltip = EDG_SPACE_TT
			if = {
				limit = {
					from = {
						check_variable = {
							which = EDG_MEN_spread_myth_count
							value = 1
						}
					}
				}
				custom_tooltip = EDG_MEN_extat_gold_cost				#当前已§T传播史诗§!次数：§Y[EDG_MEN_spread_myth_count.GetValue]§!，额外§R支付费用§!为：§Y[EDG_MEN_spread_myth_extra_cost.GetValue]§!¤
				from = {
					hidden_effect = {
						set_variable = {
							which = EDG_MEN_spread_myth_count_copy
							which = EDG_MEN_spread_myth_count
						}
						while = {
							limit = {
								check_variable = {
									which = EDG_MEN_spread_myth_count_copy
									value = 1
								}
							}
							subtract_variable = {
								which = EDG_MEN_spread_myth_count_copy
								value = 1
							}
							add_treasury = -10
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_e_var
						value = 1
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_e_var
							value = 10
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_5_1_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_night_2_modifier	
					remove_country_modifier = EDG_MEN_night_3_modifier	
					remove_country_modifier = EDG_MEN_night_4_modifier	
					remove_country_modifier = EDG_MEN_night_5_modifier	
				}
				add_country_modifier = {
					name = EDG_MEN_night_1_modifier	
					duration = -1
					hidden = yes
				}
			}	
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_e_var
						value = 10
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_e_var
							value = 20
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_5_2_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_night_1_modifier	
					remove_country_modifier = EDG_MEN_night_3_modifier	
					remove_country_modifier = EDG_MEN_night_4_modifier	
					remove_country_modifier = EDG_MEN_night_5_modifier	
				}
				add_country_modifier = {
					name = EDG_MEN_night_2_modifier	
					duration = -1
					hidden = yes
				}
			}	
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_e_var
						value = 20
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_e_var
							value = 30
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_5_3_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_night_1_modifier	
					remove_country_modifier = EDG_MEN_night_2_modifier	
					remove_country_modifier = EDG_MEN_night_4_modifier	
					remove_country_modifier = EDG_MEN_night_5_modifier	
				}
				add_country_modifier = {
					name = EDG_MEN_night_3_modifier	
					duration = -1
					hidden = yes
				}
			}	
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_e_var
						value = 30
					}
					NOT = {
						check_variable = {
							which = EDG_MEN_POEM_e_var
							value = 40
						}
					}
				}
				#custom_tooltip = EDG_MEN_P_5_4_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_night_1_modifier	
					remove_country_modifier = EDG_MEN_night_2_modifier	
					remove_country_modifier = EDG_MEN_night_3_modifier	
					remove_country_modifier = EDG_MEN_night_5_modifier	
				}
				add_country_modifier = {
					name = EDG_MEN_night_4_modifier	
					duration = -1
					hidden = yes
				}
			}		
			else_if = {
				limit = {
					check_variable = {
						which = EDG_MEN_POEM_e_var
						value = 40
					}
				}
				#custom_tooltip = EDG_MEN_P_5_5_tt
				hidden_effect = {
					remove_country_modifier = EDG_MEN_night_1_modifier	
					remove_country_modifier = EDG_MEN_night_2_modifier	
					remove_country_modifier = EDG_MEN_night_3_modifier	
					remove_country_modifier = EDG_MEN_night_4_modifier	
				}
				add_country_modifier = {
					name = EDG_MEN_night_5_modifier	
					duration = -1
					hidden = yes
				}
			}		
		}
		hidden_effect = {
			from = {
				change_variable = {
					which = EDG_MEN_spread_myth_count
					value = 1
				}
				set_variable = {
					which = EDG_MEN_spread_myth_extra_cost
					which = EDG_MEN_spread_myth_count
				}
				multiply_variable = {
					which = EDG_MEN_spread_myth_extra_cost
					value = 10
				}
				root = {
					set_variable = {
						which = EDG_MEN_spread_myth_count
						which = prev
					}
					set_variable = {
						which = EDG_MEN_spread_myth_extra_cost
						which = prev
					}
				}
			}
			set_country_flag = EDG_MEN_already_spread_myth_e_flag
		}
	}
}
