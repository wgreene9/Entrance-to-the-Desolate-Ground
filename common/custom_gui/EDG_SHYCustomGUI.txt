custom_window = {
	name = EDG_SHY_tech_change_window
	potential = {
		has_country_flag = EDG_SHY_enable_change_tech_group_flag
	}
}

custom_icon = {
	name = EDG_SHY_tech_change_bg
	potential = {

	}
}

custom_button = {
	name = EDG_SHY_tech_maghrib
	tooltip = EDG_SHY_tech_maghrib.tt
	potential = {

	}
	trigger = {
		if = {
			limit = { 
				NOT = {
					has_country_flag = EDG_SHY_enable_tech_group_maghrib_flag
				}
			}
			mission_completed = EDG_SHY_mission_4_25
			hidden_trigger = {
				has_country_flag = EDG_SHY_enable_tech_group_maghrib_flag
			}
		}
		else = {
			NOT = {
				technology_group = EDG_Maghreb_groups
			}
			hidden_trigger = {
				has_country_flag = EDG_SHY_enable_tech_group_maghrib_flag
			}
		}
	}
	effect = {
		change_technology_group = EDG_Maghreb_groups
		change_unit_type = EDG_Maghreb_groups
	}
}
custom_button = {
	name = EDG_SHY_tech_noma
	tooltip = EDG_SHY_tech_noma.tt
	potential = { }
	trigger = {
		NOT = {
			technology_group = nomad_group
		}
	}
	effect = {
		change_technology_group = nomad_group
		change_unit_type = nomad_group
	}
}
custom_button = {
	name = EDG_SHY_tech_chi
	tooltip = EDG_SHY_tech_chi.tt
	potential = { }
	trigger = {
		if = {
			limit = { 
				NOT = {
					has_country_flag = EDG_SHY_enable_tech_group_china_flag
				}
			}
			mission_completed = EDG_SHY_mission_4_31
			hidden_trigger = {
				has_country_flag = EDG_SHY_enable_tech_group_china_flag
			}
		}
		else = {
			NOT = {
				technology_group = chinese
			}
			hidden_trigger = {
				has_country_flag = EDG_SHY_enable_tech_group_china_flag
			}
		}
	}
	effect = {
		change_technology_group = chinese
		change_unit_type = chinese
	}
}
custom_button = {
	name = EDG_SHY_tech_india
	tooltip = EDG_SHY_tech_india.tt
	potential = { }
	trigger = {
		if = {
			limit = { 
				NOT = {
					has_country_flag = EDG_SHY_enable_tech_group_india_flag
				}
			}
			mission_completed = EDG_SHY_mission_1_26
			hidden_trigger = {
				has_country_flag = EDG_SHY_enable_tech_group_india_flag
			}
		}
		else = {
			NOT = {
				technology_group = indian
			}
			hidden_trigger = {
				has_country_flag = EDG_SHY_enable_tech_group_india_flag
			}
		}
	}
	effect = {
		change_technology_group = indian
		change_unit_type = indian
	}
}
custom_button = {
	name = EDG_SHY_tech_muslim
	tooltip = EDG_SHY_tech_muslim.tt
	potential = { }
	trigger = {
		if = {
			limit = { 
				NOT = {
					has_country_flag = EDG_SHY_enable_tech_group_muslim_flag
				}
			}
			mission_completed = EDG_SHY_mission_1_4
			hidden_trigger = {
				has_country_flag = EDG_SHY_enable_tech_group_muslim_flag
			}
		}
		else = {
			NOT = {
				technology_group = muslim
			}
			hidden_trigger = {
				has_country_flag = EDG_SHY_enable_tech_group_muslim_flag
			}
		}
	}
	effect = {
		change_technology_group = muslim
		change_unit_type = muslim
	}
}
custom_button = {
	name = EDG_SHY_tech_anatolia
	tooltip = EDG_SHY_tech_anatolia.tt
	potential = { }
	trigger = {
		if = {
			limit = { 
				NOT = {
					has_country_flag = EDG_SHY_enable_tech_group_anatolia_flag
				}
			}
			mission_completed = EDG_SHY_mission_2_20
			hidden_trigger = {
				has_country_flag = EDG_SHY_enable_tech_group_anatolia_flag
			}
		}
		else = {
			NOT = {
				technology_group = ottoman
			}
			hidden_trigger = {
				has_country_flag = EDG_SHY_enable_tech_group_anatolia_flag
			}
		}
	}
	effect = {
		change_technology_group = ottoman
		change_unit_type = ottoman
	}
}
custom_button = {
	name = EDG_SHY_tech_west
	tooltip = EDG_SHY_tech_west.tt
	potential = {

	}
	trigger = {
		if = {
			limit = { 
				NOT = {
					has_country_flag = EDG_SHY_enable_tech_group_west_flag
				}
			}
			mission_completed = EDG_SHY_mission_3_11
			hidden_trigger = {
				has_country_flag = EDG_SHY_enable_tech_group_west_flag
			}
		}
		else = {
			NOT = {
				technology_group = western
			}
			hidden_trigger = {
				has_country_flag = EDG_SHY_enable_tech_group_west_flag
			}
		}
	}
	effect = {
		change_technology_group = western
		change_unit_type = western
	}
}
custom_button = {
	name = EDG_SHY_tech_east
	tooltip = EDG_SHY_tech_east.tt
	potential = { }
	trigger = {
		if = {
			limit = { 
				NOT = {
					has_country_flag = EDG_SHY_enable_tech_group_east_flag
				}
			}
			mission_completed = EDG_SHY_mission_4_7
			hidden_trigger = {
				has_country_flag = EDG_SHY_enable_tech_group_east_flag
			}
		}
		else = {
			NOT = {
				technology_group = eastern
			}
			hidden_trigger = {
				has_country_flag = EDG_SHY_enable_tech_group_east_flag
			}
		}
	}
	effect = {
		change_technology_group = eastern
		change_unit_type = eastern
	}
}
custom_button = {
	name = EDG_SHY_tech_iran
	tooltip = EDG_SHY_tech_iran.tt
	potential = { }
	trigger = {
		if = {
			limit = { 
				NOT = {
					has_country_flag = EDG_SHY_enable_tech_group_iran_flag
				}
			}
			mission_completed = EDG_SHY_mission_4_19
			hidden_trigger = {
				has_country_flag = EDG_SHY_enable_tech_group_iran_flag
			}
		}
		else = {
			NOT = {
				technology_group = EDG_Iran_groups
			}
			hidden_trigger = {
				has_country_flag = EDG_SHY_enable_tech_group_iran_flag
			}
		}
	}
	effect = {
		change_technology_group = EDG_Iran_groups
		change_unit_type = EDG_Iran_groups
	}
}
custom_button = {
	name = EDG_SHY_tech_icon
	tooltip = EDG_SHY_tech_icon.tt
	potential = { }
	trigger = { }
	effect = { }
	frame = {
		number = 1
		trigger = {
			technology_group = nomad_group
		}
	}
	frame = {
		number = 2
		trigger = {
			technology_group = EDG_Maghreb_groups
		}
	}
	frame = {
		number = 3
		trigger = {
			technology_group = chinese
		}
	}
	frame = {
		number = 4
		trigger = {
			technology_group = indian
		}
	}
	frame = {
		number = 5
		trigger = {
			technology_group = muslim
		}
	}
	frame = {
		number = 6
		trigger = {
			technology_group = ottoman
		}
	}
	frame = {
		number = 7
		trigger = {
			technology_group = western
		}
	}
	frame = {
		number = 8
		trigger = {
			technology_group = eastern
		}
	}
	frame = {
		number = 9
		trigger = {
			technology_group = EDG_Iran_groups
		}
	}
}


custom_window = {
	name = EDG_SHY_mil_custom_main_window
	potential = {
		has_country_flag = EDG_SHY_enable_custom_mil_window_flag
	}
}
custom_icon = {
	name = EDG_SHY_mil_custom_main_window_bg
	potential = {
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_1
	tooltip = EDG_SHY_mil_custom_equipment_button_1_tooltip
	potential = { }
	trigger = {}
	effect = {
		hidden_effect = {
			if = {
				limit = { 
					has_country_flag = EDG_SHY_open_equipment_button_1_flag
					has_country_flag = EDG_SHY_open_expand_window_flag
				}
				clr_country_flag = EDG_SHY_open_expand_window_flag
			}
			else = {
				set_country_flag = EDG_SHY_open_expand_window_flag
			}
			set_country_flag = EDG_SHY_open_equipment_button_1_flag
			clr_country_flag = EDG_SHY_open_equipment_button_2_flag
			clr_country_flag = EDG_SHY_open_equipment_button_3_flag
			clr_country_flag = EDG_SHY_open_equipment_button_4_flag
		}
	}
	frame = {
		number = 1
		trigger = {
			check_variable = {
				which = EDG_SHY_custom_mil_armor_index
				value = 1
			}
			NOT = {
				check_variable = {
					which = EDG_SHY_custom_mil_armor_index
					value = 2
				}
			}
		}
	}
	frame = {
		number = 2
		trigger = {
			check_variable = {
				which = EDG_SHY_custom_mil_armor_index
				value = 2
			}
			NOT = {
				check_variable = {
					which = EDG_SHY_custom_mil_armor_index
					value = 3
				}
			}
		}
	}
	frame = {
		number = 3
		trigger = {
			check_variable = {
				which = EDG_SHY_custom_mil_armor_index
				value = 3
			}
			NOT = {
				check_variable = {
					which = EDG_SHY_custom_mil_armor_index
					value = 4
				}
			}
		}
	}
}

custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_2
	tooltip = EDG_SHY_mil_custom_equipment_button_2_tooltip
	potential = { }
	trigger = {}
	effect = {
		hidden_effect = {
			if = {
				limit = { 
					has_country_flag = EDG_SHY_open_equipment_button_2_flag
					has_country_flag = EDG_SHY_open_expand_window_flag
				}
				clr_country_flag = EDG_SHY_open_expand_window_flag
			}
			else = {
				set_country_flag = EDG_SHY_open_expand_window_flag
			}
			clr_country_flag = EDG_SHY_open_equipment_button_1_flag
			set_country_flag = EDG_SHY_open_equipment_button_2_flag
			clr_country_flag = EDG_SHY_open_equipment_button_3_flag
			clr_country_flag = EDG_SHY_open_equipment_button_4_flag
		}
	}
	frame = {
		number = 1
		trigger = {
			check_variable = {
				which = EDG_SHY_custom_mil_mount_index
				value = 1
			}
			NOT = {
				check_variable = {
					which = EDG_SHY_custom_mil_mount_index
					value = 2
				}
			}
		}
	}
	frame = {
		number = 2
		trigger = {
			check_variable = {
				which = EDG_SHY_custom_mil_mount_index
				value = 2
			}
			NOT = {
				check_variable = {
					which = EDG_SHY_custom_mil_mount_index
					value = 3
				}
			}
		}
	}
	frame = {
		number = 3
		trigger = {
			check_variable = {
				which = EDG_SHY_custom_mil_mount_index
				value = 3
			}
			NOT = {
				check_variable = {
					which = EDG_SHY_custom_mil_mount_index
					value = 4
				}
			}
		}
	}
	frame = {
		number = 4
		trigger = {
			check_variable = {
				which = EDG_SHY_custom_mil_mount_index
				value = 4
			}
			NOT = {
				check_variable = {
					which = EDG_SHY_custom_mil_mount_index
					value = 5
				}
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_3
	tooltip = EDG_SHY_mil_custom_equipment_button_3_tooltip
	potential = { }
	trigger = {}
	effect = {
		hidden_effect = {
			if = {
				limit = { 
					has_country_flag = EDG_SHY_open_equipment_button_3_flag
					has_country_flag = EDG_SHY_open_expand_window_flag
				}
				clr_country_flag = EDG_SHY_open_expand_window_flag
			}
			else = {
				set_country_flag = EDG_SHY_open_expand_window_flag
			}
			clr_country_flag = EDG_SHY_open_equipment_button_1_flag
			clr_country_flag = EDG_SHY_open_equipment_button_2_flag
			set_country_flag = EDG_SHY_open_equipment_button_3_flag
			clr_country_flag = EDG_SHY_open_equipment_button_4_flag
		}
	}
	frame = {
		number = 1
		trigger = {
			check_variable = {
				which = EDG_SHY_custom_mil_weapon_index
				value = 1
			}
			NOT = {
				check_variable = {
					which = EDG_SHY_custom_mil_weapon_index
					value = 2
				}
			}
		}
	}
	frame = {
		number = 2
		trigger = {
			check_variable = {
				which = EDG_SHY_custom_mil_weapon_index
				value = 2
			}
			NOT = {
				check_variable = {
					which = EDG_SHY_custom_mil_weapon_index
					value = 3
				}
			}
		}
	}
	frame = {
		number = 3
		trigger = {
			check_variable = {
				which = EDG_SHY_custom_mil_weapon_index
				value = 3
			}
			NOT = {
				check_variable = {
					which = EDG_SHY_custom_mil_weapon_index
					value = 4
				}
			}
		}
	}
	frame = {
		number = 4
		trigger = {
			check_variable = {
				which = EDG_SHY_custom_mil_weapon_index
				value = 4
			}
			NOT = {
				check_variable = {
					which = EDG_SHY_custom_mil_weapon_index
					value = 5
				}
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_4
	tooltip = EDG_SHY_mil_custom_equipment_button_4_tooltip
	potential = { }
	trigger = {
	}
	effect = {
		hidden_effect = {
			if = {
				limit = { 
					has_country_flag = EDG_SHY_open_equipment_button_4_flag
					has_country_flag = EDG_SHY_open_expand_window_flag
				}
				clr_country_flag = EDG_SHY_open_expand_window_flag
			}
			else = {
				set_country_flag = EDG_SHY_open_expand_window_flag
			}
			clr_country_flag = EDG_SHY_open_equipment_button_1_flag
			clr_country_flag = EDG_SHY_open_equipment_button_2_flag
			clr_country_flag = EDG_SHY_open_equipment_button_3_flag
			set_country_flag = EDG_SHY_open_equipment_button_4_flag
		}
	}
	frame = {
		number = 1
		trigger = {
			check_variable = {
				which = EDG_SHY_custom_mil_minor_weapon_index
				value = 1
			}
			NOT = {
				check_variable = {
					which = EDG_SHY_custom_mil_minor_weapon_index
					value = 2
				}
			}
		}
	}
	frame = {
		number = 2
		trigger = {
			check_variable = {
				which = EDG_SHY_custom_mil_minor_weapon_index
				value = 2
			}
			NOT = {
				check_variable = {
					which = EDG_SHY_custom_mil_minor_weapon_index
					value = 3
				}
			}
		}
	}
	frame = {
		number = 3
		trigger = {
			check_variable = {
				which = EDG_SHY_custom_mil_minor_weapon_index
				value = 3
			}
			NOT = {
				check_variable = {
					which = EDG_SHY_custom_mil_minor_weapon_index
					value = 4
				}
			}
		}
	}
	frame = {
		number = 4
		trigger = {
			check_variable = {
				which = EDG_SHY_custom_mil_minor_weapon_index
				value = 4
			}
			NOT = {
				check_variable = {
					which = EDG_SHY_custom_mil_minor_weapon_index
					value = 5
				}
			}
		}
	}
}
custom_window = {
	name = EDG_SHY_mil_custom_expand_window
	potential = {
		has_country_flag = EDG_SHY_open_expand_window_flag
	}
}
custom_icon = {
	name = EDG_SHY_mil_custom_expand_window_bg
	potential = {
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_1_slot_1
	tooltip = EDG_SHY_mil_custom_equipment_button_1_slot_1_tooltip
	potential = {
		has_country_flag = EDG_SHY_open_equipment_button_1_flag
	}
	trigger = { }
	effect = {
		if = {
			limit = { 
				has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_armor_modifer_1_1_flag
			}
			add_country_modifier = {
				name = EDG_SHY_armor_modifier_1_1
				duration = -1
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_armor_modifer_1_2_flag
			}
			add_country_modifier = {
				name = EDG_SHY_armor_modifier_1_2
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = EDG_SHY_armor_modifier_1
				duration = -1
			}
		}
		hidden_effect = {
			remove_country_modifier = EDG_SHY_armor_modifier_2
			remove_country_modifier = EDG_SHY_armor_modifier_2_1
			remove_country_modifier = EDG_SHY_armor_modifier_2_2
			remove_country_modifier = EDG_SHY_armor_modifier_3
			remove_country_modifier = EDG_SHY_armor_modifier_3_1
			remove_country_modifier = EDG_SHY_armor_modifier_3_2
			if = {
				limit = { 
					has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_armor_modifer_1_1_flag
				}
				remove_country_modifier = EDG_SHY_armor_modifier_1
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_armor_modifer_1_2_flag
				}
				remove_country_modifier = EDG_SHY_armor_modifier_1
				remove_country_modifier = EDG_SHY_armor_modifier_1_1
			}
			set_variable = {
				which = EDG_SHY_custom_mil_armor_index
				value = 1
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_1_slot_2
	tooltip = EDG_SHY_mil_custom_equipment_button_1_slot_2_tooltip
	potential = {
		has_country_flag = EDG_SHY_open_equipment_button_1_flag
		has_country_flag = EDG_SHY_mil_custom_equipment_enable_armor_modifier_2_flag
	}
	trigger = { }
	effect = {
		if = {
			limit = { 
				has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_armor_modifer_2_1_flag
			}
			add_country_modifier = {
				name = EDG_SHY_armor_modifier_2_1
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = EDG_SHY_armor_modifier_2
				duration = -1
			}
		}
		hidden_effect = {
			remove_country_modifier = EDG_SHY_armor_modifier_1
			remove_country_modifier = EDG_SHY_armor_modifier_1_1
			remove_country_modifier = EDG_SHY_armor_modifier_1_2
			remove_country_modifier = EDG_SHY_armor_modifier_3
			remove_country_modifier = EDG_SHY_armor_modifier_3_1
			remove_country_modifier = EDG_SHY_armor_modifier_3_2
			if = {
				limit = { 
					has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_armor_modifer_2_1_flag
				}
				remove_country_modifier = EDG_SHY_armor_modifier_2
			}
			if = {
				limit = { 
					has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_armor_modifer_2_2_flag
				}
				remove_country_modifier = EDG_SHY_armor_modifier_2
				remove_country_modifier = EDG_SHY_armor_modifier_2_1
			}
			set_variable = {
				which = EDG_SHY_custom_mil_armor_index
				value = 2
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_1_slot_3
	tooltip = EDG_SHY_mil_custom_equipment_button_1_slot_3_tooltip
	potential = {
		has_country_flag = EDG_SHY_open_equipment_button_1_flag
		has_country_flag = EDG_SHY_mil_custom_equipment_enable_armor_modifier_3_flag
	}
	trigger = { }
	effect = {
		if = {
			limit = { 
				has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_armor_modifier_3_1_flag
			}
			add_country_modifier = {
				name = EDG_SHY_armor_modifier_3_1
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = EDG_SHY_armor_modifier_3
				duration = -1
			}
		}
		hidden_effect = {
			remove_country_modifier = EDG_SHY_armor_modifier_1
			remove_country_modifier = EDG_SHY_armor_modifier_1_1
			remove_country_modifier = EDG_SHY_armor_modifier_1_2
			remove_country_modifier = EDG_SHY_armor_modifier_2
			remove_country_modifier = EDG_SHY_armor_modifier_2_1
			remove_country_modifier = EDG_SHY_armor_modifier_2_2

			if = {
				limit = { 
					has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_armor_modifier_3_1_flag
				}
				remove_country_modifier = EDG_SHY_armor_modifier_3
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_armor_modifier_3_2_flag
				}
				remove_country_modifier = EDG_SHY_armor_modifier_3
				remove_country_modifier = EDG_SHY_armor_modifier_3_1
			}
			set_variable = {
				which = EDG_SHY_custom_mil_armor_index
				value = 3
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_2_slot_1
	tooltip = EDG_SHY_mil_custom_equipment_button_2_slot_1_tooltip
	potential = {
		has_country_flag = EDG_SHY_open_equipment_button_2_flag
	}
	trigger = { }
	effect = {
		if = {
			limit = { 
				has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_mount_modifier_1_1_flag
			}
			add_country_modifier = {
				name = EDG_SHY_mount_modifier_1_1
				duration = -1
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_mount_modifier_1_2_flag
			}
			add_country_modifier = {
				name = EDG_SHY_mount_modifier_1_2
				duration = -1
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_mount_modifier_1_3_flag
			}
			add_country_modifier = {
				name = EDG_SHY_mount_modifier_1_3
				duration = -1
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_mount_modifier_1_4_flag
			}
			add_country_modifier = {
				name = EDG_SHY_mount_modifier_1_4
				duration = -1
			}
		}
		else = {
			add_country_modifier = {
				name = EDG_SHY_mount_modifier_1
				duration = -1
			}
		}
		hidden_effect = {
			if = {
				limit = { 
					has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_mount_modifier_1_1_flag
					has_country_modifier = EDG_SHY_mount_modifier_1
				}
				remove_country_modifier = EDG_SHY_mount_modifier_1
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_mount_modifier_1_2_flag
					OR = {
						has_country_modifier = EDG_SHY_mount_modifier_1
						has_country_modifier = EDG_SHY_mount_modifier_1_1
					}
				}
				remove_country_modifier = EDG_SHY_mount_modifier_1
				remove_country_modifier = EDG_SHY_mount_modifier_1_1
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_mount_modifier_1_3_flag
					OR = {
						has_country_modifier = EDG_SHY_mount_modifier_1
						has_country_modifier = EDG_SHY_mount_modifier_1_1
						has_country_modifier = EDG_SHY_mount_modifier_1_2
					}
				}
				remove_country_modifier = EDG_SHY_mount_modifier_1
				remove_country_modifier = EDG_SHY_mount_modifier_1_1
				remove_country_modifier = EDG_SHY_mount_modifier_1_2
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_SHY_mil_custom_equipment_upgrade_mount_modifier_1_4_flag
					OR = {
						has_country_modifier = EDG_SHY_mount_modifier_1
						has_country_modifier = EDG_SHY_mount_modifier_1_1
						has_country_modifier = EDG_SHY_mount_modifier_1_2
						has_country_modifier = EDG_SHY_mount_modifier_1_3
					}
				}
				remove_country_modifier = EDG_SHY_mount_modifier_1
				remove_country_modifier = EDG_SHY_mount_modifier_1_1
				remove_country_modifier = EDG_SHY_mount_modifier_1_2
				remove_country_modifier = EDG_SHY_mount_modifier_1_3
			}
			else = {
				
			}
			remove_country_modifier = EDG_SHY_mount_modifier_2
			remove_country_modifier = EDG_SHY_mount_modifier_3
			remove_country_modifier = EDG_SHY_mount_modifier_4
			set_variable = {
				which = EDG_SHY_custom_mil_mount_index
				value = 1
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_2_slot_2
	tooltip = EDG_SHY_mil_custom_equipment_button_2_slot_2_tooltip
	potential = {
		has_country_flag = EDG_SHY_open_equipment_button_2_flag
		has_country_flag = EDG_SHY_mil_custom_equipment_enable_mount_modifier_2_flag
	}
	trigger = { }
	effect = {
		add_country_modifier = {
			name = EDG_SHY_mount_modifier_2
			duration = -1
		}
		hidden_effect = {
			remove_country_modifier = EDG_SHY_mount_modifier_1
			remove_country_modifier = EDG_SHY_mount_modifier_1_1
			remove_country_modifier = EDG_SHY_mount_modifier_1_2
			remove_country_modifier = EDG_SHY_mount_modifier_1_3
			remove_country_modifier = EDG_SHY_mount_modifier_1_4
			remove_country_modifier = EDG_SHY_mount_modifier_3
			remove_country_modifier = EDG_SHY_mount_modifier_4
			set_variable = {
				which = EDG_SHY_custom_mil_mount_index
				value = 2
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_2_slot_3
	tooltip = EDG_SHY_mil_custom_equipment_button_2_slot_3_tooltip
	potential = {
		has_country_flag = EDG_SHY_open_equipment_button_2_flag
		has_country_flag = EDG_SHY_mil_custom_equipment_enable_mount_modifier_3_flag
	}
	trigger = { }
	effect = {
		add_country_modifier = {
			name = EDG_SHY_mount_modifier_3
			duration = -1
		}
		hidden_effect = {
			remove_country_modifier = EDG_SHY_mount_modifier_1
			remove_country_modifier = EDG_SHY_mount_modifier_1_1
			remove_country_modifier = EDG_SHY_mount_modifier_1_2
			remove_country_modifier = EDG_SHY_mount_modifier_1_3
			remove_country_modifier = EDG_SHY_mount_modifier_1_4
			remove_country_modifier = EDG_SHY_mount_modifier_2
			remove_country_modifier = EDG_SHY_mount_modifier_4
			set_variable = {
				which = EDG_SHY_custom_mil_mount_index
				value = 3
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_2_slot_4
	tooltip = EDG_SHY_mil_custom_equipment_button_2_slot_4_tooltip
	potential = {
		has_country_flag = EDG_SHY_open_equipment_button_2_flag
		has_country_flag = EDG_SHY_mil_custom_equipment_enable_mount_modifier_4_flag
	}
	trigger = { }
	effect = {
		add_country_modifier = {
			name = EDG_SHY_mount_modifier_4
			duration = -1
		}
		hidden_effect = {
			remove_country_modifier = EDG_SHY_mount_modifier_1
			remove_country_modifier = EDG_SHY_mount_modifier_1_1
			remove_country_modifier = EDG_SHY_mount_modifier_1_2
			remove_country_modifier = EDG_SHY_mount_modifier_1_3
			remove_country_modifier = EDG_SHY_mount_modifier_1_4
			remove_country_modifier = EDG_SHY_mount_modifier_2
			remove_country_modifier = EDG_SHY_mount_modifier_3
			set_variable = {
				which = EDG_SHY_custom_mil_mount_index
				value = 4
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_3_slot_1
	tooltip = EDG_SHY_mil_custom_equipment_button_3_slot_1_tooltip
	potential = {
		has_country_flag = EDG_SHY_open_equipment_button_3_flag
	}
	trigger = { }
	effect = {
		add_country_modifier = {
			name = EDG_SHY_weapon_modifier_1
			duration = -1
		}
		hidden_effect = {
			remove_country_modifier = EDG_SHY_weapon_modifier_2
			remove_country_modifier = EDG_SHY_weapon_modifier_3
			remove_country_modifier = EDG_SHY_weapon_modifier_4
			set_variable = {
				which = EDG_SHY_custom_mil_weapon_index
				value = 1
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_3_slot_2
	tooltip = EDG_SHY_mil_custom_equipment_button_3_slot_2_tooltip
	potential = {
		has_country_flag = EDG_SHY_open_equipment_button_3_flag
	}
	trigger = { }
	effect = {
		add_country_modifier = {
			name = EDG_SHY_weapon_modifier_2
			duration = -1
		}
		hidden_effect = {
			remove_country_modifier = EDG_SHY_weapon_modifier_1
			remove_country_modifier = EDG_SHY_weapon_modifier_3
			remove_country_modifier = EDG_SHY_weapon_modifier_4
			set_variable = {
				which = EDG_SHY_custom_mil_weapon_index
				value = 2
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_3_slot_3
	tooltip = EDG_SHY_mil_custom_equipment_button_3_slot_3_tooltip
	potential = {
		has_country_flag = EDG_SHY_open_equipment_button_3_flag
		has_country_flag = EDG_SHY_mil_custom_equipment_enable_weapon_modifier_3_flag
	}
	trigger = { }
	effect = {
		add_country_modifier = {
			name = EDG_SHY_weapon_modifier_3
			duration = -1
		}
		hidden_effect = {
			remove_country_modifier = EDG_SHY_weapon_modifier_1
			remove_country_modifier = EDG_SHY_weapon_modifier_2
			remove_country_modifier = EDG_SHY_weapon_modifier_4
			if = {
				limit = { 
					check_variable = {
						which = EDG_SHY_custom_mil_minor_weapon_index
						value = 1
					}
					NOT = {
						check_variable = {
							which = EDG_SHY_custom_mil_minor_weapon_index
							value = 2
						}
					}
				}
				set_variable = {
					which = EDG_SHY_custom_mil_minor_weapon_index
					value = 2
				}
				remove_country_modifier = EDG_SHY_minor_weapon_modifier_1
				add_country_modifier = {
					name = EDG_SHY_minor_weapon_modifier_2
					duration = -1
				}
			}
			set_variable = {
				which = EDG_SHY_custom_mil_weapon_index
				value = 3
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_3_slot_4
	tooltip = EDG_SHY_mil_custom_equipment_button_3_slot_4_tooltip
	potential = {
		has_country_flag = EDG_SHY_open_equipment_button_3_flag
		has_country_flag = EDG_SHY_mil_custom_equipment_enable_weapon_modifier_4_flag
	}
	trigger = { }
	effect = {
		add_country_modifier = {
			name = EDG_SHY_weapon_modifier_4
			duration = -1
		}
		hidden_effect = {
			remove_country_modifier = EDG_SHY_weapon_modifier_1
			remove_country_modifier = EDG_SHY_weapon_modifier_2
			remove_country_modifier = EDG_SHY_weapon_modifier_3
			if = {
				limit = { 
					check_variable = {
						which = EDG_SHY_custom_mil_minor_weapon_index
						value = 1
					}
					NOT = {
						check_variable = {
							which = EDG_SHY_custom_mil_minor_weapon_index
							value = 2
						}
					}
				}
				set_variable = {
					which = EDG_SHY_custom_mil_minor_weapon_index
					value = 2
				}
				remove_country_modifier = EDG_SHY_minor_weapon_modifier_1
				add_country_modifier = {
					name = EDG_SHY_minor_weapon_modifier_2
					duration = -1
				}
			}
			if = {
				limit = { 
					check_variable = {
						which = EDG_SHY_custom_mil_minor_weapon_index
						value = 3
					}
					NOT = {
						check_variable = {
							which = EDG_SHY_custom_mil_minor_weapon_index
							value = 4
						}
					}
				}
				set_variable = {
					which = EDG_SHY_custom_mil_minor_weapon_index
					value = 2
				}
				remove_country_modifier = EDG_SHY_minor_weapon_modifier_3
				add_country_modifier = {
					name = EDG_SHY_minor_weapon_modifier_2
					duration = -1
				}
			}
			# if = {
			# 	limit = { 
			# 		check_variable = {
			# 			which = EDG_SHY_custom_mil_minor_weapon_index
			# 			value = 4
			# 		}
			# 		NOT = {
			# 			check_variable = {
			# 				which = EDG_SHY_custom_mil_minor_weapon_index
			# 				value = 5
			# 			}
			# 		}
			# 	}
			# 	set_variable = {
			# 		which = EDG_SHY_custom_mil_minor_weapon_index
			# 		value = 2
			# 	}
			# 	remove_country_modifier = EDG_SHY_minor_weapon_modifier_4
			# 	add_country_modifier = {
			# 		name = EDG_SHY_minor_weapon_modifier_2
			# 		duration = -1
			# 	}
			# }
			set_variable = {
				which = EDG_SHY_custom_mil_weapon_index
				value = 4
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_4_slot_1
	tooltip = EDG_SHY_mil_custom_equipment_button_4_slot_1_tooltip
	potential = {
		has_country_flag = EDG_SHY_open_equipment_button_4_flag
	}
	trigger = {
		if = {
			limit = { 
				check_variable = {
					which = EDG_SHY_custom_mil_weapon_index
					value = 3
				}
				NOT = {
					check_variable = {
						which = EDG_SHY_custom_mil_weapon_index
						value = 4
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = EDG_SHY_mil_custom_equipment_button_4_slot_1.trigger_1.tt
				always = no
			}
		}
		if = {
			limit = { 
				check_variable = {
					which = EDG_SHY_custom_mil_weapon_index
					value = 4
				}
				NOT = {
					check_variable = {
						which = EDG_SHY_custom_mil_weapon_index
						value = 5
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = EDG_SHY_mil_custom_equipment_button_4_slot_1.trigger_2.tt
				always = no
			}
		}
		
	}
	effect = {
		add_country_modifier = {
			name = EDG_SHY_minor_weapon_modifier_1
			duration = -1
		}
		hidden_effect = {
			remove_country_modifier = EDG_SHY_minor_weapon_modifier_2
			remove_country_modifier = EDG_SHY_minor_weapon_modifier_3
			remove_country_modifier = EDG_SHY_minor_weapon_modifier_4
			set_variable = {
				which = EDG_SHY_custom_mil_minor_weapon_index
				value = 1
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_4_slot_2
	tooltip = EDG_SHY_mil_custom_equipment_button_4_slot_2_tooltip
	potential = {
		has_country_flag = EDG_SHY_open_equipment_button_4_flag
	}
	trigger = { }
	effect = {
		add_country_modifier = {
			name = EDG_SHY_minor_weapon_modifier_2
			duration = -1
		}
		hidden_effect = {
			remove_country_modifier = EDG_SHY_minor_weapon_modifier_1
			remove_country_modifier = EDG_SHY_minor_weapon_modifier_3
			remove_country_modifier = EDG_SHY_minor_weapon_modifier_4
			set_variable = {
				which = EDG_SHY_custom_mil_minor_weapon_index
				value = 2
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_4_slot_3
	tooltip = EDG_SHY_mil_custom_equipment_button_4_slot_3_tooltip
	potential = {
		has_country_flag = EDG_SHY_open_equipment_button_4_flag
	}
	trigger = {
		if = {
			limit = { 
				check_variable = {
					which = EDG_SHY_custom_mil_weapon_index
					value = 4
				}
				NOT = {
					check_variable = {
						which = EDG_SHY_custom_mil_weapon_index
						value = 5
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = EDG_SHY_mil_custom_equipment_button_4_slot_3.trigger_1.tt
				always = no
			}
		}
		
	}
	effect = {
		add_country_modifier = {
			name = EDG_SHY_minor_weapon_modifier_3
			duration = -1
		}
		hidden_effect = {
			remove_country_modifier = EDG_SHY_minor_weapon_modifier_1
			remove_country_modifier = EDG_SHY_minor_weapon_modifier_2
			remove_country_modifier = EDG_SHY_minor_weapon_modifier_4
			set_variable = {
				which = EDG_SHY_custom_mil_minor_weapon_index
				value = 3
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_mil_custom_equipment_button_4_slot_4
	tooltip = EDG_SHY_mil_custom_equipment_button_4_slot_4_tooltip
	potential = {
		has_country_flag = EDG_SHY_open_equipment_button_4_flag
		has_country_flag = EDG_SHY_mil_custom_equipment_enable_weapon_modifier_4_flag
	}
	trigger = {
		# custom_trigger_tooltip = {
		# 	tooltip = EDG_SHY_mil_custom_equipment_button_4_slot_4.trigger_1.tt
		# 	if = {
		# 		limit = { 
		# 			check_variable = {
		# 				which = EDG_SHY_custom_mil_weapon_index
		# 				value = 4
		# 			}
		# 			NOT = {
		# 				check_variable = {
		# 					which = EDG_SHY_custom_mil_weapon_index
		# 					value = 5
		# 				}
		# 			}
		# 		}
		# 		always = no
		# 	}
		# }
	}
	effect = {
		add_country_modifier = {
			name = EDG_SHY_minor_weapon_modifier_4
			duration = -1
		}
		hidden_effect = {
			remove_country_modifier = EDG_SHY_minor_weapon_modifier_1
			remove_country_modifier = EDG_SHY_minor_weapon_modifier_2
			remove_country_modifier = EDG_SHY_minor_weapon_modifier_3
			set_variable = {
				which = EDG_SHY_custom_mil_minor_weapon_index
				value = 4
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_raze_all_possible_province
	tooltip = EDG_SHY_raze_all_possible_province.tt
	potential = {
		has_country_flag = EDG_SHY_enable_raze_all_possible_province_flag
	}
	trigger = {
		if = {
			limit = { 
				NOT = {
					has_country_flag = EDG_SHY_enable_raze_button_flag
				}
			}
			custom_trigger_tooltip = {
				tooltip = EDG_SHY_raze_all_possible_province.trigger_1.tt
				any_owned_province = {
					AND = {
						NOT = {
							is_core = owner
						}
						NOT = {
							has_province_modifier = province_razed
						}
					}
				}
			}
		}
		else = {
			OR = {
				custom_trigger_tooltip = {
					tooltip = EDG_SHY_raze_all_possible_province.trigger_1.tt
					any_owned_province = {
						AND = {
							NOT = {
								is_core = owner
							}
							NOT = {
								has_province_modifier = province_razed
							}
						}
					}
				}
				custom_trigger_tooltip = {
					tooltip = EDG_SHY_raze_all_possible_province.trigger_2.tt
					any_province = {
						controlled_by = from
						NOT = {
							owned_by = from
						}
						NOT = {
							has_province_modifier = province_razed
						}
					}
				}
			}
		}
		
	}
	effect = {
		custom_tooltip = EDG_SHY_raze_all_possible_province.effect.tt
		hidden_effect = {
			every_owned_province = {
				limit = {
					development = 4
					NOT = {
						has_province_modifier = province_razed
					}
					NOT = {
						is_core = root
					}
				}
				EDG_auto_raze_province = {
					remove_loot = yes
					raze = yes	
				}
			}
			if = {
				limit = { 
					has_country_flag = EDG_SHY_enable_raze_button_flag
				}
				every_province = {
					limit = {
						NOT = {
							owned_by = root
						}
						controlled_by = root
						NOT = {
							has_province_modifier = province_razed
						}
						development = 3
					}
					add_devastation = 10
					set_variable = { EDG_local_develpment = 0 }
					set_variable = { EDG_local_base_tax = 0 }
					set_variable = { EDG_local_base_production = 0 }
					set_variable = { EDG_local_base_manpower = 0 }
					export_to_variable = {
						which = EDG_local_develpment
						value = trigger_value:development
					}
					set_variable = {
						which = EDG_local_develpment_copy
						which = EDG_local_develpment
					}
					divide_variable = {
						which = EDG_local_develpment_copy
						value = 2
					}
					while = {
						limit = { 
							check_variable = {
								which = EDG_local_develpment_copy
								value = 1
							}
						}
						subtract_variable = {
							which = EDG_local_develpment_copy
							value = 1
						}
						from = {
							add_tribal_allegiance = 1
						}
					}
					change_variable = {
						which = EDG_local_develpment
						value = 3
					}
					divide_variable = {
						which = EDG_local_develpment
						value = 3
					}
					while = {
						limit = {
							check_variable = {
								which = EDG_local_develpment
								value = 1
							}
						}
						subtract_variable = {
							which = EDG_local_develpment
							value = 1
						}
						root = {
							add_treasury = 5
						}
					}
					
					export_to_variable = {
						which = EDG_local_base_tax
						value = trigger_value:base_tax
					}
					export_to_variable = {
						which = EDG_local_base_production
						value = trigger_value:base_production
					}
					export_to_variable = {
						which = EDG_local_base_manpower
						value = trigger_value:base_manpower
					}
					if = {
						limit = { 
							check_variable = {
								which = EDG_local_base_tax
								value = 2
							}
						}
						change_variable = {
							which = EDG_local_base_tax
							value = 1
						}
						divide_variable = {
							which = EDG_local_base_tax
							value = 3
						}
						while = {
							limit = { 
								check_variable = {
									which = EDG_local_base_tax
									value = 1
								}
							}
							add_base_tax = -1
							subtract_variable = {
								which = EDG_local_base_tax
								value = 1
							}
							from = {
								add_adm_power = 25
							}
						}
					}
					if = {
						limit = { 
							check_variable = {
								which = EDG_local_base_production
								value = 2
							}
						}
						change_variable = {
							which = EDG_local_base_production
							value = 1
						}
						divide_variable = {
							which = EDG_local_base_production
							value = 3
						}
						while = {
							limit = { 
								check_variable = {
									which = EDG_local_base_production
									value = 1
								}
							}
							add_base_tax = -1
							subtract_variable = {
								which = EDG_local_base_production
								value = 1
							}
							from = {
								add_dip_power = 25
							}
						}
					}
					if = {
						limit = { 
							check_variable = {
								which = EDG_local_base_manpower
								value = 2
							}
						}
						change_variable = {
							which = EDG_local_base_manpower
							value = 1
						}
						divide_variable = {
							which = EDG_local_base_manpower
							value = 3
						}
						while = {
							limit = { 
								check_variable = {
									which = EDG_local_base_manpower
									value = 1
								}
							}
							add_base_tax = -1
							subtract_variable = {
								which = EDG_local_base_manpower
								value = 1
							}
							from = {
								add_dip_power = 25
							}
						}
					}
					
					add_permanent_province_modifier = {
						name = province_razed
						duration = 7300
					}
					if = {
						limit = {
							owner = {
								has_country_flag = EDG_SHY_enable_raze_get_core_flag
							}
						}
						add_territorial_core = owner
					}
				}
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_raze_button
	tooltip = EDG_SHY_raze_button_tooltip
	potential = {
		from = {
			has_country_flag = EDG_SHY_enable_raze_button_flag
		}
		OR = {
			AND = {
				NOT = {
					owned_by = from
				}
				owner = {
					NOT = {
						is_subject_of = root
					}
				}
			}
			AND = {
				owner = {
					is_subject = yes
					is_subject_of = from
					is_subject_of_type = vassal
				}
			}
			AND = {
				NOT = {
					has_province_modifier = province_razed
				}
				owned_by = from
			}
		}
	}
	trigger = {
		development = 4
		NOT = {
			has_province_modifier = province_razed
		}
		if = {
			limit = { 
				owner = {
					is_subject = yes
					is_subject_of = from
				}
			}
			owner = {
				NOT = {
					liberty_desire = 50
				}
			}
			controlled_by = owner
		}
		else = {
			controlled_by = from
		}
		
	}
	effect = {
		custom_tooltip = EDG_SHY_raze_button.effect.tt
		if = {
			limit = { 
				owner = {
					is_subject = yes
				}
			}
			custom_tooltip = EDG_SHY_raze_button.subject_effect.tt
		}
		add_devastation = 10
		add_permanent_province_modifier = {
			name = province_razed
			duration = 3650
		}
		
		hidden_effect = {
			from = {
				# set_variable = { EDG_base_raze_power = 0 }
				# export_to_variable = {
				# 	which = EDG_base_raze_power
				# 	value = modifier:raze_power_gain
				# }
				# change_variable = {
				# 	which = EDG_base_raze_power
				# 	value = 1
				# }
				# prev = {
				# 	set_variable = {
				# 		which = EDG_base_raze_power
				# 		value = prev
				# 	}
				# }
				# set_variable = {
				# 	which = EDG_mil_tech_level
				# 	value = 0
				# }
				# export_to_variable = {
				# 	which = EDG_mil_tech_level
				# 	value = trigger_value:mil_tech
				# }
				# if = {
				# 	limit = { 
				# 		check_variable = {
				# 			which = EDG_mil_tech_level
				# 			value = 23
				# 		}
				# 	}
				# 	set_variable = {
				# 		which = EDG_mil_tech_level
				# 		value = 23
				# 	}
				# }
				# multiply_variable = {
				# 	which = EDG_mil_tech_level
				# 	value = -1
				# }
				# change_variable = {
				# 	which = EDG_mil_tech_level
				# 	value = 28
				# }
			}
			set_variable = { EDG_local_develpment = 0 }
			set_variable = { EDG_local_base_tax = 0 }
			set_variable = { EDG_local_base_production = 0 }
			set_variable = { EDG_local_base_manpower = 0 }
			export_to_variable = {
				which = EDG_local_develpment
				value = trigger_value:development
			}
			set_variable = {
				which = EDG_local_develpment_copy
				which = EDG_local_develpment
			}
			divide_variable = {
				which = EDG_local_develpment_copy
				value = 2
			}
			while = {
				limit = { 
					check_variable = {
						which = EDG_local_develpment_copy
						value = 1
					}
				}
				subtract_variable = {
					which = EDG_local_develpment_copy
					value = 1
				}
				from = {
					add_tribal_allegiance = 1
				}
				if = {
					limit = { 
						owner = {
							is_subject = yes
						}
					}
					owner = {
						add_liberty_desire = 5
					}
				}
			}
			change_variable = {
				which = EDG_local_develpment
				value = 3
			}
			divide_variable = {
				which = EDG_local_develpment
				value = 3
			}
			while = {
				limit = {
					check_variable = {
						which = EDG_local_develpment
						value = 1
					}
				}
				subtract_variable = {
					which = EDG_local_develpment
					value = 1
				}
				from = {
					add_treasury = 5
				}
			}
			
			export_to_variable = {
				which = EDG_local_base_tax
				value = trigger_value:base_tax
			}
			export_to_variable = {
				which = EDG_local_base_production
				value = trigger_value:base_production
			}
			export_to_variable = {
				which = EDG_local_base_manpower
				value = trigger_value:base_manpower
			}
			if = {
				limit = { 
					check_variable = {
						which = EDG_local_base_tax
						value = 2
					}
				}
				change_variable = {
					which = EDG_local_base_tax
					value = 1
				}
				divide_variable = {
					which = EDG_local_base_tax
					value = 3
				}
				# multiply_variable = {
				# 	which = EDG_local_base_tax
				# 	value = 25
				# }
				# multiply_variable = {
				# 	which = EDG_local_base_tax
				# 	which = EDG_base_raze_power
				# }
				while = {
					limit = { 
						check_variable = {
							which = EDG_local_base_tax
							value = 1
						}
					}
					add_base_tax = -1
					subtract_variable = {
						which = EDG_local_base_tax
						value = 1
					}
					from = {
						add_adm_power = 25
					}
				}
			}
			if = {
				limit = { 
					check_variable = {
						which = EDG_local_base_production
						value = 2
					}
				}
				change_variable = {
					which = EDG_local_base_production
					value = 1
				}
				divide_variable = {
					which = EDG_local_base_production
					value = 3
				}
				# multiply_variable = {
				# 	which = EDG_local_base_production
				# 	value = 25
				# }
				# multiply_variable = {
				# 	which = EDG_local_base_production
				# 	which = EDG_base_raze_power
				# }
				while = {
					limit = { 
						check_variable = {
							which = EDG_local_base_production
							value = 1
						}
					}
					add_base_tax = -1
					subtract_variable = {
						which = EDG_local_base_production
						value = 1
					}
					from = {
						add_dip_power = 25
					}
				}
			}
			if = {
				limit = { 
					check_variable = {
						which = EDG_local_base_manpower
						value = 2
					}
				}
				change_variable = {
					which = EDG_local_base_manpower
					value = 1
				}
				divide_variable = {
					which = EDG_local_base_manpower
					value = 3
				}
				# multiply_variable = {
				# 	which = EDG_local_base_manpower
				# 	value = 25
				# }
				# multiply_variable = {
				# 	which = EDG_local_base_manpower
				# 	which = EDG_base_raze_power
				# }
				while = {
					limit = { 
						check_variable = {
							which = EDG_local_base_manpower
							value = 1
						}
					}
					add_base_tax = -1
					subtract_variable = {
						which = EDG_local_base_manpower
						value = 1
					}
					from = {
						add_mil_power = 25
					}
				}
			}
			if = {
				limit = {
					owner = {
						has_country_flag = EDG_SHY_enable_raze_get_core_flag
					}
				}
				add_territorial_core = from
			}
		}
	}
}
custom_button = {
	name = EDG_SHY_station_farm
	tooltip = EDG_SHY_station_farm.tt
	potential = {
		is_core = from
		owned_by = from
		from = {
			has_country_flag = EDG_SHY_enable_station_farm_flag
		}
	}
	trigger = {
		from = {
			adm_power_cost = 50
			dip_power_cost = 50
			mil_power_cost = 50
		}
		NOT = {
			has_province_modifier = province_razed
		}
		NOT = {
			has_province_modifier = EDG_SHY_agricultural_development
		}
		if = {
			limit = { 
				OR = {
					has_terrain = savannah
					has_terrain = grasslands
					has_terrain = steppe
				}
			}
			NOT = {
				development = 20
			}
		}
		else_if = {
			limit = {
				OR = {
					has_terrain = mountain
					has_terrain = hills
					has_terrain = highlands
					has_terrain = woods
					has_terrain = forest
					has_terrain = jungle
				}
			}
			NOT = {
				development = 15
			}
		}
		else_if = {
			limit = {
				OR = {
					has_terrain = desert
					has_terrain = coastal_desert
				}
			}
			NOT = {
				development = 10
			}
		}
		else_if = {
			limit = { 
				has_terrain = farmlands
			}
			NOT = {
				development = 30
			}
		}
		else = {
			custom_trigger_tooltip = {
				tooltip = EDG_SHY_station_farm.trigger.tt
				always = no
			}
		}
		num_of_units_in_province = {
			who = from
			amount = 1
		}
	}
	effect = {
		custom_tooltip = EDG_SHY_station_farm.effect.tt
		if = {
			limit = { 
				from = {
					has_country_flag = EDG_SHY_station_farm_remove_core_flag
				}
			}
			custom_tooltip = EDG_SHY_station_farm_remove_core.tt
			add_local_autonomy = -10
			hidden_effect = {
				every_core_country = {
					limit = {
						NOT = {
							tag = from
						}
					}
					remove_core = prev
				}
			}
		}
		add_permanent_province_modifier = {
			name = EDG_SHY_agricultural_development
			duration = 3650
		}
		if = {
			limit = { 
				from = {
					has_country_flag = EDG_SHY_station_farm_reduce_unrest_flag
				}
			}
			add_unrest = -5
		}
		
		hidden_effect = {
			from = {
				change_variable = {
					which = EDG_SHY_station_farm_count
					value = 1
				}
			}
			while = {
				limit = { 
					num_of_units_in_province = {
						who = from
						amount = 1
					}
					if = {
						limit = { 
							OR = {
								has_terrain = savannah
								has_terrain = grasslands
								has_terrain = steppe
							}
						}
						NOT = {
							development = 20
						}
					}
					else_if = {
						limit = {
							OR = {
								has_terrain = mountain
								has_terrain = hills
								has_terrain = highlands
								has_terrain = woods
								has_terrain = forest
								has_terrain = jungle
							}
						}
						NOT = {
							development = 15
						}
					}
					else_if = {
						limit = {
							OR = {
								has_terrain = desert
								has_terrain = coastal_desert
							}
						}
						NOT = {
							development = 10
						}
					}
					else_if = {
						limit = { 
							has_terrain = farmlands
						}
						NOT = {
							development = 30
						}
					}
				}
				kill_units = {
					who = owner
					amount = 1
				}
				random_list = {
					1 = {
						add_base_tax = 1
					}
					1 = {
						add_base_production = 1
					}
					1 = {
						add_base_manpower = 1
					}
				}
			}
		}
	}
}