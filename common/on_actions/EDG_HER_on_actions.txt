on_startup = {
	if = {
		limit = {
			dominant_culture = EDG_culture_mercia
		}
		country_event = {
			id = EDG_HER_flavor_event.1
		}
	}
}

on_province_religion_converted = {
	on_province_religion_changed_effect = yes
	on_province_religion_converted_effect = yes
	if = {
		limit = {
			has_province_modifier = EDG_HER_Lollards_modifier
		}
		remove_province_modifier = EDG_HER_Lollards_modifier
		add_province_modifier = {
			name = EDG_HER_Lollards_2_modifier
			duration = -1
		}
		random_province = {
			limit = {
				owned_by = root
				religion = root
				NOT = {
					has_province_modifier = EDG_HER_Lollards_2_modifier
				}
			}
			add_province_modifier = {
				name = EDG_HER_Lollards_2_modifier
				duration = -1
			}
		}
		change_government_reform_progress = 1
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_CWN_mission_2_event_flag
			}
		}
		add_province_modifier = {
			name = EDG_HER_Lollards_2_modifier
			duration = -1
		}
		random_province = {
			limit = {
				owned_by = root
				religion = root
				NOT = {
					has_province_modifier = EDG_HER_Lollards_2_modifier
				}
			}
			add_province_modifier = {
				name = EDG_HER_Lollards_2_modifier
				duration = -1
			}
		}
		change_government_reform_progress = 1
	}
}

on_expanded_infrastructure = {
	if = {
		limit = {
			trade_goods = livestock
			owner = {
				has_country_flag = EDG_CWN_3_11_flag
			}
			NOT = {
				has_province_modifier = EDG_IRE_dairy_factory
			}
		}
		add_province_modifier = {
			name = EDG_IRE_dairy_factory
			duration = -1
		}
	}
	if = {
		limit = {
			trade_goods = grain
			owner = {
				has_country_flag = EDG_CWN_3_11_flag
			}
			NOT = {
				has_province_modifier = EDG_IRE_encourage_agriculture
			}
		}
		add_province_modifier = {
			name = EDG_IRE_encourage_agriculture
			duration = -1
		}
	}
}

on_expanded_infrastructure_removed = {
}

on_adm_development = {
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_CWN_2_14_flag
			}
		}
		owner = {
			add_government_power = {
				mechanic_type = EDG_HER_making_peace
				power_type = EDG_HER_making_peace_power
				value = 1
			}
		}
	}
	if = {
		limit = {
			has_province_modifier = EDG_HER_2_2_modifier
			owner = {
				has_country_flag = EDG_CWN_4_7_flag
				NOT = {
					check_variable = {
						which = EDG_CWN_gangkoucheng_var
						value = 4
					}
				}
			}
		}
		owner = {
			change_variable = {
				which = EDG_CWN_gangkoucheng_var
				value = 1
			}
		}
	}
	if = {
		limit = {
			has_province_modifier = EDG_HER_2_2_modifier
			owner = {
				has_country_flag = EDG_CWN_4_7_flag
				check_variable = {
					which = EDG_CWN_gangkoucheng_var
					value = 4
				}
			}
		}
		owner = {
			change_variable = {
				which = EDG_CWN_gangkoucheng_var
				value = -4
			}
		}
		add_province_modifier = {
			name = "hanseatic_shipwrights_modifier"
			duration = -1
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_CWN_5_11_flag
			}
			has_terrain = woods
		}
		random = {
			add_random_development = 1
			chance = 25
		}
	}
}

on_dip_development = {
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_CWN_2_14_flag
			}
		}
		owner = {
			add_government_power = {
				mechanic_type = EDG_HER_making_peace
				power_type = EDG_HER_making_peace_power
				value = 1
			}
		}
	}
	if = {
		limit = {
			has_province_modifier = EDG_HER_2_2_modifier
			owner = {
				has_country_flag = EDG_CWN_4_7_flag
				NOT = {
					check_variable = {
						which = EDG_CWN_gangkoucheng_var
						value = 4
					}
				}
			}
		}
		owner = {
			change_variable = {
				which = EDG_CWN_gangkoucheng_var
				value = 1
			}
		}
	}
	if = {
		limit = {
			has_province_modifier = EDG_HER_2_2_modifier
			owner = {
				has_country_flag = EDG_CWN_4_7_flag
				check_variable = {
					which = EDG_CWN_gangkoucheng_var
					value = 4
				}
			}
		}
		owner = {
			change_variable = {
				which = EDG_CWN_gangkoucheng_var
				value = -4
			}
		}
		add_province_modifier = {
			name = "hanseatic_shipwrights_modifier"
			duration = -1
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_CWN_5_11_flag
			}
			has_terrain = woods
		}
		random = {
			add_random_development = 1
			chance = 25
		}
	}
}

on_mil_development = {
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_CWN_2_14_flag
			}
		}
		owner = {
			add_government_power = {
				mechanic_type = EDG_HER_making_peace
				power_type = EDG_HER_making_peace_power
				value = 1
			}
		}
	}
	if = {
		limit = {
			has_province_modifier = EDG_HER_2_2_modifier
			owner = {
				has_country_flag = EDG_CWN_4_7_flag
				NOT = {
					check_variable = {
						which = EDG_CWN_gangkoucheng_var
						value = 4
					}
				}
			}
		}
		owner = {
			change_variable = {
				which = EDG_CWN_gangkoucheng_var
				value = 1
			}
		}
	}
	if = {
		limit = {
			has_province_modifier = EDG_HER_2_2_modifier
			owner = {
				has_country_flag = EDG_CWN_4_7_flag
				check_variable = {
					which = EDG_CWN_gangkoucheng_var
					value = 4
				}
			}
		}
		owner = {
			change_variable = {
				which = EDG_CWN_gangkoucheng_var
				value = -4
			}
		}
		add_province_modifier = {
			name = "hanseatic_shipwrights_modifier"
			duration = -1
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_CWN_5_11_flag
			}
			has_terrain = woods
		}
		random = {
			add_random_development = 1
			chance = 25
		}
	}
}

# on_holy_order_established = {
# 	if = {
# 		limit = {
# 			holy_order = EDG_CWN_city_cluster_holy_order
# 		}
# 		owner = {
# 			custom_tooltip = EDG_CWN_city_cluster_2_TT			#失去1点城市治理经验，当前为§Y[Root.EDG_HER_CITY_EX_var.GetValue]§!。
# 			hidden_effect = {
# 				change_variable = {
# 					which = EDG_HER_CITY_EX_var
# 					value = -1
# 				}
# 			}
# 			add_splendor = 10
# 		}
# 	}
# }
on_five_year_pulse = {
	events = {
		EDG_CWN_flavor_event.2
		# EDG_CWN_flavor_event.3
		# EDG_CWN_flavor_event.4
		# EDG_CWN_flavor_event.21
		EDG_CWN_flavor_event.5
		# EDG_CWN_flavor_event.6
		# EDG_CWN_flavor_event.7
		# EDG_CWN_flavor_event.8
		# EDG_CWN_flavor_event.9
		EDG_CWN_flavor_event.22		#转发1
	}
}

on_yearly_pulse = {
	events = {
		# EDG_CWN_flavor_event.11
		# EDG_CWN_flavor_event.12
		# EDG_CWN_flavor_event.13
		# EDG_CWN_flavor_event.14
		# EDG_CWN_flavor_event.15
		# EDG_CWN_flavor_event.16
		# EDG_CWN_flavor_event.17
		# EDG_CWN_flavor_event.18
		# EDG_CWN_flavor_event.19
		# EDG_CWN_flavor_event.20
		EDG_CWN_flavor_event.23
	}
}
