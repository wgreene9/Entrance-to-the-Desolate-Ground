on_startup = {
	if = {
		limit = { 
			tag	= GEN
		}
		GEN = {
			country_event = {
				id = EDG_GENEvents.0
				days = 1
			}
		}
	}
}
on_adm_development = {
	if = {
		limit = {
			owner = {
				is_subject = no
			}
		}
		if = {
			limit = {
				owner = {
					has_country_flag = EDG_GEN_mission_c_3_9_flag
				}
			}
			set_variable = {
				which = EDG_GEN_province_development
				value = 0
			}
			export_to_variable = {
				which = EDG_GEN_province_development
				value = development
			}
			while = {
				limit = {
					check_variable = {
						which = EDG_GEN_province_development
						value = 1
					}
				}
				subtract_variable = {
					which = EDG_GEN_province_development
					value = 1
				}
				owner = {
					add_treasury = 1
				}
			}
		}
		
	}
	else = {
		if = {
			limit = {
				overlord = {
					has_country_flag = EDG_GEN_mission_c_3_9_flag
				}
			}
			set_variable = {
				which = EDG_GEN_province_development
				value = 0
			}
			export_to_variable = {
				which = EDG_GEN_province_development
				value = development
			}
			while = {
				limit = {
					check_variable = {
						which = EDG_GEN_province_development
						value = 1
					}
				}
				subtract_variable = {
					which = EDG_GEN_province_development
					value = 1
				}
				overlord = {
					add_treasury = 1
				}
			}
		}
	}
}
on_dip_development = {
	if = {
		limit = {
			owner = {
				is_subject = no
			}
		}
		if = {
			limit = {
				owner = {
					has_country_flag = EDG_GEN_mission_c_3_9_flag
				}
			}
			set_variable = {
				which = EDG_GEN_province_development
				value = 0
			}
			export_to_variable = {
				which = EDG_GEN_province_development
				value = development
			}
			while = {
				limit = {
					check_variable = {
						which = EDG_GEN_province_development
						value = 1
					}
				}
				subtract_variable = {
					which = EDG_GEN_province_development
					value = 1
				}
				owner = {
					add_treasury = 1
				}
			}
		}
		
	}
	else = {
		if = {
			limit = {
				overlord = {
					has_country_flag = EDG_GEN_mission_c_3_9_flag
				}
			}
			set_variable = {
				which = EDG_GEN_province_development
				value = 0
			}
			export_to_variable = {
				which = EDG_GEN_province_development
				value = development
			}
			while = {
				limit = {
					check_variable = {
						which = EDG_GEN_province_development
						value = 1
					}
				}
				subtract_variable = {
					which = EDG_GEN_province_development
					value = 1
				}
				overlord = {
					add_treasury = 1
				}
			}
		}
	}
}
on_mil_development = {
	if = {
		limit = {
			owner = {
				is_subject = no
			}
		}
		if = {
			limit = {
				owner = {
					has_country_flag = EDG_GEN_mission_c_3_9_flag
				}
			}
			set_variable = {
				which = EDG_GEN_province_development
				value = 0
			}
			export_to_variable = {
				which = EDG_GEN_province_development
				value = development
			}
			while = {
				limit = {
					check_variable = {
						which = EDG_GEN_province_development
						value = 1
					}
				}
				subtract_variable = {
					which = EDG_GEN_province_development
					value = 1
				}
				owner = {
					add_treasury = 1
				}
			}
		}
		
	}
	else = {
		if = {
			limit = {
				overlord = {
					has_country_flag = EDG_GEN_mission_c_3_9_flag
				}
			}
			set_variable = {
				which = EDG_GEN_province_development
				value = 0
			}
			export_to_variable = {
				which = EDG_GEN_province_development
				value = development
			}
			while = {
				limit = {
					check_variable = {
						which = EDG_GEN_province_development
						value = 1
					}
				}
				subtract_variable = {
					which = EDG_GEN_province_development
					value = 1
				}
				overlord = {
					add_treasury = 1
				}
			}
		}
	}
}
on_battle_lost_province = {
	if = {
		limit = { 
			from = {
				OR = {
					tag = GEN
					was_tag = GEN
				}
			}
		}
		if = {
			limit = { 
				OR = {
					has_terrain = grasslands
					has_terrain = farmlands
					has_terrain = drylands
				}

			}
			from = {
				change_variable = {
					which = EDG_GEN_battle_win_plain
					value = 1
				}
			}
		}
		else_if = {
			limit = { 
				OR = {
					has_terrain = forest
					has_terrain = woods
					has_terrain = jungle
				}
			}
			from = {
				change_variable = {
					which = EDG_GEN_battle_win_tree
					value = 1
				}
			}
		}
		else_if = {
			limit = { 
				OR = {
					has_terrain = mountain
					has_terrain = highlands
					has_terrain = hills
				}
			}
			from = {
				change_variable = {
					which = EDG_GEN_battle_win_rugged
					value = 1
				}
			}
		}
	}
}
on_colony_finished = {
	if = {
		limit = { 
			owner = {
				has_country_flag = EDG_GEN_mission_b_5_7_flag
				has_government_mechanic = EDG_GEN_george_house_mechanic
			}
		}
		add_base_tax = -1
		add_base_production = -1
		add_base_manpower = -1
		owner = {
			add_government_power = {
				mechanic_type = EDG_GEN_george_house_mechanic
				power_type = EDG_GEN_george_house
				value = 50
			}
		}
	}
}
on_naval_barrage = {
	if = {
		limit = {
			root = {
				has_country_flag = EDG_GEN_mission_b_5_9_flag
			}
		}
		from = {
			if = {
				limit = { 
					has_building = naval_battery 
				}
				change_siege = 2
			}
			else_if = {
				limit = { 
					has_building = coastal_defence
				}
				change_siege = 5
			}
			else = {
				change_siege = 10
			}
		}
	}
}
