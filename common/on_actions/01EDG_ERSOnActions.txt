on_monthly_pulse = {
	events = {
		mission_EDGERSmission.239
		mission_EDGERSmission.240
		mission_EDGERSmission.241
		mission_EDGERSmission.242
		mission_EDGERSmission.243
	}
}
on_yearly_pulse = {
	events = {
		mission_EDGERSmission.2
		mission_EDGERSmission.3
		mission_EDGERSmission_disasters.2
		mission_EDGERSmission_disasters.3
		mission_EDGERSmission.79
		mission_EDGERSmission.80
		mission_EDGERSmission.171
		mission_EDGERSmission.172
		mission_EDGERSmission.173
		mission_EDGERSmission.174
		mission_EDGERSmission.175
		mission_EDGERSmission.176
		mission_EDGERSmission.177
		mission_EDGERSmission.178
		mission_EDGERSmission.179
		mission_EDGERSmission.180
		mission_EDGERSmission.181
		mission_EDGERSmission.182
		mission_EDGERSmission.206
		mission_EDGERSmission.207
		mission_EDGERSmission.208
		mission_EDGERSmission.209
		mission_EDGERSmission.210
		mission_EDGERSmission.211
		mission_EDGERSmission.212
		mission_EDGERSmission.213
		mission_EDGERSmission.214
		mission_EDGERSmission.219
		mission_EDGERSmission.220
		mission_EDGERSmission.221
		mission_EDGERSmission.224
		mission_EDGERSmission.225
	}
}
on_bi_yearly_pulse = {
	if = {
		limit = {
			has_reform = EDG_new_ERS_new_Tianze_Monarchy_reforms
		}
		random_list = {
			25 = { country_event = {id = mission_EDGERSmission.10 days = 50} }
			25 = { country_event = {id = mission_EDGERSmission.11 days = 50} }
			25 = { country_event = {id = mission_EDGERSmission.71 days = 50} }
			25 = { country_event = {id = mission_EDGERSmission.69 days = 50} }
		}
	}
}
on_thri_yearly_pulse = {
	if = {
		limit = {
			religion_group = zoroastrian_group
		}
		random_list = {
			25 = { country_event = {id = mission_EDGERSmission.12 days = 50} }
			25 = { country_event = {id = mission_EDGERSmission.25 days = 50} }
			25 = { country_event = {id = mission_EDGERSmission.27 days = 50} }
			25 = { country_event = {id = mission_EDGERSmission.29 days = 50} }
		}
	}
	# events = {
		
	# }
}
on_five_year_pulse = {
	events = {

	}
}
on_revoke_estate_land = {
	if = {
		limit = {
			has_country_flag = EDG_ERS_mission_41_4_3_flag #回收王领将会获得5点专制度
		}
		add_absolutism = 5
	}
}
on_grant_estate_land = {
	if = {
		limit = {
			has_country_flag = EDG_ERS_mission_41_4_3_flag #出售王领将会多给10%忠诚
		}
		add_estate_loyalty = {
			estate = estate_church
			loyalty = 10
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 10
		}
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = 10
		}
		add_estate_loyalty = {
			estate = estate_nomadic_tribes
			loyalty = 10
		}
		add_estate_loyalty = {
			estate = estate_qizilbash
			loyalty = 10
		}
		add_estate_loyalty = {
			estate = estate_ghulams
			loyalty = 10
		}
	}
}
on_loan_repaid = {
	if = {
		limit = {
			has_country_flag = EDG_ERS_mission_41_4_3_flag #还贷款能获得0.1年收入
		}
		add_years_of_income = 0.1
	}
}
on_adm_advisor_hired = {
	if = {
		limit = {
			has_country_flag = EDG_ERS_mission_41_3_2_flag
		}
		add_country_modifier = {
			name = EDG_ERS_mission_41_3_2_1_modifier
			duration = -1
		}
	}
}
on_dip_advisor_hired = {
	if = {
		limit = {
			has_country_flag = EDG_ERS_mission_41_3_2_flag
		}
		add_country_modifier = {
			name = EDG_ERS_mission_41_3_2_2_modifier
			duration = -1
		}
	}
}
on_mil_advisor_hired = {
	if = {
		limit = {
			has_country_flag = EDG_ERS_mission_41_3_2_flag
		}
		add_country_modifier = {
			name = EDG_ERS_mission_41_3_2_3_modifier
			duration = -1
		}
	}
}
on_pre_adm_advisor_fired = {
	if = {
		limit = {
			has_country_modifier = EDG_ERS_mission_41_3_2_1_modifier
		}
		remove_country_modifier = EDG_ERS_mission_41_3_2_1_modifier
	}
	if = {
		limit = {
			has_country_modifier = mission_EDGERSmission_185_1_1_modifier
		}
		remove_country_modifier = mission_EDGERSmission_185_1_1_modifier
	}
	if = {
		limit = {
			has_country_modifier = mission_EDGERSmission_192_1_1_modifier
		}
		remove_country_modifier = mission_EDGERSmission_192_1_1_modifier
	}
	if = {
		limit = {
			has_country_modifier = mission_EDGERSmission_193_1_1_modifier
		}
		remove_country_modifier = mission_EDGERSmission_193_1_1_modifier
	}
	if = {
		limit = {
			has_country_modifier = mission_EDGERSmission_194_1_1_modifier
		}
		remove_country_modifier = mission_EDGERSmission_194_1_1_modifier
	}
}
on_pre_dip_advisor_fired = {
	if = {
		limit = {
			has_country_modifier = EDG_ERS_mission_41_3_2_2_modifier
		}
		remove_country_modifier = EDG_ERS_mission_41_3_2_2_modifier
	}
	if = {
		limit = {
			has_country_modifier = mission_EDGERSmission_191_2_1_modifier
		}
		remove_country_modifier = mission_EDGERSmission_191_2_1_modifier
	}
	if = {
		limit = {
			has_country_modifier = mission_EDGERSmission_194_1_2_modifier
		}
		remove_country_modifier = mission_EDGERSmission_194_1_2_modifier
	}
}
on_pre_mil_advisor_fired = {
	if = {
		limit = {
			has_country_modifier = EDG_ERS_mission_41_3_2_3_modifier
		}
		remove_country_modifier = EDG_ERS_mission_41_3_2_3_modifier
	}
	if = {
		limit = {
			has_country_modifier = mission_EDGERSmission_187_2_1_modifier
		}
		remove_country_modifier = mission_EDGERSmission_187_2_1_modifier
	}
	if = {
		limit = {
			has_country_modifier = mission_EDGERSmission_186_2_1_modifier
		}
		remove_country_modifier = mission_EDGERSmission_186_2_1_modifier
	}
	if = {
		limit = {
			has_country_modifier = mission_EDGERSmission_188_1_1_modifier
		}
		remove_country_modifier = mission_EDGERSmission_188_1_1_modifier
	}
	if = {
		limit = {
			has_country_modifier = mission_EDGERSmission_194_1_3_modifier
		}
		remove_country_modifier = mission_EDGERSmission_194_1_3_modifier
	}
}
on_national_focus_change = { #焦点转换时

}
on_adm_exploited = { #烧税

}
on_dip_exploited = { #烧生产

}
on_mil_exploited = { #烧人力

}
on_concentrate_development = { #集中发展度

}
#ROOT = province that was expanded in, FROM = country that did it
on_expanded_infrastructure = {
	if = {
		limit = {
			FROM = {
				has_country_flag = on_expanded_infrastructure
			}
			ROOT = {
				OR = {
					region = russia_region
					region = ural_region
					region = ruthenia_region
				}
			}
		}
		ROOT=  {
			add_random_development = 2
		}
	}
}
on_expanded_infrastructure_removed = {
	if = {
		limit = {
			FROM = {
				has_country_flag = on_expanded_infrastructure
			}
		}
		FROM = {
			add_adm_power = 50
		}
	}
}
on_annexed = {
	if = {
		limit = {
			has_country_flag = mission_EDGERSmission_237_1_4_flag
			FROM = {
				OR = {
					religion_group = christian
					religion_group = muslim
				}
			}
		}
		ERS = {
			change_variable = {
				which = EDG_PER_Shahanshah_authority_var
				value = 2
			}
		}
	}
}
on_monarch_death = {
	if = {
		limit = {
			has_reform = EDG_new_ERS_new_Tianze_Monarchy_reforms
			religion = zoroastrian
		}
		subtract_variable = {
            which = mission_EDGERSmission_54_opinion_1_1_var #善行
            which = mission_EDGERSmission_54_opinion_1_2_var #恶行
        }
		if = {
			limit = { #如果依据大于一，那么触发良性事件
				check_variable = {
					which = mission_EDGERSmission_54_opinion_1_1_var
					value = 1
				}
				NOT = {
					has_country_flag = EDG_ERSmission_52_opinion_1_2_flag
				}
			}
			country_event = {
				id = mission_EDGERSmission.55
			}
		}
		else_if = {
			limit = { #如果依据为零，那么触发一般事件
				check_variable = {
					which = mission_EDGERSmission_54_opinion_1_1_var
					value = 0
				}
				NOT = {
					has_country_flag = EDG_ERSmission_52_opinion_1_2_flag
				}
			}
			country_event = {
				id = mission_EDGERSmission.56
			}
		}
		else_if = {
			limit = { #如果依据小于0，那么触发恶性事件
				NOT = {
					check_variable = {
						which = mission_EDGERSmission_54_opinion_1_1_var
						value = 0
					}
				}
				NOT = {
					has_country_flag = EDG_ERSmission_52_opinion_1_2_flag
				}
			}
			country_event = {
				id = mission_EDGERSmission.57
			}
		}
		else_if = {
			limit = {
				has_country_flag = EDG_ERSmission_52_opinion_1_2_flag
			}
			country_event = {
				id = mission_EDGERSmission.57
			}
		}
	}
}
on_new_monarch = {
	if = {
		limit = {
			has_reform = EDG_new_ERS_new_Tianze_Monarchy_reforms
			religion = zoroastrian
		}
		set_variable = {
			which = mission_EDGERSmission_54_opinion_1_1_var
			value = 0
		}
		set_variable = {
			which = mission_EDGERSmission_54_opinion_1_2_var
			value = 0
		}
	}
}
on_battle_won_unit = {
	if = {
		limit = {
			unit_owner = {
				has_country_flag = EDG_ERS_mission_41_2_2_flag
			}
		}
		unit_owner = {
			add_prestige_or_monarch_power = { amount = 5 }
		}
		change_variable = {
			which = EDG_ERS_mission_41_2_2_flag_var
			value = 1
		}
		if = {
			limit = {
				check_variable = {
					which = EDG_ERS_mission_41_2_2_flag_var
					value = 100
				}
			}
			change_variable = {
				which = EDG_ERS_mission_41_2_2_flag_var
				value = -100
			}
			unit_owner = {
				add_country_modifier = {
					name = EDG_ERS_mission_41_2_2_modifier
					duration = 1825
				}
			}
		}
	}
}
on_province_religion_converted = {#所有洗地的flag
	on_province_religion_changed_effect = yes
	on_province_religion_converted_effect = yes
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_5_1_3_flag #凤凰涅槃，浴火重生的效果flag
			}
		}
		if = {
			limit = {
				base_tax = 5
			}
			owner = {
				add_adm_power = 5
			}
		}
		if = {
			limit = { 
				base_production = 5
			}
			owner = {
				add_dip_power = 5
			}
		}
		if = {
			limit = { 
				base_manpower = 5
			}
			owner = {
				add_mil_power = 5
			}
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_6_1_1_flag #完成开发山间资源flag
			}
		}
		add_random_development = 1
	}
	if = {
		limit = {
			owner = {
				has_country_flag = mission_EDGERSmission_disasters_17_opinion_1_flag #度过伊朗再分裂危机灾难的效果flag
			}
		}
		add_nationalism = -10
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_Start_Vlashokreti_flag #开始弗拉邵克雷提后追加的效果
			}
		}
		add_building_construction = {
			building = temple
			speed = 1
			cost = 0
		}
		add_province_modifier = {
			name = EDG_ERS_buff_7
			duration = -1
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_26_2_2_flag #摧毁耶路撒冷后追加的效果
			}
		}
		owner = {
			add_manpower = 2
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = Successful_Zoroastrianism_Reform_flag #祆教改革完成额外奖励
			}
		}
		owner = {
			add_government_power = {
				mechanic_type = EDG_ERS_new_Asha_Wahishta_ability
				power_type = EDG_ERS_new_Asha_Wahishta_power
				value = 1
			}
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERSmission_9_opinion_1_flag #卡维之旗追加效果
			}
		}
		owner = {
			change_variable = {
                which = EDG_PER_Shahanshah_authority_var
                value = 0.75
            }
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_4_2_2_flag #洗地给强力的威望
			}
		}
		owner = {
			add_prestige_or_monarch_power = { 
				amount = 1 
			}
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = mission_EDGERSmission_237_1_2_flag #圣火重燃减少分离主义
			}
			add_nationalism = -10
		}
	}
}
on_dip_development = {
	if = {
		limit = { 
			owner = {
				has_country_flag = EDG_ERS_mission_7_1_1_flag #种布料生产拿钱的
			}
			trade_goods = cloth
		}
		owner = {
			add_treasury = 10
			change_variable = {
				which = EDG_ERS_mission_7_1_1_flag_var
				value = 1
			}
		}
		if = {
			limit = { 
				owner = {
					check_variable = {
						which = EDG_ERS_mission_7_1_1_flag_var
						value = 20
					}
				}
			}
			owner = {
				change_variable = {
					which = EDG_ERS_mission_7_1_1_flag_var
					value = -20
				}
				add_years_of_income = 0.7
			}
		}
	}
	if = {
		limit = { 
			owner = {
				has_country_flag = EDG_ERS_mission_8_1_1_flag #种地丝绸生产拿钱的
			}
			trade_goods = silk
		}
		owner = {
			add_treasury = 15
			change_variable = {
				which = EDG_ERS_mission_8_1_1_flag_var
				value = 1
			}
		}
		if = {
			limit = { 
				owner = {
					check_variable = {
						which = EDG_ERS_mission_8_1_1_flag_var
						value = 30
					}
				}
			}
			owner = {
				change_variable = {
					which = EDG_ERS_mission_8_1_1_flag_var
					value = -30
				}
				add_years_of_income = 1.5
			}
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_province_development_flag #丝绸种够发展后上buff的
			}
			trade_goods = silk
			development = 25
		}
		add_province_modifier = {
			name = EDG_ERS_silk_development
			duration = -1
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_8_2_1_flag #有工厂的地能多拿三点生产发展的
			}
			has_manufactory_trigger = yes 
			NOT = {
				OR = {
					province_id = 410
					province_id = 416
					province_id = 429
					province_id = 2218
				}
			}
		}
		add_base_production = 3
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_9_3_2_flag #消去宗教热情的
			}
			development = 10
		}
		remove_province_modifier = religious_zeal_at_conv
	}
	if = {
		limit = { 
			owner = {
				has_country_flag = EDG_ERS_mission_9_3_3_flag #种谷物和牲畜拿人力的
			}
			OR = {
				trade_goods = grain
				trade_goods = livestock
			}
		}
		owner = {
			add_manpower = 0.1
			change_variable = {
				which = EDG_ERS_mission_9_3_3_flag_var
				value = 1
			}
		}
		if = {
			limit = { 
				owner = {
					check_variable = {
						which = EDG_ERS_mission_9_3_3_flag_var
						value = 20
					}
				}
			}
			owner = {
				change_variable = {
					which = EDG_ERS_mission_9_3_3_flag_var
					value = -20
				}
				add_yearly_manpower = 0.5
			}
		}
		if = {
			limit = {
				owner = {
					has_country_flag = EDG_ERS_mission_11_2_2_flag #25发展给贸易中心的
				}
				has_port = yes
				development = 25
			}
			center_of_trade = 1
		}
		if = {
			limit = {
				owner = {
					has_country_flag = mission_EDGERSmission_112_opinion_1_1_flag #给城市化的
				}
				development = 40
			}
			add_province_modifier = {
				name = mission_EDGERSmission_106_opinion_1_modifier
				duration = -1
			}
		}
		if = {
			limit = {
				owner = {
					has_country_flag = mission_EDGERSmission_112_opinion_1_2_flag #给大学的
				}
				development = 50
			}
			add_building = university
			if = {
				limit = {
					NOT = { 
						has_building = temple 
					}
				}
				add_building = temple
				if = {
					limit = {
						has_building = temple
					}
					remove_building = temple
					add_building = cathedral
				}
				if = {
					limit = {
						has_building = cathedral
					}
					add_base_tax = 2
				}
			}
			if = {
				limit = {
					NOT = { 
						has_building = workshop 
					}
				}
				add_building = workshop
				if = {
					limit = {
						has_building = workshop
					}
					remove_building = workshop
					add_building = counting_house
				}
				if = {
					limit = {
						has_building = counting_house
					}
					add_base_production = 2
				}
			}
			if = {
				limit = {
					NOT = { 
						has_building = courthouse 
					}
				}
				add_building = courthouse
				if = {
					limit = {
						has_building = courthouse
					}
					remove_building = courthouse
					add_building = town_hall
				}
				if = {
					limit = {
						has_building = town_hall
					}
					add_base_manpower = 2
				}
			}
		}
		if = {
			limit = {
				owner = {
					has_country_flag = EDG_ERS_mission_2_9_1_1_flag #把马来亚产物变丁香的
				}
				OR = {
					region = malaya_region
					region = indonesia_region
					region = moluccas_region
				}
				development = 29
			}
			change_trade_goods = cloves
		}
		if = {
			limit = {
				owner = {
					has_country_flag = EDG_ERS_mission_2_9_2_1_flag #把东非和南非产物变成象牙的
				}
				OR = {
					region = east_africa_region 
					region = south_africa_region
				}
				development = 29
			}
			change_trade_goods = ivory
		}
		if = {
			limit = {
				owner = {
					has_country_flag  = EDG_ERS_mission_2_10_1_1_flag #双倍提升东印度群岛省份发展度
				}
				OR = {
					region = malaya_region
					region = indonesia_region
					region = moluccas_region
				}
			}
			add_base_production = 1
		}
		if = {
			limit = {
				owner = {
					has_country_flag  = EDG_ERS_mission_2_10_2_1_flag #双倍提升东非与南非省份发展度
				}
				OR = {
					region = east_africa_region
					region = south_africa_region
				}
			}
			add_base_production = 1
		}
	}
}
on_adm_development = {
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_province_development_flag #丝绸种够发展后上buff的
			}
			trade_goods = silk
			development = 25
		}
		add_province_modifier = {
			name = EDG_ERS_silk_development
			duration = -1
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_7_2_1_flag #酒类和染料拿人力的
			}
			OR = {
				trade_goods = wine
				trade_goods = dyes
			}
		}
		add_base_manpower = 1
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_11_2_2_flag #25发展给贸易中心的
			}
			has_port = yes
			development = 25
		}
		center_of_trade = 1
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_9_3_2_flag #消去宗教热情的
			}
			development = 10
		}
		remove_province_modifier = religious_zeal_at_conv
	}
	if = {
		limit = {
			owner = {
				has_country_flag = mission_EDGERSmission_112_opinion_1_1_flag #给城市化的
			}
			development = 40
		}
		add_province_modifier = {
			name = mission_EDGERSmission_106_opinion_1_modifier
			duration = -1
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = mission_EDGERSmission_112_opinion_1_2_flag #给大学的
			}
			development = 50
		}
		add_building = university
		if = {
			limit = {
				NOT = { 
					has_building = temple 
				}
			}
			add_building = temple
			if = {
				limit = {
					has_building = temple
				}
				remove_building = temple
				add_building = cathedral
			}
			if = {
				limit = {
					has_building = cathedral
				}
				add_base_tax = 2
			}
		}
		if = {
			limit = {
				NOT = { 
					has_building = workshop 
				}
			}
			add_building = workshop
			if = {
				limit = {
					has_building = workshop
				}
				remove_building = workshop
				add_building = counting_house
			}
			if = {
				limit = {
					has_building = counting_house
				}
				add_base_production = 2
			}
		}
		if = {
			limit = {
				NOT = { 
					has_building = courthouse 
				}
			}
			add_building = courthouse
			if = {
				limit = {
					has_building = courthouse
				}
				remove_building = courthouse
				add_building = town_hall
			}
			if = {
				limit = {
					has_building = town_hall
				}
				add_base_manpower = 2
			}
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_2_9_1_1_flag #把马来亚产物变丁香的
			}
			OR = {
				region = malaya_region
				region = indonesia_region
				region = moluccas_region
			}
			development = 29
		}
		change_trade_goods = cloves
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_2_9_2_1_flag #把东非和南非产物变成象牙的
			}
			OR = {
				region = east_africa_region 
				region = south_africa_region
			}
			development = 29
		}
		change_trade_goods = ivory
	}
	if = {
		limit = {
			owner = {
				has_country_flag  = EDG_ERS_mission_2_10_1_1_flag #双倍提升东印度群岛省份发展度
			}
			OR = {
				region = malaya_region
				region = indonesia_region
				region = moluccas_region
			}
		}
		add_base_tax = 1
	}
	if = {
		limit = {
			owner = {
				has_country_flag  = EDG_ERS_mission_2_10_2_1_flag #双倍提升东非与南非省份发展度
			}
			OR = {
				region = east_africa_region
				region = south_africa_region
			}
		}
		add_base_tax = 1
	}
}
on_mil_development = {
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_province_development_flag #丝绸种够发展后上buff的
			}
			trade_goods = silk
			development = 25
		}
		add_province_modifier = {
			name = EDG_ERS_silk_development 
			duration = -1
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_7_2_1_flag #谷物和牲畜拿1点税收的
			}
			OR = {
				trade_goods = grain
				trade_goods = livestock
			}
		}
		add_base_tax = 1
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_11_2_2_flag #25发展给贸易中心的
			}
			has_port = yes
			development = 25
		}
		center_of_trade = 1
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_9_3_2_flag #消去宗教热情的
			}
			development = 10
		}
		remove_province_modifier = religious_zeal_at_conv
	}
	if = {
		limit = {
			owner = {
				has_country_flag = mission_EDGERSmission_112_opinion_1_1_flag #给城市化的
			}
			development = 40
		}
		add_province_modifier = {
			name = mission_EDGERSmission_106_opinion_1_modifier
			duration = -1
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = mission_EDGERSmission_112_opinion_1_2_flag #给大学的
			}
			development = 50
		}
		add_building = university
		if = {
			limit = {
				NOT = { 
					has_building = temple 
				}
			}
			add_building = temple
			if = {
				limit = {
					has_building = temple
				}
				remove_building = temple
				add_building = cathedral
			}
			if = {
				limit = {
					has_building = cathedral
				}
				add_base_tax = 2
			}
		}
		if = {
			limit = {
				NOT = { 
					has_building = workshop 
				}
			}
			add_building = workshop
			if = {
				limit = {
					has_building = workshop
				}
				remove_building = workshop
				add_building = counting_house
			}
			if = {
				limit = {
					has_building = counting_house
				}
				add_base_production = 2
			}
		}
		if = {
			limit = {
				NOT = { 
					has_building = courthouse 
				}
			}
			add_building = courthouse
			if = {
				limit = {
					has_building = courthouse
				}
				remove_building = courthouse
				add_building = town_hall
			}
			if = {
				limit = {
					has_building = town_hall
				}
				add_base_manpower = 2
			}
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_2_9_1_1_flag #把马来亚产物变丁香的
			}
			OR = {
				region = malaya_region
				region = indonesia_region
				region = moluccas_region
			}
			development = 29
		}
		change_trade_goods = cloves
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_2_9_2_1_flag #把东非和南非产物变成象牙的
			}
			OR = {
				region = east_africa_region 
				region = south_africa_region
			}
			development = 29
		}
		change_trade_goods = ivory
	}
	if = {
		limit = {
			owner = {
				has_country_flag  = EDG_ERS_mission_2_10_1_1_flag #双倍提升东印度群岛省份发展度
			}
			OR = {
				region = malaya_region
				region = indonesia_region
				region = moluccas_region
			}
		}
		add_base_manpower = 1
	}
	if = {
		limit = {
			owner = {
				has_country_flag  = EDG_ERS_mission_2_10_2_1_flag #双倍提升东非与南非省份发展度
			}
			OR = {
				region = east_africa_region
				region = south_africa_region
			}
		}
		add_base_manpower = 1
	}
}
on_center_of_trade_upgrade = {
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_11_1_1_flag #内陆贸易中心升到二级贸易中心的效果
			}
			has_port = no
			province_has_center_of_trade_of_level = 2
		}
		add_province_modifier = {
			name = EDG_ERS_mission_11_1_1_flag_1_modifier
			duration = -1
		}
		add_base_production = 2
		owner = {
			add_mercantilism = 1
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_11_1_1_flag #内陆贸易中心升到三级贸易中心的效果
			}
			has_port = no
			province_has_center_of_trade_of_level = 3
		}
		add_province_modifier = {
			name = EDG_ERS_mission_11_1_1_flag_2_modifier
			duration = -1
		}
		add_base_production = 2
		owner = {
			add_mercantilism = 1
		}
		if = {
			limit = {
				NOT = {
					has_country_modifier = EDG_ERS_mission_11_1_1_flag_1_modifier
				}
			}
			add_province_modifier = {
				name = EDG_ERS_mission_11_1_1_flag_1_modifier
				duration = -1
			}
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_11_3_1_flag #沿海贸易中心升到二级贸易中心的效果
			}
			has_port = yes
			province_has_center_of_trade_of_level = 2
		}
		add_province_modifier = {
			name = EDG_ERS_mission_11_3_1_flag_1_modifier
			duration = -1
		}
		add_base_production = 1
		owner = {
			add_sailors = 200
		}
	}
	if = {
		limit = {
			owner = {
				has_country_flag = EDG_ERS_mission_11_3_1_flag #沿海贸易中心升到三级贸易中心的效果
			}
			has_port = yes
			province_has_center_of_trade_of_level = 3
		}
		add_province_modifier = {
			name = EDG_ERS_mission_11_3_1_flag_2_modifier
			duration = -1
		}
		owner = {
			add_sailors = 200
		}
		if = {
			limit = {
				NOT = {
					has_country_modifier = EDG_ERS_mission_11_3_1_flag_1_modifier
				}
			}
			add_province_modifier = {
				name = EDG_ERS_mission_11_3_1_flag_1_modifier
				duration = -1
			}
		}
	}
}
on_center_of_trade_downgrade = {
	if = {
		limit = {
			has_province_modifier = EDG_ERS_mission_11_1_1_flag_1_modifier #降二级级贸易中心的影响
			has_port = no
			province_has_center_of_trade_of_level = 2
		}
		remove_province_modifier = EDG_ERS_mission_11_1_1_flag_1_modifier
		add_base_production = -2
		owner = {
			add_mercantilism = -1
			add_prestige = 10
		}
	}
	if = {
		limit = {
			has_province_modifier = EDG_ERS_mission_11_1_1_flag_2_modifier #降三级贸易中心的影响
			has_port = no
			province_has_center_of_trade_of_level = 3
		}
		add_base_production = -2
		remove_province_modifier = EDG_ERS_mission_11_1_1_flag_2_modifier
		owner = {
			add_mercantilism = -1
			add_prestige = 10
		}
	}
	if = {
		limit = {
			has_province_modifier = EDG_ERS_mission_11_3_1_flag_1_modifier #降沿海二级级贸易中心的影响
			has_port = yes
			province_has_center_of_trade_of_level = 2
		}
		remove_province_modifier = EDG_ERS_mission_11_3_1_flag_1_modifier
		owner = {
			add_mercantilism = -1
			add_prestige = 10
			add_sailors = -200
		}
	}
	if = {
		limit = {
			has_province_modifier = EDG_ERS_mission_11_3_1_flag_2_modifier #降沿海三级贸易中心的影响
			has_port = yes
			province_has_center_of_trade_of_level = 3
		}
		remove_province_modifier = EDG_ERS_mission_11_3_1_flag_2_modifier
		add_base_production = -2
		owner = {
			add_mercantilism = -1
			add_prestige = 10
			add_sailors = -200
		}
	}
}
on_general_recruited = {#完成组建古拉姆后给的奖励
	if = {
		limit = {
			has_country_flag = EDG_ERS_mission_18_2_2_flag
		}
		add_mil_power = 5
		add_army_professionalism = 0.01
	}
}
on_mil_tech_taken = { #完成任务顶尖，亦是最后的防线后给的奖励
	if = {
		limit = {
			has_country_flag = EDG_ERS_mission_20_1_1_flag
		}
		remove_country_modifier = mission_EDGERSmission_195_opinion_1_1_modifier
		remove_country_modifier = mission_EDGERSmission_195_opinion_1_2_modifier
		remove_country_modifier = mission_EDGERSmission_195_opinion_1_3_modifier
		remove_country_modifier = mission_EDGERSmission_195_opinion_1_4_modifier
		country_event = {
			id = mission_EDGERSmission.195
		}
	}
}
on_new_age = {
	if = {
		limit = {
			has_country_flag = EDG_ERS_mission_30_1_1_flag
		}
		add_splendor = 800
		change_innovativeness = 10
	}
}
on_barrage = { #完成任务，我们的军事霸权后给的奖励
	if = {
		limit = {
			ROOT = {
				has_country_flag = EDG_ERS_mission_21_1_2_flag
			}
		}
		ROOT = {
			add_mil_power = 25
		}
		FROM = {
			change_controller = ROOT
		}
	}
}
on_adm_tech_taken = {
	if = {
		limit = {
			has_country_flag = EDG_ERS_mission_30_2_3_flag  #给点数的
		}
		add_dip_power = 100
		add_mil_power = 100
	}
}
on_dip_tech_taken = { 
	if = {
		limit = {
			has_country_flag = EDG_ERS_mission_30_2_3_flag #降低侵略扩张的
		}
		every_known_country = {
			add_aggressive_expansion = {
				who = ROOT 
				value = -20
			}
		}
	}
}
on_mil_tech_taken = { 
	if = {
		limit = {
			has_country_flag = EDG_ERS_mission_30_2_3_flag #给将军的
		}
		define_general = {
			shock = 6
			fire = 4
			manuever = 6
			siege = 4
		}
	}
}
on_siege_lost_province = {#弗拉绍克雷提踩地效果
	if = {
		limit = { 
			owner = {
				is_in_war = {
					attacker_leader = FROM
					defender_leader = THIS
					casus_belli = cb_EDG_ERS_Vlashokriti
				}
			}
		}
		change_religion = zoroastrian
		set_province_flag = cb_EDG_ERS_Vlashokriti_1_flag
		if = {
			limit = {
				NOT = {
					has_province_flag = cb_EDG_ERS_Vlashokriti_3_flag
				}
			}
			controller = {
				change_variable = {
					which = EDG_PER_Shahanshah_authority_var
					value = 0.75
				}
			}
		}
		if = {
			limit = { #增加弗拉绍克雷提踩地效果
				OR = {
					NOT = {
						is_core = controller
					}
					NOT = {
						owned_by = controller
					}
				}
				controller = {
					has_country_flag = EDG_ERS_mission_26_3_2_flag
				}
			}
			if = { #如果一块地有4点任意发展度，则将其扣除2点发展度并给予相应君主点数
				limit = {
					base_tax = 4
				}
				add_base_tax = -2
				controller = {
					add_adm_power = 2
				}
			}
			if = {
				limit = { 
					base_production = 4
				}
				add_base_production = -2
				controller = {
					add_dip_power = 2
				}
			}
			if = {
				limit = { 
					base_manpower = 4
				}
				add_base_manpower = -2
				controller = {
					add_mil_power = 2
				}
			}
		}
		if = {
			limit = {
				controller = {
					has_country_flag = EDG_ERS_mission_27_1_1_flag
				}
				NOT = {
					owns = controller
					has_province_flag = EDG_ERS_mission_27_1_1_1_flag
				}
			}
			owner = {
				change_variable = {
					which = EDG_ERS_mission_27_1_1_flag_var
					value = 1
				}
			}
			set_province_flag = EDG_ERS_mission_27_1_1_1_flag
			if = {
				limit = {
					check_variable = {
						which = EDG_ERS_mission_27_1_1_flag_var
						value = 50
					}
				}
				owner = {
					change_variable = {
						which = EDG_ERS_mission_27_1_1_flag_var
						value = -50
					}
					add_country_modifier = {
						name = EDG_ERS_mission_27_1_2_modifier
						duration = 1825
					}
				}
			}
		}
		if = {
			limit = {
				controller = {
					has_country_flag = EDG_ERS_mission_26_1_1_1_flag #拿祆教核心
				}
				religion = zoroastrian
			}
			add_territorial_core = controller
			set_province_flag = cb_EDG_ERS_Vlashokriti_2_flag
		}
		if = {
			limit = {
				controller = {
					has_country_flag = EDG_ERS_mission_32_1_2_flag
				}
				NOT = {
					owns = controller
				}
			}
			controller = {
				add_government_power = {
					mechanic_type = EDG_ERS_new_Asha_Wahishta_ability
					power_type = EDG_ERS_new_Asha_Wahishta_power
					value = 1
				}
			}
			if = {
				limit = {
					religion_group = christian
				}
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
			}
		}
		if = {
			limit = {
				controller = {
					has_country_flag = EDG_ERS_mission_34_1_2_flag
				}
				NOT = {
					owns = controller
				}
			}
			controller = {
				add_government_power = {
					mechanic_type = EDG_ERS_new_Asha_Wahishta_ability
					power_type = EDG_ERS_new_Asha_Wahishta_power
					value = 1
				}
			}
			if = {
				limit = {
					religion_group = muslim
				}
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
			}
		}
		if = {
			limit = {
				controller = {
					has_country_flag = EDG_ERS_mission_30_3_2_flag
				}
				NOT = {
					owns = controller
				}
			}
			controller = {
				add_adm_power = 3
				add_dip_power = 3
				add_mil_power = 3
			}
		}
		if = {
			limit = {
				controller = {
					has_country_flag = EDG_ERS_mission_35_1_1_flag
				}
				superregion = europe_superregion
				NOT = {
					has_province_flag = EDG_ERS_mission_35_1_1_1_flag
				}
			}
			set_province_flag = EDG_ERS_mission_35_1_1_1_flag
			controller = {
				change_variable = {
					which = EDG_PER_Shahanshah_authority_var
					value = 0.3
				}
			}
		}
		# if = { #当敌方只剩下两块不为祆教后，该国将崩溃
		# 	limit = { 
		# 		FROM = {
		# 			has_country_flag
		# 		}
		# 		owner = {
		# 			NOT = {
		# 				all
		# 			}
		# 		}
		# 	}
		# 	owner = {
		# 		release_all_subjects = yes
		# 		white_peace = from
		# 	}
		# }
	}
}
on_main_war_won  = { #弗拉邵克雷提结束后的效果
	if = {
		limit = {
			FROM = {
				any_owned_province = {
					has_province_flag = cb_EDG_ERS_Vlashokriti_1_flag
					NOT = {
						religion = FROM
					}
				}
			}
		}
		FROM = {
			every_owned_province = {
				limit = {
					has_province_flag = cb_EDG_ERS_Vlashokriti_1_flag
					NOT = {
						religion = FROM
					}
				}
				change_religion = FROM
				clr_province_flag = cb_EDG_ERS_Vlashokriti_1_flag
			}
		}
	}
	if = {
		limit = {
			FROM = {
				any_owned_province = {
					has_province_flag = cb_EDG_ERS_Vlashokriti_3_flag
				}
			}
		}
		FROM = {
			every_owned_province = {
				limit = {
					has_province_flag = cb_EDG_ERS_Vlashokriti_3_flag
				}
				clr_province_flag = cb_EDG_ERS_Vlashokriti_3_flag
			}
		}
	}
	if = {
		limit = {
			FROM = {
				any_owned_province = {
					has_province_flag = cb_EDG_ERS_Vlashokriti_2_flag
					is_core = ROOT
				}
			}
		}
		FROM = {
			every_owned_province = {
				limit = {
					has_province_flag = cb_EDG_ERS_Vlashokriti_2_flag
					is_core = ROOT
				}
				remove_core = ROOT
				clr_province_flag = cb_EDG_ERS_Vlashokriti_2_flag
			}
		}
	}
	if = {
		limit = {
			FROM = {
				any_owned_province = {
					has_province_flag = EDG_ERS_cb_EDG_ERS_Vlashokriti_flag
				}
			}
		}
		FROM = {
			every_owned_province = {
				limit = {
					has_province_flag = EDG_ERS_mission_27_1_1_1_flag
				}
				clr_province_flag = EDG_ERS_mission_27_1_1_1_flag
			}
		}
	}
}
# on_battle_wom_unit = { #游击战降低损失人力效果
# 	if = {
# 		limit = {
# 			FROM = {
# 				has_country_modifier = war_guerrilla_warfare
# 			}
# 		}
# 		FROM = {
# 			set_variable = {
# 				which = land_units_killed_var
# 				which = land_units_killed
# 			}
# 			multiply_variable = {
# 				which = land_units_killed_var
# 				value = 0.5
# 			}
# 			if = {
# 				limit = {
# 					check_variable = {
# 						which = land_units_killed_var
# 						value = 1000
# 					}
# 				}
# 				while = {
# 					limit = {
# 						check_variable = {
# 							which = land_units_killed_var
# 							value = 1000
# 						}
# 					}
# 					subtract_variable = {
# 						which = land_units_killed_var
# 						value = 1000
# 					}
# 					root = {
# 						infantry = prev
# 					}
# 				}
# 			}
# 			else = {
# 				multiply_variable = {
# 					which = land_units_killed_var
# 					value = 1000
# 				}
# 				while = {
# 					limit = {
# 						check_variable = {
# 							which = land_units_killed_var
# 							value = 1000
# 						}
# 					}
# 					subtract_variable = {
# 						which = land_units_killed_var
# 						value = 1000
# 					}
# 					add_manpower = 0.001
# 				}
# 			}
# 		}
# 	}
# }