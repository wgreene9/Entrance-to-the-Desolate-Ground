EDG_MAZ_mission_1 = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = MAZ } 

	EDG_MAZ_mission_1_1 = {
		icon = mission_alliances
		position = 1
		provinces_to_highlight = {
			is_capital_of = owner
			NOT = {
				region = poland_region
			}
		} 

		trigger = {
			calc_true_if = {
				amount = 2
				all_ally = {
					capital_scope = {
						NOT = {
							region = poland_region
						}
					}
				}
			}
			has_dip_advisor = yes
		} 

		effect = {
			add_dip_power = 100
			custom_tooltip = EDG_SPACE_TT
			add_country_modifier = {
				name = EDG_MAZ_find_allies
				duration = 3650
			}
		} 
	}

	EDG_MAZ_mission_1_3 = {
		icon = mission_court_education
		position = 3
		required_missions = { EDG_MAZ_mission_1_1 } 
		provinces_to_highlight = {

		} 

		trigger = {
			num_of_owned_provinces_with = {
				region = poland_region
				development = 15
				value = 3
			}
		} 

		effect = {
			custom_tooltip = EDG_MAZ_mission_1_3.effect.tt
			tooltip = {
				random_owned_province = {
					add_base_tax = 1
					add_base_production = 1
					add_base_manpower = 1
					add_or_upgrade_production_building = yes
				}
			}
			custom_tooltip = EDG_SPACE_TT
			create_unit_forcelimit_percentage = {
				special_unit_category = hussars
				type = cavalry
				force_limit_percentage = 0.05
			}
			hidden_effect = {
				every_owned_province = {
					limit = {
						region = poland_region
						development = 15
					}
					add_base_tax = 1
					add_base_production = 1
					add_base_manpower = 1
					add_or_upgrade_production_building = yes
				}
			}
		} 
	}
}
EDG_MAZ_mission_2 = {
	slot = 2
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = MAZ } 

	EDG_MAZ_mission_2_2 = {
		icon = mission_raid_on_genoa
		position = 2
		required_missions = { EDG_MAZ_mission_3_1 } 
		provinces_to_highlight = {
			area = wielkopolska_area
			NOT = {
				owned_by = root
			}
		} 

		trigger = {
			wielkopolska_area = {
				type = all
				owned_by = root
			}
		} 

		effect = {
			add_country_modifier = {
				name = EDG_MAZ_guard_against_hre
				duration = 3650
			}
			custom_tooltip = EDG_SPACE_TT
			if = {
				limit = {
					has_country_flag = EDG_pol_alone_flag
				}
				create_unit_forcelimit_percentage = {
					special_unit_category = hussars
					type = cavalry
					force_limit_percentage = 0.05
				}
			}
			custom_tooltip = EDG_SPACE_TT
			add_prestige_or_monarch_power = { amount = 10 }
		} 
	}
}
EDG_MAZ_mission_3 = {
	slot = 3
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = MAZ } 

	EDG_MAZ_mission_3_1 = {
		icon = mission_pol_varna_aftermath
		position = 1
		provinces_to_highlight = {  } 

		trigger = {
			custom_trigger_tooltip = {
				tooltip = EDG_MAZ_mission_3_1.trigger.tt
				OR = {
					has_country_flag = EDG_pol_union_flag
					has_country_flag = EDG_pol_alone_flag
				}
			}
			NOT = {
				num_of_rebel_armies = 1
			}
			NOT = {
				num_of_rebel_controlled_provinces = 1
			}
		} 

		effect = {
			if = {
				limit = { 
					has_country_flag = EDG_pol_union_flag
				}
				central_poland_area = {
					add_local_autonomy = -25
				}
				malopolska_area = {
					add_local_autonomy = -25
				}
			}
			else_if = {
				limit = {
					has_country_flag = EDG_pol_alone_flag
				}
				capital_scope = {
					infantry = root
					infantry = root
					infantry = root
				}
				create_unit_forcelimit_percentage = {
					special_unit_category = hussars
					type = cavalry
					force_limit_percentage = 0.1
				}
				custom_tooltip = EDG_SPACE_TT
				add_country_modifier = {
					name = EDG_MAZ_be_independent
					duration = 3650
				}
			}
			else = {
				custom_tooltip = EDG_MAZ_mission_3_1.effect.tt
			}
			custom_tooltip = EDG_SPACE_TT
			EDG_add_claim = { area = poland_region }
		} 
	}

	EDG_MAZ_mission_3_2 = {
		icon = mission_conquer_cuttack
		position = 2
		required_missions = { EDG_MAZ_mission_3_1 } 
		provinces_to_highlight = {
			OR = {
				area = central_poland_area
				area = malopolska_area
			}
			NOT = {
				owned_by = root
			}
		} 

		trigger = {
			central_poland_area = {
				type = all
				owned_by = root
			}
			malopolska_area = {
				type = all
				owned_by = root
			}
		} 

		effect = {
			if = {
				limit = { 
					has_country_flag = EDG_pol_union_flag
				}
				add_treasury = 100
				custom_tooltip = EDG_SPACE_TT
				central_poland_area = {
					add_prosperity = 50
					add_base_tax = 1
					add_base_production = 2
					add_base_manpower = 1
				}
				custom_tooltip = EDG_SPACE_TT
				malopolska_area = {
					add_prosperity = 50
					add_base_tax = 1
					add_base_production = 2
					add_base_manpower = 1
				}
				
			}
			else_if = {
				limit = {
					has_country_flag = EDG_pol_alone_flag
				}
				create_unit_forcelimit_percentage = {
					special_unit_category = hussars
					type = cavalry
					force_limit_percentage = 0.05
				}
				custom_tooltip = EDG_SPACE_TT
				add_adm_power = 100
				add_dip_power = 100
				add_mil_power = 100
			}
			else = {
				custom_tooltip = EDG_MAZ_mission_3_1.effect.tt
			}
		} 
	}

	EDG_MAZ_mission_3_3 = {
		icon = mission_the_polish_throne
		position = 3
		required_missions = {
			EDG_MAZ_mission_2_2
			EDG_MAZ_mission_3_2
			EDG_MAZ_mission_4_2
		}
		provinces_to_highlight = {
			region = poland_region
			NOT = {
				owned_by = root
			}
		} 

		trigger = {
			num_of_owned_provinces_with = {
				region = poland_region
				value = 20
			}
		} 

		effect = {
			custom_tooltip = EDG_MAZ_mission_3_3.effect.tt
			custom_tooltip = EDG_SPACE_TT
			add_country_modifier = {
				name = EDG_MAZ_bridging_division
				duration = 7300
			}
			custom_tooltip = EDG_SPACE_TT
			add_prestige_or_monarch_power = { amount = 25 }
			hidden_effect = {
				every_owned_province = {
					limit = {
						region = poland_region
					}
					every_core_country = {
						limit = {
							NOT = {
								tag = root
							}
						}
						remove_core = prev
					}
				}
			}
		} 
	}

	EDG_MAZ_mission_3_4 = {
		icon = mission_plc_proclaim_polish_hegemony
		position = 4
		required_missions = {
			EDG_MAZ_mission_3_3
			EDG_MAZ_mission_1_3
			EDG_MAZ_mission_5_3
		}
		provinces_to_highlight = {  } 

		trigger = {
			NOT = { exists = POL }
			is_at_war = no
			is_free_or_tributary_trigger = yes
			is_nomad = no			
			owns_core_province = 262	# Krakow
			owns_core_province = 257	# Warszawa
			owns_core_province = 254	# Poznan
			owns_core_province = 255	# Kalish
			owns_core_province = 258	# Sieradz
			owns_core_province = 259	# Sandomierz
			owns_core_province = 1939	# Leczyca
		} 

		effect = {
			set_country_flag = pol_chose_pu_flag
			change_tag = POL
			on_change_tag_effect = yes
			restore_country_name = yes
			swap_non_generic_missions = yes
			remove_non_electors_emperors_from_empire_effect = yes
			if = {
				limit = { NOT = { government_rank = 2 } }
				set_government_rank = 2
			}
			add_country_modifier = {
				name = "centralization_modifier"
				duration = 7300
			}
			if = {
				limit = { has_updated_culture = { culture = slavic } }
				if = {
					limit = { NOT = { primary_culture = polish_new } }
					change_primary_culture = polish_new
				}
			}
			else = {
				if = {
					limit = { NOT = { primary_culture = polish } }
					change_primary_culture = polish
				}
			}
			if = {
				limit = { has_custom_ideas = no }
				country_event = { id = ideagroups.1 } #Swap Ideas
			}
			set_country_flag = formed_poland_flag
			remove_country_modifier = EDG_MAZ_pre_for_unit
			hidden_effect = {
				POL = {
					set_estate_privilege = estate_nobles_golden_liberty
					add_government_reform = polish_elective_monarchy
				}
			}
		} 
	}
}
EDG_MAZ_mission_4 = {
	slot = 4
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = MAZ } 

	EDG_MAZ_mission_4_2 = {
		icon = unify_piedmont
		position = 2
		required_missions = { EDG_MAZ_mission_3_1 } 
		provinces_to_highlight = {
			area = sandomierz_area
			NOT = {
				owned_by = root
			}
		} 

		trigger = {
			sandomierz_area = {
				type = all
				owned_by = root
			}
		} 

		effect = {
			add_years_of_income = 0.5
			custom_tooltip = EDG_SPACE_TT
			add_country_modifier = {
				name = EDG_MAZ_liquidation_committee
				duration = 3650
			}
			custom_tooltip = EDG_SPACE_TT
			if = {
				limit = {
					has_country_flag = EDG_pol_alone_flag
				}
				create_unit_forcelimit_percentage = {
					special_unit_category = hussars
					type = cavalry
					force_limit_percentage = 0.05
				}
			}
			custom_tooltip = EDG_SPACE_TT
			260 = {
				change_religion = root
			}
			
		} 
	}
}
EDG_MAZ_mission_5 = {
	slot = 5
	generic = no
	ai = yes
	has_country_shield = yes
	potential = { tag = MAZ } 

	EDG_MAZ_mission_5_1 = {
		icon = mission_assemble_an_army
		position = 1
		provinces_to_highlight = {  } 

		trigger = {
			num_of_generals = 2
			OR = {
				army_size = 12
				army_size_percentage = 0.95
			}
		} 

		effect = { 
			add_country_modifier = {
				name = EDG_MAZ_pre_for_unit
				duration = 3650
			}
			custom_tooltip = EDG_SPACE_TT
			add_army_tradition = 10
		} 
	}

	EDG_MAZ_mission_5_3 = {
		icon = mission_conquer_5_states
		position = 3
		required_missions = { EDG_MAZ_mission_5_1 } 
		provinces_to_highlight = {  } 

		trigger = {
			estate_loyalty = {
				estate = estate_nobles
				loyalty = 60
			}
		} 

		effect = {
			add_manpower = 5
			custom_tooltip = EDG_SPACE_TT
			add_yearly_manpower = 1
			custom_tooltip = EDG_SPACE_TT
			create_unit_forcelimit_percentage = {
				special_unit_category = hussars
				type = cavalry
				force_limit_percentage = 0.1
			}
		} 
	}
}
