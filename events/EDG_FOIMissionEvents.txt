namespace = FOIMissionEvents

country_event = {
	id = FOIMissionEvents.0
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test


	immediate = {
		EDG_FOI_save_target_for_battle_effect = {
			province_1 = 217
			province_2 = 208
		}
	}

	option = {
		name = FOIMissionEvents.0.aa
		EDG_FOI_declare_war_effect = {
			province_1 = 217
			province_2 = 208
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.1
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test

	immediate = {
		EDG_FOI_save_target_for_battle_effect = {
			province_1 = 206
			province_2 = 231
		}
		
	}

	option = {
		name = FOIMissionEvents.0.aa
		EDG_FOI_declare_war_effect = {
			province_1 = 206
			province_2 = 231
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.2
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test

	immediate = {
		EDG_FOI_save_target_for_battle_effect = {
			province_1 = 207
			province_2 = 210
		}
	}

	option = {
		name = FOIMissionEvents.0.aa
		EDG_FOI_declare_war_effect = {
			province_1 = 207
			province_2 = 210
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.3
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test

	immediate = {
		EDG_FOI_save_target_for_battle_effect = {
			province_1 = 214
			province_2 = 213
		}
	}

	option = {
		name = FOIMissionEvents.0.aa
		EDG_FOI_declare_war_effect = {
			province_1 = 214
			province_2 = 213
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.4
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test
	immediate = {
		hidden_effect = {
			227 = {
				owner = {
					save_event_target_as = FOI_declare_war_target
				}
			}
		}
	}

	option = {
		name = FOIMissionEvents.0.aa
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				alliance_with = event_target:FOI_declare_war_target
			}
		}
		EDG_FOI_declare_war_with_other = {
			attacker = root
			defender = event_target:FOI_declare_war_target
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.5
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test

	immediate = {
		EDG_FOI_save_target_for_battle_effect = {
			province_1 = 220
			province_2 = 333
		}
	}

	option = {
		name = FOIMissionEvents.0.aa
		EDG_FOI_declare_war_effect = {
			province_1 = 220
			province_2 = 333
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.6
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test

	immediate = {
		hidden_effect = {
			225 = {
				owner = {
					save_event_target_as = FOI_declare_war_target
				}
			}
		}
	}

	option = {
		name = FOIMissionEvents.0.aa
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				alliance_with = event_target:FOI_declare_war_target
			}
		}
		EDG_FOI_declare_war_with_other = {
			attacker = root
			defender = event_target:FOI_declare_war_target
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.7
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test

	immediate = {
		hidden_effect = {
			223 = {
				owner = {
					save_event_target_as = FOI_declare_war_target
				}
			}
		}
	}

	option = {
		name = FOIMissionEvents.0.aa
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				alliance_with = event_target:FOI_declare_war_target
			}
		}
		EDG_FOI_declare_war_with_other = {
			attacker = root
			defender = event_target:FOI_declare_war_target
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.8
	is_triggered_only = yes
	title = FOIMissionEvents.8.name
	desc = FOIMissionEvents.8.desc
	picture = GFX_event_event_test

	option = {
		name = FOIMissionEvents.8.aa
		ai_chance = {
			factor = 100
		}
		trigger = {
			OR = {
				ai = yes
				check_variable = {
					which = FOI_victory_point
					value = 3
				}
			}
		}
		every_country = {
			limit = {
				capital_scope = {
					region = iberia_region
				}
				is_subject = no
				NOT = {
					tag = root
				}
			}
			country_event = {
				id = FOIMissionEvents.9
				days = 3
			}
		}
		hidden_effect = {
			every_country = {
				limit = {
					capital_scope = {
						NOT = {
							region = iberia_region
						}
					}
					any_owned_province = {
						region = iberia_region
					}
					NOT = {
						OR = {
							is_subject_of = root
							tag = root
						}
					}
				}
				country_event = {
					id = FOIMissionEvents.21
					days = 30
				}
			}
		}
	}
	option = {
		name = FOIMissionEvents.8.bb
		custom_tooltip = FOIMissionEvents.8.aa.tt
			hidden_effect = {
				every_country = {
					limit = {
						capital_scope = {
							region = iberia_region
						}
						NOT = {
							tag = root
						}
						NOT = {
							is_subject_of = root
						}
					}
					save_event_target_as = FOI_declare_war_target
					root = {
						EDG_FOI_declare_war_with_other = {
							attacker = root
							defender = event_target:FOI_declare_war_target
						}
					}
				}
			}
	}
}
country_event = {
	id = FOIMissionEvents.9
	is_triggered_only = yes
	title = FOIMissionEvents.9.name
	desc = FOIMissionEvents.9.desc
	picture = GFX_event_event_test
	major = yes

	option = {
		name = FOIMissionEvents.9.aa
		ai_chance = {
			factor = 5
			modifier = {
				factor = 2
				alliance_with = from
			}
			modifier = {
				factor = 2
				has_opinion = {
					who = from
					value = 100
				}
			}
			modifier = {
				factor = 1.5
				religion = from
			}
			modifier = {
				factor = 10
				NOT = {
					army_strength = {
						who = from
						value = 0.8
					}
				}
			}
			modifier = {
				factor = 0.1
				NOT = {
					religion = root
				}
			}
			modifier = {
				factor = 0
				total_development = 100
			}
		}
		from = {
			create_subject = {
				subject_type = vassal
				subject = root
			}
		}
	}
	option = {
		name = FOIMissionEvents.9.bb
		ai_chance = {
			factor = 5
			modifier = {
				factor = 5
				is_rival = from
			}
		}
		from = {
			EDG_FOI_declare_war_with_other = {
				attacker = from
				defender = root
			}
		}
	}
}
country_event = {
	id = FOIMissionEvents.10
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test

	immediate = {
		EDG_FOI_save_target_for_battle_effect = {
			province_1 = 219
			province_2 = 218
		}
	}

	option = {
		name = FOIMissionEvents.0.aa
		EDG_FOI_declare_war_effect = {
			province_1 = 219
			province_2 = 218
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.11
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test

	immediate = {
		EDG_FOI_save_target_for_battle_effect = {
			province_1 = 223
			province_2 = 225
		}
	}

	option = {
		name = FOIMissionEvents.0.aa
		EDG_FOI_declare_war_effect = {
			province_1 = 223
			province_2 = 225
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.12
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test

	immediate = {
		EDG_FOI_save_target_for_battle_effect = {
			province_1 = 227
			province_2 = 231
		}
		
	}

	option = {
		name = FOIMissionEvents.0.aa
		EDG_FOI_declare_war_effect = {
			province_1 = 227
			province_2 = 231
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.13
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test

	immediate = {
		if = {
			limit = { 
				220 = {
					NOT = {
						country_or_non_sovereign_subject_holds = root
					}
				}
			}
			save_event_target_as = FOI_declare_war_target
		}
	}

	option = {
		name = FOIMissionEvents.0.aa
		EDG_FOI_declare_war_effect = {
			attacker = root
			defender = event_target:FOI_declare_war_target
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.14
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test

	immediate = {
		EDG_FOI_save_target_for_battle_effect = {
			province_1 = 213
			province_2 = 214
		}
		
	}

	option = {
		name = FOIMissionEvents.0.aa
		EDG_FOI_declare_war_effect = {
			province_1 = 213
			province_2 = 214
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.15
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test

	immediate = {
		hidden_effect = {
			206 = {
				owner = {
					save_event_target_as = FOI_declare_war_target
				}
			}
		}
	}

	option = {
		name = FOIMissionEvents.0.aa
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				alliance_with = event_target:FOI_declare_war_target
			}
		}
		EDG_FOI_declare_war_with_other = {
			attacker = root
			defender = event_target:FOI_declare_war_target
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.16
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test

	immediate = {
		hidden_effect = {
			if = {
				limit = { 
					207 = {
						NOT = {
							country_or_non_sovereign_subject_holds = root
						}
					}
				}
				207 = {
					owner = {
						save_event_target_as = FOI_declare_war_target
					}
				}
			}
		}
	}

	option = {
		name = FOIMissionEvents.0.aa
		if = {
			limit = { 
				207 = {
					NOT = {
						country_or_non_sovereign_subject_holds = root
					}
				}
			}
			EDG_FOI_declare_war_with_other = {
				attacker = root
				defender = event_target:FOI_declare_war_target
			}
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.17
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test

	immediate = {
		hidden_effect = {
			if = {
				limit = { 
					210 = {
						NOT = {
							country_or_non_sovereign_subject_holds = root
						}
					}
				}
				210 = {
					owner = {
						save_event_target_as = FOI_declare_war_target
					}
				}
			}
		}
	}

	option = {
		name = FOIMissionEvents.0.aa
		if = {
			limit = { 
				210 = {
					NOT = {
						country_or_non_sovereign_subject_holds = root
					}
					owner = {
						NOT = {
							has_opinion = {
								who = root
								value = 75
							}
						}
					}
				}
			}
			EDG_FOI_declare_war_with_other = {
				attacker = root
				defender = event_target:FOI_declare_war_target
			}
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.18
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test

	immediate = {
		EDG_FOI_save_target_for_battle_effect = {
			province_1 = 218
			province_2 = 219
		}
	}

	option = {
		name = FOIMissionEvents.0.aa
		EDG_FOI_declare_war_effect = {
			province_1 = 218
			province_2 = 219
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}

country_event = {
	id = FOIMissionEvents.19
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test

	immediate = {
		EDG_FOI_save_target_for_battle_effect = {
			province_1 = 217
			province_2 = 208
		}
	}

	option = {
		name = FOIMissionEvents.0.aa
		EDG_FOI_declare_war_effect = {
			province_1 = 217
			province_2 = 208
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.20
	is_triggered_only = yes
	title = FOIMissionEvents.0.name
	desc = FOIMissionEvents.0.desc
	picture = GFX_event_event_test

	immediate = {
		hidden_effect = {
			208 = {
				owner = {
					save_event_target_as = FOI_declare_war_target
				}
			}
		}
	}

	option = {
		name = FOIMissionEvents.0.aa
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				alliance_with = event_target:FOI_declare_war_target
			}
		}
		EDG_FOI_declare_war_with_other = {
			attacker = root
			defender = event_target:FOI_declare_war_target
		}
	}
	option = {
		name = FOIMissionEvents.0.bb
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = FOIMissionEvents.21
	is_triggered_only = yes
	title = FOIMissionEvents.21.name
	desc = FOIMissionEvents.21.desc
	picture = GFX_event_event_test
	major = yes

	trigger = {
		from = {
			NOT = {
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					region = iberia_region
					value = 55
				}
			}
		}
	}

	option = {
		name = FOIMissionEvents.21.aa
		ai_chance = {
			factor = 1
			modifier = {
				factor = 10
				NOT = {
					army_strength = {
						who = from
						value = 1
					}
				}
			}
			modifier = {
				factor = 10
				alliance_with = from
			}
		}
		every_owned_province = {
			limit = {
				region = iberia_region
			}
			cede_province = from
		}
	}
	option = {
		name = FOIMissionEvents.21.bb
		ai_chance = {
			factor = 10
		}
		from = {
			country_event = {
				id = FOIMissionEvents.22
				days = 1
			}
		}
	}
}
country_event = {
	id = FOIMissionEvents.22
	is_triggered_only = yes
	title = FOIMissionEvents.22.name
	desc = FOIMissionEvents.22.desc
	picture = GFX_event_event_test
	
	option = {
		name = FOIMissionEvents.22.aa
		ai_chance = {
			factor = 10
		}
		add_war_exhaustion = -5
		every_subject_country = {
			add_liberty_desire = -50
		}
		EDG_FOI_declare_war_with_other = {
			attacker = root
			defender = from
		}
	}
	option = {
		name = FOIMissionEvents.22.bb
		ai_chance = {
			factor = 0
		}
	}
}

country_event = {
	id = FOIMissionEvents.23
	is_triggered_only = yes
	title = FOIMissionEvents.23.name
	desc = FOIMissionEvents.23.desc
	picture = RELIGIOUS_TURMOIL_eventPicture

	option = {
		name = FOIMissionEvents.23.aa
		ai_chance = {
			factor = 10
		}
		iberia_region = {
			limit = {
				country_or_non_sovereign_subject_holds = root
				NOT = {
					religion = root
				}
			}
			add_province_modifier = {
				name = EDG_FOI_religion_unity
				duration = -1
			}
		}

	}
	option = {
		name = FOIMissionEvents.23.bb
		ai_chance = {
			factor = 0
		}

		iberia_region = {
			limit = {
				country_or_non_sovereign_subject_holds = root
				NOT = {
					religion = root
				}

			}
			add_province_modifier = {
				name = EDG_FOI_religious_tolerance
				duration = -1
			}
		}
	}
}
country_event = {
	id = FOIMissionEvents.24
	is_triggered_only = yes
	title = FOIMissionEvents.24.name
	desc = FOIMissionEvents.24.desc
	picture = GOOD_WITH_MONARCH_eventPicture

	option = {
		name = FOIMissionEvents.24.aa
		change_tag = SPA
		trigger = {
			religion_group = christian
			government = monarchy
		}
		every_subject_country = {
			limit = {
				capital_scope = {
					region = iberia_region
				}
			}
			root = {
				inherit = prev
			}
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = FOIMissionEvents.24.bb
		change_tag = ADU
		trigger = {
			religion_group = muslim
		}
		every_subject_country = {
			limit = {
				capital_scope = {
					region = iberia_region
				}
			}
			root = {
				inherit = prev
			}
		}
		hidden_effect = {
			country_event = {
				id = FOI_ADUEvents.0
				days = 1
			}
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = FOIMissionEvents.24.cc
		change_tag = POR
		trigger = {
			OR = {
				tag = PRT
				tag = GAL
			}
		}
		every_subject_country = {
			limit = {
				capital_scope = {
					region = iberia_region
				}
			}
			root = {
				inherit = prev
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 10
				tag = PRT
			}
		}
	}
	option = {
		name = FOIMissionEvents.24.dd
		change_tag = ADC
		trigger = {
			religion = catholic
			primary_culture = andalucian
		}
		every_subject_country = {
			limit = {
				capital_scope = {
					region = iberia_region
				}
			}
			root = {
				inherit = prev
			}
		}
		hidden_effect = {
			add_government_reform = EDG_ADC_monarchy_government
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
			}
		}
	}
	option = {
		name = FOIMissionEvents.24.ee
		change_tag = USP
		trigger = {
			government = republic
		}
		every_subject_country = {
			limit = {
				capital_scope = {
					region = iberia_region
				}
			}
			root = {
				inherit = prev
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 10
			}
		}
	}
	after = {
		remove_country_modifier = EDG_FOI_iberia_rehabilitate
		remove_government_reform = EDG_FOI_national_reconstruction_bureau
		swap_free_idea_group = yes
		swap_non_generic_missions = yes
		enable_estate_effect = {
			estate = estate_EDG_voyager
		}
		country_event = {
			id = FOICommonEvents.4
			days = 3
		}
	}
}
country_event = {
	id = FOIMissionEvents.25
	is_triggered_only = yes
	title = FOIMissionEvents.25.name
	desc = FOIMissionEvents.25.desc
	picture = GREAT_BUILDING_eventPicture

	option = {
		name = FOIMissionEvents.25.aa
		add_years_of_income = -1
		225 = {
			set_great_project_tier_3 = { type = EDG_Cordoba_cathedral }
		}
		add_prestige_or_monarch_power = { amount = 20 }
	}
	option = {
		name = FOIMissionEvents.25.bb
	}
}
country_event = {
	id = FOIMissionEvents.500
	is_triggered_only = yes
	hidden = yes

	trigger = {
		any_province = {
			region = iberia_region
			NOT = {
				OR = {
					culture = EDG_iberians
					culture = EDG_andalus
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				religion_group = muslim
			}
			random_province = {
				limit = {
					country_or_non_sovereign_subject_holds = root
					region = iberia_region
				}
				change_culture = EDG_andalus
			}
			country_event = {
				id = FOIMissionEvents.500
				days = 730
			}
		}
		else_if = {
			limit = {
				religion_group = christian
			}
			random_province = {
				limit = {
					country_or_non_sovereign_subject_holds = root
					region = iberia_region
					religion = root
				}
				change_culture = EDG_iberians
			}
			country_event = {
				id = FOIMissionEvents.500
				days = 730
			}
		}

	}

	option = {  }
}