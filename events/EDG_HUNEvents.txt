namespace = flavor_hun

country_event = {
	id = flavor_hun.38
	title = flavor_hun.38.t
	desc = flavor_hun.38.d
	picture = REFORM_eventPicture

	is_triggered_only = yes

	option = { #Promote the Hungarian culture
		name = flavor_hun.38.a
		add_country_modifier = {
			name = "hun_promote_hungarian_culture"
			duration = -1
		}
	}
	option = { #Guarantee the minority rights
		name = flavor_hun.38.b
		add_country_modifier = {
			name = "hun_guarantee_minority_rights"
			duration = -1
		}
	}
}

#Balazs Magyar
country_event = {
	id = flavor_hun.39
	title = flavor_hun.39.t
	desc = flavor_hun.39.d
	picture = BATTLE_eventPicture

	trigger = {
		OR = {
			tag = HUN
			was_tag = HUN
		}
		is_subject = no
		is_year = 1470
		OR = {
			has_country_modifier = hun_black_army
			has_reform = black_army_reform
		}
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		months = 120
	}

	option = {
		name = flavor_hun.39.a
		ai_chance = { factor = 10 }
		define_advisor = {
			name = "Balázs Magyar"
			culture = hungarian
			type = commandant
			skill = 3
			discount = yes
		}
	}
	
	option = {
		name = flavor_hun.39.b
		ai_chance = { factor = 80 }
		define_general = {
			shock = 4
			fire = 4
			manuever = 4
			siege = 2
			name = "Balázs Magyar"
		}
	}
	
	option = {
		name = flavor_hun.39.c
		ai_chance = { factor = 10 }
		add_mil_power = 50
	}
}

#Gubec's Peasant Uprising
country_event = {
    id = flavor_hun.40
	title = flavor_hun.40.t
	desc = flavor_hun.40.d
	picture = ANGRY_MOB_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		OR = {
			tag = HUN
			was_tag = HUN
		}
		is_year = 1573
		croatia_area = {
			type = all
			owned_by = ROOT
		}
	}
	
	mean_time_to_happen = {
	    months = 3
	}
	
	option = {
	    name = flavor_hun.40.a
		ai_chance = { factor = 20 }
		add_years_of_income = -0.3
		croatia_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			add_province_modifier = {
				name = "hun_peasants_compensated"
				duration = 3650
			}
		}
		slavonia_area = {
			limit = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			add_province_modifier = {
				name = "hun_peasants_compensated"
				duration = 3650
			}
		}
		if = {
			limit = {
				has_estate = estate_nobles
			}
			add_estate_loyalty = {
				estate = estate_nobles
				loyalty = -20
			}
		}
	}
	
	option = {
		ai_chance = { factor = 80 }
	    name = flavor_hun.40.b
		if = {
			limit = {
				has_estate = estate_nobles
			}
			add_estate_loyalty = {
				estate = estate_nobles
				loyalty = 10
			}
		}
		random_owned_province = {
			limit = {
				culture = croatian
			}
			spawn_rebels = {
				type = anti_tax_rebels
				size = 3
				leader = "Matija Gubec"
			}
		}
		random_owned_province = {
			limit = {
				culture = croatian
			}
			spawn_rebels = {
				type = anti_tax_rebels
				size = 2
			}
		}
	}
}

#Ascendant Hungary
country_event = {
    id = flavor_hun.41
	title = flavor_hun.41.t
	desc = flavor_hun.41.d
	picture = HRE_eventPicture
	
	is_triggered_only = yes
	
	option = {
	    name = flavor_hun.41.a
		ai_chance = { factor = 90 }
		add_dip_power = 200
		add_country_modifier = {
			name = hun_imperial_crown_bid
			duration = 7300
		}
	}
	
	option = {
		ai_chance = { factor = 10 }
	    name = flavor_hun.41.b
		custom_tooltip = hun_elector_cb_tt
		hidden_effect = {
			every_elector = {
				reverse_add_casus_belli = {
					target = ROOT
					type = cb_vassalize_mission
					months = 300
				}
			}
			emperor = {
				reverse_add_casus_belli = {
					target = ROOT
					type = cb_vassalize_mission
					months = 300
				}
			}
		}
	}
}

# Adam FrantiÅ¡ek KollÃ¡r
country_event = {
	id = flavor_hun.42
	title = flavor_hun.42.t
	desc = flavor_hun.42.d
	picture = ADVISOR_eventPicture

	fire_only_once = yes

	trigger = {
		OR = {
			tag = HUN
			was_tag = HUN
		}
		exists = HAB
		HAB = {
			is_emperor = yes
		}
		is_year = 1760
		NOT = { is_year = 1783 }
		slovakia_area = {
			owned_by = ROOT
		}
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
    option = {
	    name = flavor_hun.42.a
		ai_chance = { factor = 90 }
			define_advisor = {
			type = statesman
			name = "Adam Frantisek Kollár"
			culture = slovak
			discount = yes
			skill = 3
		}
	}
	
	option = {
		ai_chance = { factor = 10 }
	    name = flavor_hun.42.b
		add_dip_power = 50
	}
}


# Pal Kinizsi
country_event = {
	id = flavor_hun.43
	title = flavor_hun.43.t
	desc =  flavor_hun.43.d
	picture = LAND_MILITARY_eventPicture
	
	trigger = {
		OR = {
			tag = HUN
			was_tag = HUN
		}
		is_year = 1490
		NOT = { is_year = 1494 }
		OR = {
			has_country_modifier = hun_black_army
			has_reform = black_army_reform
		}
	}

	fire_only_once = yes
	
	mean_time_to_happen = {
		months = 12
	}

	option = {
		name = flavor_hun.43.a
		add_army_tradition_or_mil_power = { amount = 15 }
	}
	
	option = {
		name = flavor_hun.43.b
		define_advisor = {
			name = "Pál Kinizsi"
			culture = hungarian
			type = army_reformer
			skill = 3
			discount = yes
		}
	}
	
	option = {
		name = flavor_hun.43.c
		add_mil_power = 50
	}
}

#Beatrice of Aragon
country_event = {
	id = flavor_hun.44
	title = flavor_hun.44.t
	desc =  flavor_hun.44.d
	picture = wihgfx_FEMALE_SCHOLAR_eventPicture
	
	trigger = {
		OR = {
			tag = HUN
			was_tag = HUN
		}
	    dynasty = "Hunyadi"
		is_year = 1480
		NOT = { is_year = 1508 }
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		months = 150
	}
	
    option = {
	    name = flavor_hun.44.a
		ai_chance = { factor = 90 }
		add_ruler_modifier = {
			name = "hun_beatrice_aragon"
			duration = 7300
		}
	}
	
	option = {
		ai_chance = { factor = 10 }
	    name = flavor_hun.44.b
		add_dip_power = 50
	}
}

#Tripartitum 
country_event = { 
    id = flavor_hun.45
	title = flavor_hun.45.t
	desc = flavor_hun.45.d
	picture = BIG_BOOK_eventPicture 
	
	trigger = {
		OR = {
			OR = {
				tag = HUN
				was_tag = HUN
			}
			tag = TRA
		}
		is_year = 1514
	}
	
	fire_only_once = yes 
	
	mean_time_to_happen = {
	    months = 6
	}
	
	option = { 
	    name = flavor_hun.45.a
		ai_chance = { factor = 100 }
		add_country_modifier = {
			name = "hun_tripartitum"
			duration = -1
		}
	}
	
	option = {
		name = flavor_hun.45.b	
		ai_chance = { factor = 0 }
		add_stability_or_adm_power = yes
	}
}

# Saxons convert to Protestantism	
country_event = {
    id = flavor_hun.46
	title = flavor_hun.46.t
	desc = flavor_hun.46.d
	picture = {	
		trigger = {
			has_dlc = "Common Sense"
		}
		picture = PROTESTANT_RELIGIOUS_TENSIONS_eventPicture
	}
	picture = {	
		trigger = {
			NOT = { has_dlc = "Common Sense" }
		}
		picture = PRAYING_eventPicture
	}
	
	fire_only_once = yes
	
	trigger = {
		OR = {
			tag = HUN
			was_tag = HUN
		}
		is_year = 1533
		NOT = { is_year = 1549 }
		religion = catholic
		is_religion_enabled = protestant
		owns = 4128
		owns = 4127
	}
	
	mean_time_to_happen = {
		months = 48
	}
	
	option = {
	    name = flavor_hun.46.a
		4128 = {
		    change_religion = protestant 
		}
		4128 = {
			add_province_modifier = {
				name = hun_religious_tolerance
				duration = 3650
			}
		}
		4127 = {
		    change_religion = protestant 
		}
		4127 = {
			add_province_modifier = {
				name = hun_religious_tolerance
				duration = 3650
			}
		}
	}
	
	option = {
	    name = flavor_hun.46.b
		4128 = {
		    change_religion = protestant 
		}
		4128 = {
			add_unrest = 5
		}
		4128 = {
			add_province_modifier = {
				name = hun_convert_the_saxons
				duration = 3650
			}
		}
		4127 = {
		    change_religion = protestant 
		}
		4127 = {
			add_unrest = 5
		}
		4127 = {
			add_province_modifier = {
				name = hun_convert_the_saxons
				duration = 3650
			}
		}
	}
}

#Bibliotheca Corviniana
country_event = { 
    id = flavor_hun.47
	title = flavor_hun.47.t
	desc = flavor_hun.47.d
	picture = BIG_BOOK_eventPicture 

	is_triggered_only = yes
	
	option = { 
	    name = flavor_hun.47.a
		goto = 153
		add_country_modifier = {
			name = hun_corviana_library
			duration = 7300
		}
		153 = {
			if = {
				limit = {
					has_dlc = "Leviathan"
					has_great_project = {
						type = buda_castle
						tier = 0
					}
				}
				set_great_project_tier_1 = {
					type = buda_castle
				}
			}
			else = {
				add_base_tax = 3
			}
		}
	}
}

#Capital in Danger
country_event = {
    id = flavor_hun.48
	title = flavor_hun.48.t
	desc = flavor_hun.48.d 
	picture = CITY_VIEW_eventPicture
	
	fire_only_once = yes 
	
	trigger = {
		OR = {
			tag = HUN
			was_tag = HUN
		}
		owns = 153
		153 = {
			is_capital_of = ROOT
		}
		153 = {
			any_neighbor_province = {
				owned_by = TUR
			}
		}
		owns_core_province = 1772
	}

	mean_time_to_happen = {
		months = 4
	}
	
	option = {
	    name = flavor_hun.48.a
		ai_chance = { factor = 25 }
		goto = 153
		153 = {
		    add_permanent_province_modifier = {
				name = hun_buda_fortified
				duration = 14600
			}
			add_base_manpower = 3
	    }
	}

	option = {
		ai_chance = { factor = 75 }
	    name = flavor_hun.48.b
		goto = 1772
		1772 = {
			move_capital_effect = yes
		}
		1772 = {
			add_base_tax = 2
			add_base_production = 2
	    }
	}
}

#Juraj JÃ¡noÅ¡Ã­k
country_event = {
    id = flavor_hun.49
	title = flavor_hun.49.t
	desc = flavor_hun.49.d 
	picture = JURAJ_JANOSIK_eventPicture #to be replaced
	
	goto = 4236
	
	fire_only_once = yes 
	
	trigger = {
		is_year = 1710
		OR = {
			tag = HUN
			was_tag = HUN
		}
		slovakia_area = {
			owned_by = ROOT
		}
		4236 = {
			culture = slovak
		}
	}

	mean_time_to_happen = {
		months = 24
	}
	
	option = {
	    name = flavor_hun.49.a
		ai_chance = { factor = 100 }
		custom_tooltip = hun_janosik_raid
		hidden_effect = {
			4236 = {
				remove_loot = {
					who = REB
					amount = 100
				}
			}
		}
		4236 = {
			add_base_production = -1
		}
		custom_tooltip = hun_empty
		add_years_of_income = -0.5
		set_country_flag = hun_hunt_of_janosik
		custom_tooltip = hun_janosik_group_tt
	}

	option = {
		ai_chance = { factor = 75 }
	    name = flavor_hun.49.b
		custom_tooltip = hun_janosik_raid
		hidden_effect = {
			4236 = {
				remove_loot = {
					who = REB
					amount = 100
				}
			}
		}
		4236 = {
			add_base_production = -1
		}
		custom_tooltip = hun_empty
		set_country_flag = hun_janosik_ignored
		add_stability = -1
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -20
		}
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = -20
		}
	}
}

#JÃ¡noÅ¡Ã­k Strikes Again
country_event = {
    id = flavor_hun.50
	title = flavor_hun.50.t
	desc = flavor_hun.50.d 
	picture = JURAJ_JANOSIK_eventPicture #to be replaced
	
	goto = 154
	
	fire_only_once = yes 
	
	trigger = {
		has_country_flag = hun_janosik_ignored
		OR = {
			tag = HUN
			was_tag = HUN
		}
		154 = {
			owned_by = ROOT
		}
	}

	mean_time_to_happen = {
		months = 50
	}
	
	option = {
	    name = flavor_hun.50.a
		ai_chance = { factor = 100 }
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -20
		}
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = -20
		}
		custom_tooltip = hun_janosik_raid_nitra
		hidden_effect = {
			154 = {
				remove_loot = {
					who = REB
					amount = 100
				}
			}
		}
		154 = {
			add_base_production = -2
		}
		custom_tooltip = hun_empty
		add_years_of_income = -0.5
		set_country_flag = hun_hunt_of_janosik
		custom_tooltip = hun_janosik_group_tt
	}
}

#The End of Jánošík
country_event = {
    id = flavor_hun.51
	title = flavor_hun.51.t
	desc = flavor_hun.51.d 
	picture = JURAJ_JANOSIK_eventPicture #to be replaced
	
	fire_only_once = yes 
	
	trigger = {
		has_country_flag = hun_hunt_of_janosik
		OR = {
			tag = HUN
			was_tag = HUN
		}
	}

	mean_time_to_happen = {
		months = 80
	}
	
	option = {
	    name = flavor_hun.51.a
		ai_chance = { factor = 100 }
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 20
		}
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = 20
		}
		slovakia_area = {
			add_province_modifier = {
				name = "hun_end_of_banditry"
				duration = 7300
			}
		}
	}
}

country_event = {
	id = flavor_hun.52
	title = flavor_hun.52.t
	desc = flavor_hun.52.d
	picture = HRE_eventPicture

	is_triggered_only = yes

	option = {
		name = flavor_hun.52.a
	}
}

#New Trade Goods in Pest
country_event = {
	id = flavor_hun.53
	title = flavor_hun.53.t
	desc = flavor_hun.53.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = "flavor_hun.53.a"
		153 = {
			change_trade_goods = cloth
		}
		153 = {
			add_base_production = 1
		}
		ai_chance = {
			factor = 20
		}
	}
	
	option = {
		name = "flavor_hun.53.b"
		153 = {
			change_trade_goods = copper
		}
		153 = {
			add_base_production = 1
		}
		ai_chance = {
			factor = 20
		}
	}
	
	option = {
		name = "flavor_hun.53.c"
		153 = {
			change_trade_goods = iron
		}
		153 = {
			add_base_production = 1
		}
		ai_chance = {
			factor = 20
		}
	}
	
	option = {
		name = "flavor_hun.53.de"
		153 = {
			change_trade_goods = glass
		}
		153 = {
			add_base_production = 1
		}
		ai_chance = {
			factor = 20
		}
	}
	
	option = {
		name = "flavor_hun.53.e"
		153 = {
			add_base_production = 3
		}
	}	
}

#Hungary Joins the Empire - Negative Response
country_event = {
	id = flavor_hun.54
	title = flavor_hun.54.t
	desc = flavor_hun.54.d
	picture = HRE_eventPicture

	is_triggered_only = yes

	option = {
		name = flavor_hun.54.a
	}
}