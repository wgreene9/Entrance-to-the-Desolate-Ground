namespace = EDG_FCCEvents

country_event = {
	id = EDG_FCCEvents.0
	is_triggered_only = yes
	title = EDG_FCCEvents.0.name
	desc = EDG_FCCEvents.0.desc
	picture = GOOD_WITH_MONARCH_eventPicture

	option = {
		name = EDG_FCCEvents.0.aa
		add_country_modifier = {
			name = EDG_FCC_diplomatic_posture
			duration = 3650
		}
	}
}
country_event = {
	id = EDG_FCCEvents.1
	is_triggered_only = yes
	title = EDG_FCCEvents.1.name
	desc = EDG_FCCEvents.1.desc
	picture = DIPLOMACY_eventPicture

	option = {
		name = EDG_FCCEvents.1.aa
		add_treasury = 250
		add_legitimacy = -25
	}
}

country_event = {
	id = EDG_FCCEvents.2
	is_triggered_only = yes
	title = EDG_FCCEvents.2.name
	desc = EDG_FCCEvents.2.desc
	picture = DIPLOMACY_eventPicture
	immediate = {
		hidden_effect = {
			192 = {
				kill_units = {
					who = root
					amount = 5
				}
			}
			4392 = {
				kill_units = {
					who = root
					amount = 5
				}
			}
			1877 = {
				kill_units = {
					who = root
					amount = 5
				}
			}
			191 = {
				kill_units = {
					who = root
					amount = 5
				}
			}
		}
	}

	option = {
		name = EDG_FCCEvents.2.aa
		192 = {
			cede_province = root
			add_core_construction = {
				cost = 0.5
				speed = 0.5
			}
		}
		4392 = {
			cede_province = root
			add_core_construction = {
				cost = 0.5
				speed = 0.5
			}
		}
		1877 = {
			cede_province = root
			add_core_construction = {
				cost = 0.5
				speed = 0.5
			}
		}
		191 = {
			cede_province = root
			add_core_construction = {
				cost = 0.5
				speed = 0.5
			}
		}
		if = {
			limit = {
				has_country_modifier = EDG_FCC_army_support
			}
			remove_country_modifier = EDG_FCC_army_support
		}
		
	}
}
country_event = {
	id = EDG_FCCEvents.3
	is_triggered_only = yes
	title = EDG_FCCEvents.3.name
	desc = EDG_FCCEvents.3.desc
	picture = DIPLOMACY_eventPicture

	option = {
		name = EDG_FCCEvents.3.aa
		change_tag = BUR
		custom_tooltip = EDG_SPACE_TT
		FRA = {
			create_subject = {
				subject_type = appanage
				subject = root
			}
		}
		custom_tooltip = EDG_SPACE_TT
		add_liberty_desire = -50
		custom_tooltip = EDG_SPACE_TT
		set_capital = 192
		hidden_effect = {
			complete_mission = EDG_FCC_mission_3_6
		}
		custom_tooltip = EDG_SPACE_TT
		swap_free_idea_group = yes
		custom_tooltip = EDG_SPACE_TT
		swap_non_generic_missions = yes
	}
}
country_event = {
	id = EDG_FCCEvents.4
	is_triggered_only = yes
	title = EDG_FCCEvents.4.name
	desc = EDG_FCCEvents.4.desc
	picture = DIPLOMACY_eventPicture

	option = {
		name = EDG_FCCEvents.4.aa
		country_event = {
			id = EDG_FCCEvents.5
		}
	}
}
country_event = {
	id = EDG_FCCEvents.5
	is_triggered_only = yes
	title = EDG_FCCEvents.5.name
	desc = EDG_FCCEvents.5.desc
	picture = DIPLOMACY_eventPicture

	option = {
		name = EDG_FCCEvents.5.aa
		country_event = {
			id = FOI_SPAEvents.6
		}
	}
}
country_event = {
	id = EDG_FCCEvents.6
	is_triggered_only = yes
	title = EDG_FCCEvents.6.name
	desc = EDG_FCCEvents.6.desc
	picture = DIPLOMACY_eventPicture

	option = {
		name = EDG_FCCEvents.6.aa
		
	}
}


country_event = {
	id = EDG_FCCEvents.100
	is_triggered_only = yes
	title = EDG_FCCEvents.100.name
	desc = EDG_FCCEvents.100.desc
	picture = DIPLOMACY_eventPicture

	trigger = {
		
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = { 
					has_country_flag = EDG_FCC_internal_spreed_flag
				}
				random_owned_province = {
					limit = {
						religion_group = christian
						NOT = {
							religion = EDG_Waldenses
						}
						NOT = {
							has_province_flag = EDG_refuse_waldenses_flag
						}
						NOT = {
							has_province_flag = EDG_FCC_internal_external_flag
						}
					}
					save_event_target_as = EDG_select_province_target
				}
				clr_country_flag = EDG_FCC_internal_spreed_flag
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_FCC_internal_external_flag
				}
				random_owned_province = {
					limit = {
						NOT = {
							has_province_flag = EDG_refuse_waldenses_flag
						}
						NOT = {
							has_province_flag = EDG_FCC_internal_external_flag
						}
						religion_group = christian
						any_neighbor_province = {
							religion = EDG_Waldenses
						}
					}
					save_event_target_as = EDG_select_province_target
				}
				clr_country_flag = EDG_FCC_internal_external_flag
			}
		}
	}


	option = {
		name = EDG_FCCEvents.100.aa
		trigger = {
			has_estate_privilege = estate_EDG_FCC_balanced_law
		}
		goto = EDG_select_province_target
		event_target:EDG_select_province_target = {
			change_religion = EDG_Waldenses
			
			add_province_modifier = {
				name = estate_EDG_FCC_balanced_law_modifier
				duration = -1
			}
			hidden_effect = {
				set_country_flag = EDG_FCC_internal_external_flag
			}
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = EDG_FCCEvents.100.bb
		event_target:EDG_select_province_target = {
			change_religion = EDG_Waldenses
			add_province_modifier = {
				name = estate_EDG_FCC_balanced_law_modifier
				duration = -1
			}
			add_nationalism = 5
			add_unrest = 5
			hidden_effect = {
				set_country_flag = EDG_FCC_internal_external_flag
			}
		}
		custom_tooltip = EDG_SPACE_TT
		add_years_of_income = 0.1
		ai_chance = {
			factor = 1
			modifier = {
				factor = 10
				NOT = {
					num_of_cardinals = 1
				}
			}
		}
	}

	option = {
		name = EDG_FCCEvents.100.cc
		goto = EDG_select_province_target
		dip_power_cost = 25
		add_mil_power = 10
		event_target:EDG_select_province_target = {
			add_nationalism = 10
			add_unrest = 10
			hidden_effect = {
				set_province_flag = EDG_refuse_waldenses_flag
			}
		}
		custom_tooltip = EDG_SAPCE_TT
		add_papal_influence = 3
		add_church_power = 5
		ai_chance = {
			factor = 5
			modifier = {
				factor = 10
				is_emperor = yes
			}
			modifier = {
				factor = 10
				religion = catholic
				num_of_cardinals = 1
			}
			modifier = {
				factor = 10
				is_defender_of_faith = yes
				NOT = {
					religion = EDG_Waldenses
				}
			}
			modifier = {
				factor = 0
				has_estate_privilege = estate_EDG_FCC_balanced_law
			}
		}
	}
}

country_event = {
	id = EDG_FCCEvents.101
	is_triggered_only = yes
	hidden = yes

	trigger = {
		current_age = age_of_discovery
		has_estate_privilege = estate_EDG_FCC_balanced_law
		any_owned_province = {
			religion_group = christian
			NOT = {
				religion = EDG_Waldenses
			}
			NOT = {
				has_province_flag = EDG_refuse_waldenses_flag
			}
			NOT = {
				has_province_flag = EDG_already_waldenses_flag
			}
		}
	}

	immediate = {
		set_country_flag = EDG_FCC_internal_spreed_flag
		country_event = {
			id = EDG_FCCEvents.100
		}
	}

	option = {
		
	}
}
country_event = {
	id = EDG_FCCEvents.102
	is_triggered_only = yes
	hidden = yes
	trigger = {
		any_owned_province = {
			NOT = {
				has_province_flag = EDG_refuse_waldenses_flag
			}
			NOT = {
				has_province_flag = EDG_already_waldenses_flag
			}
			religion_group = christian
			any_neighbor_province = {
				religion = EDG_Waldenses
			}
		}
	}

	immediate = {
		set_country_flag = EDG_FCC_internal_external_flag
		country_event = {
			id = EDG_FCCEvents.100
		}
	}

	option = {
		
	}
}
country_event = { #参会者
	id = EDG_FCCEvents.200
	is_triggered_only = yes
	title = EDG_FCCEvents.200.name
	desc = EDG_FCCEvents.200.desc
	picture = DIPLOMACY_eventPicture

	immediate = {
		hidden_effect = {
			freeze_government_power = {
				mechanic_type = EDG_FCC_celebration_mechanic
				power_type = EDG_FCC_celebration
			}
		}
	}

	option = { #不论是谁都可以享受这场盛宴！
		name = EDG_FCCEvents.200.aa
		custom_tooltip = EDG_FCCEvents.200.aa.tt
		tooltip = {
			freeze_government_power = {
				mechanic_type = EDG_FCC_celebration_mechanic
				power_type = EDG_FCC_celebration
			}
		}
		hidden_effect = {
			set_variable = {
				which = EDG_FCC_celebration_people_cost_var
				value = 5
			}
			set_country_flag = EDG_FCC_celebration_every_one_flag
			country_event = {
				id = EDG_FCCEvents.201
			}
		}
	}
	option = { #邀请我们附近的国外贵族们来参加
		name = EDG_FCCEvents.200.bb
		custom_tooltip = EDG_FCCEvents.200.bb.tt
		tooltip = {
			freeze_government_power = {
				mechanic_type = EDG_FCC_celebration_mechanic
				power_type = EDG_FCC_celebration
			}
		}
		hidden_effect = {
			set_variable = {
				which = EDG_FCC_celebration_people_cost_var
				value = 2
			}
			set_country_flag = EDG_FCC_celebration_only_others_flag
			country_event = {
				id = EDG_FCCEvents.201
			}
		}
	}
	option = { #邀请国内的平民贵族们前来
		name = EDG_FCCEvents.200.cc
		custom_tooltip = EDG_FCCEvents.200.cc.tt
		tooltip = {
			freeze_government_power = {
				mechanic_type = EDG_FCC_celebration_mechanic
				power_type = EDG_FCC_celebration
			}
		}
		hidden_effect = {
			set_variable = {
				which = EDG_FCC_celebration_people_cost_var
				value = 3
			}
			set_country_flag = EDG_FCC_celebration_only_interface_flag
			country_event = {
				id = EDG_FCCEvents.201
			}
		}
	}
	option = { #人还是别太多了，皇室成员足矣
		name = EDG_FCCEvents.200.dd
		custom_tooltip = EDG_FCCEvents.200.dd.tt
		tooltip = {
			freeze_government_power = {
				mechanic_type = EDG_FCC_celebration_mechanic
				power_type = EDG_FCC_celebration
			}
		}
		hidden_effect = {
			set_variable = {
				which = EDG_FCC_celebration_people_cost_var
				value = 1
			}
			set_country_flag = EDG_FCC_celebration_only_self_flag
			country_event = {
				id = EDG_FCCEvents.201
			}
		}
	}

	option = { #笨蛋，问题是经济！
		name = EDG_FCCEvents.200.ee
		custom_tooltip = EDG_FCCEvents.200.ee.tt
		custom_tooltip = EDG_SPACE_TT
		add_stability = -1
		add_prestige = -10
		add_legitimacy = -10
		custom_tooltip = EDG_SPACE_TT
		unfreeze_government_power = {
			mechanic_type = EDG_FCC_celebration_mechanic
			power_type = EDG_FCC_celebration
		}
	}
}
country_event = { #规模
	id = EDG_FCCEvents.201
	is_triggered_only = yes
	title = EDG_FCCEvents.201.name
	desc = EDG_FCCEvents.201.desc
	picture = DIPLOMACY_eventPicture

	option = { 
		name = EDG_FCCEvents.201.aa
		custom_tooltip = EDG_FCCEvents.201.aa.effect.tt
		hidden_effect = {
			set_variable = {
				which = EDG_FCC_celebration_base_cost_var
				value = 5
			}
			set_country_flag = EDG_FCC_celebration_big_flag
		}
	}
	option = {
		name = EDG_FCCEvents.201.bb
		custom_tooltip = EDG_FCCEvents.201.bb.effect.tt
		hidden_effect = {
			set_variable = {
				which = EDG_FCC_celebration_base_cost_var
				value = 3
			}
			set_country_flag = EDG_FCC_celebration_common_flag
		}
	}
	option = {
		name = EDG_FCCEvents.201.cc
		custom_tooltip = EDG_FCCEvents.201.cc.effect.tt
		hidden_effect = {
			set_variable = {
				which = EDG_FCC_celebration_base_cost_var
				value = 1
			}
			set_country_flag = EDG_FCC_celebration_small_flag
		}
	}

	after = {
		hidden_effect = {
			country_event = {
				id = EDG_FCCEvents.202
			}
		}
	}
}
country_event = { #主要酒展
	id = EDG_FCCEvents.202
	is_triggered_only = yes
	title = EDG_FCCEvents.202.name
	desc = EDG_FCCEvents.202.desc
	picture = DIPLOMACY_eventPicture

	option = { #白
		name = EDG_FCCEvents.202.aa
		#custom_tooltip = EDG_FCCEvents.202.aa.effect.tt
		hidden_effect = {
			set_country_flag = EDG_FCC_celebration_white_wine
		}
	}
	option = { #桃红
		name = EDG_FCCEvents.202.bb
		#custom_tooltip = EDG_FCCEvents.202.bb.effect.tt
		hidden_effect = {
			set_country_flag = EDG_FCC_celebration_rose_wine
		}
	}
	option = { #红
		name = EDG_FCCEvents.202.cc
		#custom_tooltip = EDG_FCCEvents.202.cc.effect.tt
		hidden_effect = {
			set_country_flag = EDG_FCC_celebration_red_wine
		}
	}
	option = { #发泡
		name = EDG_FCCEvents.202.dd
		#custom_tooltip = EDG_FCCEvents.202.dd.effect.tt
		trigger = {
			custom_trigger_tooltip = {
				tooltip = EDG_FCCEvents.202.dd.trigger.tt
				has_country_flag = EDG_FCC_mission_4_14_flag
			}
		}
		highlight = yes
		hidden_effect = {
			set_country_flag = EDG_FCC_celebration_sparkling_wine
		}
	}

	after = {
		if = {
			limit = { 
				has_country_flag = EDG_FCC_celebration_big_flag
			}
			hidden_effect = {
				if = {
					limit = { 
						has_country_flag = EDG_FCC_mission_3_12_flag
					}
					country_event = {
						id = EDG_FCCEvents.203
						days = 60
						random = 30
					}
				}
				else = {
					country_event = {
						id = EDG_FCCEvents.204
						days = 60
						random = 30
					}
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_FCC_celebration_common_flag
			}
			hidden_effect = {
				if = {
					limit = { 
						has_country_flag = EDG_FCC_mission_3_12_flag
					}
					country_event = {
						id = EDG_FCCEvents.203
						days = 30
						random = 15
					}
				}
				else = {
					country_event = {
						id = EDG_FCCEvents.204
						days = 30
						random = 15
					}
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_FCC_celebration_small_flag
			}
			hidden_effect = {
				if = {
					limit = { 
						has_country_flag = EDG_FCC_mission_3_12_flag
					}
					country_event = {
						id = EDG_FCCEvents.203
						days = 15
						random = 10
					}
				}
				else = {
					country_event = {
						id = EDG_FCCEvents.204
						days = 15
						random = 10
					}
				}
			}
		}
	}
}

country_event = {
	id = EDG_FCCEvents.203
	is_triggered_only = yes
	title = EDG_FCCEvents.203.name
	desc = EDG_FCCEvents.203.desc
	picture = DIPLOMACY_eventPicture

	

	option = { #白
		name = EDG_FCCEvents.203.aa
		hidden_effect = {
			set_country_flag = EDG_FCC_white_win
		}
	}
	option = { #红
		name = EDG_FCCEvents.203.bb
		hidden_effect = {
			set_country_flag = EDG_FCC_red_win
		}
	}
	option = {
		name = EDG_FCCEvents.203.cc
		add_legitimacy = 10
		custom_tooltip = EDG_SPACE_TT
		add_prestige_or_monarch_power = {
			amount = 10
		}
	}

	after = {
		hidden_effect = {
			country_event = {
				id = EDG_FCCEvents.204
			}
		}
	}
}
country_event = {
	id = EDG_FCCEvents.204
	is_triggered_only = yes
	title = EDG_FCCEvents.204.name
	desc = EDG_FCCEvents.204.desc

	immediate = {
		hidden_effect = {
			unfreeze_government_power = {
				mechanic_type = EDG_FCC_celebration_mechanic
				power_type = EDG_FCC_celebration
			}
			set_variable = {
				which = EDG_FCC_static_cost
				value = 100
			}
			set_variable = {
				which = EDG_FCC_monthly_income
				value = 0
			}
			export_to_variable = {
				which = EDG_FCC_monthly_income
				value = trigger_value:monthly_income
			}
			multiply_variable = {
				which = EDG_FCC_monthly_income
				value = 12
			}
			multiply_variable = {
				which = EDG_FCC_monthly_income
				which = EDG_FCC_celebration_base_cost_var
			}
			multiply_variable = {
				which = EDG_FCC_static_cost
				which = EDG_FCC_celebration_people_cost_var
			}
			set_variable = {
				which = EDG_FCC_total_cost
				value = 0
			}
			change_variable = {
				which = EDG_FCC_total_cost
				which = EDG_FCC_monthly_income
			}
			change_variable = {
				which = EDG_FCC_total_cost
				which = EDG_FCC_static_cost
			}
		}
	}

	option = {
		name = EDG_FCCEvents.204.aa
		custom_tooltip = EDG_FCCEvents.204.aa.tt
		custom_tooltip = EDG_SPACE_TT
		custom_tooltip = EDG_FCC_chance_for_precious_stone.tt
		custom_tooltip = EDG_SPACE_TT
		if = {
			limit = { 
				OR = {
					has_country_flag = EDG_FCC_white_win
					has_country_flag = EDG_FCC_red_win
				}
			}
			if = {
				limit = { 
					has_country_flag = EDG_FCC_white_win
				}
				change_variable = {
					which = EDG_FCC_num_of_white_knight
					value = 1
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_FCC_red_win
				}
				change_variable = {
					which = EDG_FCC_num_of_red_knight
					value = 1
				}
			}
		}
		if = {
			limit = { 
				has_country_flag = EDG_FCC_already_forge_color_crown_flag
			}
			custom_tooltip = EDG_FCC_chance_for_precious_stone.tt
			hidden_effect = {
				change_variable = {
					which = EDG_FCC_num_of_gemstone_use
					value = 1
				}
			}
			custom_tooltip = EDG_SPACE_TT
		}
		unfreeze_government_power = {
			mechanic_type = EDG_FCC_celebration_mechanic
			power_type = EDG_FCC_celebration
		}
	}

	after = {
		hidden_effect = {
			clr_country_flag = EDG_FCC_white_win
			clr_country_flag = EDG_FCC_red_win
			while = {
				limit = { 
					check_variable = {
						which = EDG_FCC_total_cost
						value = 0
					}
				}
				add_treasury = -1
				subtract_variable = {
					which = EDG_FCC_total_cost
					value = 1
				}
			}
		}
	}
}
country_event = {
	id = EDG_FCCEvents.222
	is_triggered_only = yes
	hidden = yes

	immediate = {
		set_country_flag = EDG_SHY_enable_get_ship_flag
	}

	option = {
		
	}
}
country_event = {
	id = EDG_FCCEvents.500
	is_triggered_only = yes
	hidden = yes

	immediate = {
		every_owned_province = {
			limit = {
				NOT = {
					development = 15
				}
			}
			while = {
				limit = { 
					NOT = {
						development = 15
					}
				}
				if = {
					limit = { 
						NOT = {
							has_province_flag = EDG_FWF_add_base_tax_flag
						}
					}
					set_province_flag = EDG_FWF_add_base_tax_flag
					add_base_tax = 1
				}
				else_if = {
					limit = { 
						NOT = {
							has_province_flag = EDG_FWF_add_base_production_flag
						}
					}
					set_province_flag = EDG_FWF_add_base_production_flag
					add_base_production = 1
				}
				else_if = {
					limit = { 
						NOT = {
							has_province_flag = EDG_FWF_add_base_manpower_flag
						}
					}
					set_province_flag = EDG_FWF_add_base_manpower_flag
					add_base_manpower = 1
				}
				else_if = {
					limit = {
						has_province_flag = EDG_FWF_add_base_tax_flag
						has_province_flag = EDG_FWF_add_base_production_flag
						has_province_flag = EDG_FWF_add_base_manpower_flag
					}
					clr_province_flag = EDG_FWF_add_base_tax_flag
					clr_province_flag = EDG_FWF_add_base_production_flag
					clr_province_flag = EDG_FWF_add_base_manpower_flag
				}
			}
		}
	}
	option = {
		
	}
}