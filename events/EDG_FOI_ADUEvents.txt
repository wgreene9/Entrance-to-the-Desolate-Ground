namespace = FOI_ADUEvents

country_event = {
    id = FOI_ADUEvents.0
    is_triggered_only = yes
    title = FOI_ADUEvents.0.name
    desc = FOI_ADUEvents.0.desc
    picture = BIG_BOOK_eventPicture

    option = {
        name = FOI_ADUEvents.0.aa
        custom_tooltip = FOI_ADUEvents.0.aa.tt
        custom_tooltip = EDG_SPACE_TT
        if = {
            limit = {
                NOT = {
                    government = monarchy
                }
            }
            change_government = monarchy
        }
        ai_chance = {
            factor = 10
        }
        add_government_reform = EDG_al_andalusia_government
    }
    option = {
        name = FOI_ADUEvents.0.bb
        custom_tooltip = FOI_ADUEvents.0.bb.tt
        custom_tooltip = EDG_SPACE_TT
        ai_chance = {
            factor = 0
        }
        if = {
            limit = {
                NOT = {
                    government = monarchy
                }
            }
            change_government = monarchy
        }
        add_government_reform = EDG_Andalusian_monarchy
    }
}
country_event = {
    id = FOI_ADUEvents.1
    is_triggered_only = yes
    title = FOI_ADUEvents.1.name
    desc = FOI_ADUEvents.1.desc
    picture = BIG_BOOK_eventPicture

    option = {
        name = FOI_ADUEvents.1.aa
        add_country_modifier = {
            name = EDG_FOI_ADU_embrace_the_maghreb_culture
            duration = -1
        }
        northern_morocco_area = {
            limit = {
                country_or_non_sovereign_subject_holds = root
            }
            add_province_modifier = {
                name = EDG_FOI_ADU_culture_integrated_acceptance_modifier
                duration = 9125
            }
        }
        marrekesh_area = {
            limit = {
                country_or_non_sovereign_subject_holds = root
            }
            add_province_modifier = {
                name = EDG_FOI_ADU_culture_integrated_acceptance_modifier
                duration = 9125
            }
        }
        western_morocco_area = {
            limit = {
                country_or_non_sovereign_subject_holds = root
            }
            add_province_modifier = {
                name = EDG_FOI_ADU_culture_integrated_acceptance_modifier
                duration = 9125
            }
        }
        custom_tooltip = FOI_ADUEvents_no_core_province_modifier_tooltip
        hidden_effect = {
            set_country_flag = EDG_FOI_ADU_embrace_the_maghreb_culture_flag
        }
    }
    option = {
        name = FOI_ADUEvents.1.bb
        northern_morocco_area = {
            limit = {
                country_or_non_sovereign_subject_holds = root
            }
            add_province_modifier = {
                name = EDG_FOI_ADU_integration_assimilation
                duration = 9125
            }
        }
        marrekesh_area = {
            limit = {
                country_or_non_sovereign_subject_holds = root
            }
            add_province_modifier = {
                name = EDG_FOI_ADU_integration_assimilation
                duration = 9125
            }
        }
        western_morocco_area = {
            limit = {
                country_or_non_sovereign_subject_holds = root
            }
            add_province_modifier = {
                name = EDG_FOI_ADU_integration_assimilation
                duration = 9125
            }
        }
        custom_tooltip = FOI_ADUEvents_no_core_province_modifier_tooltip
        hidden_effect = {
            set_country_flag = EDG_FOI_ADU_integration_assimilation_maghreb_flag
        }
    }
}
country_event = {
    id = FOI_ADUEvents.2
    is_triggered_only = yes
    title = FOI_ADUEvents.2.name
    desc = FOI_ADUEvents.2.desc
    picture = FAMINE_eventPicture
    
    option = {
        name = FOI_ADUEvents.2.aa
        add_government_power = {
            mechanic_type = FOI_andalusia_religious_tolerance_mechanic
            power_type = FOI_andalusia_religious_tolerance
            value = 5
        }
        4566 = {
            change_religion = root
            set_great_project_tier_3 = { type = holy_city_kairouan }
        }
    }
    option = {
        name = FOI_ADUEvents.2.bb
        341 = {
            add_base_tax = -3
            add_base_production = -3
            add_base_manpower = -3
            add_devastation = 50
            change_religion = root
        }
    }
}
country_event = {
    id = FOI_ADUEvents.3
    is_triggered_only = yes
    title = FOI_ADUEvents.3.name
    desc = FOI_ADUEvents.3.desc
    picture = COLONIZATION_eventPicture

    option = {
        name = FOI_ADUEvents.3.aa
        custom_tooltip = FOI_ADUEvents.3.aa.tt
        hidden_effect = {
            set_country_flag = FOI_ADU_the_path_of_flowing_gold_flag
        }
        add_treasury = -250
        add_years_of_income = -0.5
        2448 = {
            add_base_manpower = 3
            add_base_production = 3
            add_base_tax = 3
            center_of_trade = 1
            add_province_modifier = {
                name = EDG_FOI_ADU_desert_commercial_station
                duration = -1
            }
        }
        2466 = {
            add_province_modifier = {
                name = EDG_FOI_ADU_sahara_station
                duration = -1
            }
        }
        if = {
            limit = {
                1127 = {
                    is_empty = yes
                }
            }
            1127 = {
                create_colony = 1000
                add_colonysize = 1000
                add_core = root
                cede_province = root
                change_religion = root
                change_culture = root
            }
        }
        if = {
            limit = {
                2474 = {
                    is_empty = yes
                }
            }
            2474 = {
                create_colony = 1000
                add_colonysize = 1000
                add_core = root
                cede_province = root
                change_religion = root
                change_culture = root
            }
        }
        if = {
            limit = {
                2475 = {
                    is_empty = yes
                }
            }
            2475 = {
                create_colony = 1000
                add_colonysize = 1000
                add_core = root
                cede_province = root
                change_religion = root
                change_culture = root
            }
        }
        sahel_region = {
            discover_country = root
        }
        western_sahara_area = {
            limit = {
                NOT = {
                    is_core = ROOT
                }
                NOT = {
                    is_permanent_claim = ROOT
                }
            }
            add_permanent_claim = ROOT
        }
        east_azbin_area = {
            limit = {
                NOT = {
                    is_core = ROOT
                }
                NOT = {
                    is_permanent_claim = ROOT
                }
            }
            add_permanent_claim = ROOT
        }
        azbin_area = {
            limit = {
                NOT = {
                    is_core = ROOT
                }
                NOT = {
                    is_permanent_claim = ROOT
                }
            }
            add_permanent_claim = ROOT
        }
    }
}

country_event = {
    id = FOI_ADUEvents.4
    is_triggered_only = yes
    title = FOI_ADUEvents.4.name
    desc = FOI_ADUEvents.4.desc
    picture = BIG_BOOK_eventPicture

    option = {
        name = FOI_ADUEvents.4.aa
        add_country_modifier = {
            name = EDG_FOI_ADU_embrace_the_mand_culture
            duration = -1
        }
        sahel_region = {
            limit = {
                country_or_non_sovereign_subject_holds = root
                NOT = {
                    is_core = root
                }
            }
            add_province_modifier = {
                name = EDG_FOI_ADU_culture_integrated_acceptance_modifier
                duration = 9125
            }
        }
        custom_tooltip = FOI_ADUEvents_no_core_province_modifier_tooltip
        hidden_effect = {
            set_country_flag = EDG_FOI_ADU_embrace_the_mand_culture_flag
        }
    }
    option = {
        name = FOI_ADUEvents.4.bb
        niger_region = {
            limit = {
                country_or_non_sovereign_subject_holds = root
                NOT = {
                    is_core = root
                }
            }
            add_province_modifier = {
                name = EDG_FOI_ADU_integration_assimilation
                duration = 9125
            }
        }
        custom_tooltip = FOI_ADUEvents_no_core_province_modifier_tooltip
        hidden_effect = {
            set_country_flag = EDG_FOI_ADU_integration_assimilation_mand_flag
        }
    }
}
country_event = {
    id = FOI_ADUEvents.5
    is_triggered_only = yes
    title = FOI_ADUEvents.5.name
    desc = FOI_ADUEvents.5.desc
    picture = BIG_BOOK_eventPicture

    option = {
        name = FOI_ADUEvents.5.aa
        add_country_modifier = {
            name = EDG_FOI_ADU_embrace_the_sahel_culture
            duration = -1
        }
        sahel_region = {
            limit = {
                country_or_non_sovereign_subject_holds = root
                NOT = {
                    is_core = root
                }
            }
            add_province_modifier = {
                name = EDG_FOI_ADU_culture_integrated_acceptance_modifier
                duration = 9125
            }
        }
        custom_tooltip = FOI_ADUEvents_no_core_province_modifier_tooltip
        hidden_effect = {
            set_country_flag = EDG_FOI_ADU_embrace_the_sahel_culture_flag
        }
    }
    option = {
        name = FOI_ADUEvents.5.bb
        sahel_region = {
            limit = {
                country_or_non_sovereign_subject_holds = root
                NOT = {
                    is_core = root
                }
            }
            add_province_modifier = {
                name = EDG_FOI_ADU_integration_assimilation
                duration = 9125
            }
        }
        custom_tooltip = FOI_ADUEvents_no_core_province_modifier_tooltip
        hidden_effect = {
            set_country_flag = EDG_FOI_ADU_integration_assimilation_sahel_flag
        }
    }
}
country_event = {
    id = FOI_ADUEvents.6
    is_triggered_only = yes
    title = FOI_ADUEvents.6.name
    desc = FOI_ADUEvents.6.desc
    picture = BIG_BOOK_eventPicture

    option = {
        name = FOI_ADUEvents.6.aa
        add_country_modifier = {
            name = EDG_FOI_ADU_embrace_the_west_africa_culture
            duration = -1
        }
        hidden_effect = {
            set_country_flag = EDG_FOI_ADU_embrace_the_west_africa_culture_flag
        }
    }
    option = {
        name = FOI_ADUEvents.6.bb
        hidden_effect = {
            set_country_flag = EDG_FOI_ADU_integration_assimilation_sahel_flag
        }
    }
}
# country_event = {
#     id = FOI_ADUEvents.50
#     is_triggered_only = yes
#     title = FOI_ADUEvents.50.name
#     desc = FOI_ADUEvents.50.desc

#     trigger = {
#         OR = {
#             tag = ADU
#             tag = MIB
#         }
#         has_government_mechanic = FOI_andalusia_religious_tolerance_mechanic
        
#     }

#     option = {
#         name = FOI_ADUEvents.50.aa
#     }
# }
country_event = {
    id = FOI_ADUEvents.500
    is_triggered_only = yes
    hidden = yes

    trigger = {
        OR = {
            southern_africa_superregion = {
                type = all
                NOT = {
                    OR = {
                        religion_group = muslim
                        religion_group = christian
                    }
                }
            }
            africa_superregion = {
                type = all
                NOT = {
                    OR = {
                        religion_group = muslim
                        religion_group = christian
                    }
                }
            }
        }
    }

    immediate = {
        random_owned_province = {
            limit = {
                NOT = {
                    religion = root
                }
                region = iberia_region
                religion_group = christian
            }
            save_event_target_as = EDG_FOI_ADU_religion_target
        }
        random_owned_province = {
            limit = {
                religion_group = pagan
            }
            change_religion = event_target:EDG_FOI_ADU_religion_target
        }
        country_event = {
            id = FOI_ADUEvents.500
            days = 365
        }
    }

    option = {

    }
}