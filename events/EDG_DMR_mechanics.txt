namespace = EDG_DMR_mechanics

country_event = {
	id = EDG_DMR_mechanics.0
	is_triggered_only = yes
	trigger = {
		
	}
	title = EDG_DMR_mechanics.0.name
	desc = EDG_DMR_mechanics.0.desc

	option = {
		name = EDG_DMR_mechanics.0.aa
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_straight_flag
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.0.bb
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_contrary_flag
			}
		}
	}

	after = {
		from = {
			country_event = {
				id = EDG_DMR_mechanics.1
			}
		}
	}
}
country_event = {
	id = EDG_DMR_mechanics.1
	is_triggered_only = yes
	trigger = {
		ai = no
	}
	title = EDG_DMR_mechanics.1.name
	desc = EDG_DMR_mechanics.1.desc
	picture = EDG_tarot

	option = {
		name = EDG_DMR_mechanics.1.aa
		trigger = {
			custom_trigger_tooltip = {
				tooltip = EDG_DMR_mechanics.1.aa.trigger.tt
				has_country_flag = EDG_DMR_straight_flag
			}
		}
		highlight = yes
	}
	option = {
		name = EDG_DMR_mechanics.1.bb
		trigger = {
			custom_trigger_tooltip = {
				tooltip = EDG_DMR_mechanics.1.bb.trigger.tt
				has_country_flag = EDG_DMR_contrary_flag
			}
		}
		highlight = yes
	}

	after = {
		hidden_effect = {
			random_country = {
				limit = {
					ai = yes
					NOT = {
						tag = root
					}
				}
				country_event = {
					id = EDG_DMR_mechanics.2
				}
			}
		}
	}
}
country_event = {
	id = EDG_DMR_mechanics.2
	is_triggered_only = yes
	trigger = {
	}
	title = EDG_DMR_mechanics.2.name
	desc = EDG_DMR_mechanics.2.desc

	option = {
		name = EDG_DMR_mechanics.2.aa
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_0
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_0
				set_country_flag = EDG_DMR_mechanics_card_flag_0
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.bb
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_1
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_1
				set_country_flag = EDG_DMR_mechanics_card_flag_1
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.cc
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_2
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_2
				set_country_flag = EDG_DMR_mechanics_card_flag_2
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.dd
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_3
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_3
				set_country_flag = EDG_DMR_mechanics_card_flag_3
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.ee
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_4
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_4
				set_country_flag = EDG_DMR_mechanics_card_flag_4
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.ff
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_5
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_5
				set_country_flag = EDG_DMR_mechanics_card_flag_5
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.gg
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_6
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_6
				set_country_flag = EDG_DMR_mechanics_card_flag_6
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.hh
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_7
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_7
				set_country_flag = EDG_DMR_mechanics_card_flag_7
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.ii
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_8
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_8
				set_country_flag = EDG_DMR_mechanics_card_flag_8
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.jj
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_9
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_9
				set_country_flag = EDG_DMR_mechanics_card_flag_9
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.kk
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_10
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_10
				set_country_flag = EDG_DMR_mechanics_card_flag_10
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.ll
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_11
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_11
				set_country_flag = EDG_DMR_mechanics_card_flag_11
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.mm
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_12
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_12
				set_country_flag = EDG_DMR_mechanics_card_flag_12
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.nn
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_13
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_13
				set_country_flag = EDG_DMR_mechanics_card_flag_13
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.oo
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_14
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_14
				set_country_flag = EDG_DMR_mechanics_card_flag_14
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.pp
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_15
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_15
				set_country_flag = EDG_DMR_mechanics_card_flag_15
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.qq
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_16
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_16
				set_country_flag = EDG_DMR_mechanics_card_flag_16
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.rr
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_17
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_17
				set_country_flag = EDG_DMR_mechanics_card_flag_17
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.ss
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_18
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_18
				set_country_flag = EDG_DMR_mechanics_card_flag_18
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.tt
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_19
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_19
				set_country_flag = EDG_DMR_mechanics_card_flag_19
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.uu
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_20
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_20
				set_country_flag = EDG_DMR_mechanics_card_flag_20
			}
		}
	}
	option = {
		name = EDG_DMR_mechanics.2.vv
		trigger = {
			from = {
				NOT = {
					has_country_flag = EDG_DMR_mechanics_card_flag_21
				}
			}
		}
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			from = {
				set_country_flag = EDG_DMR_mechanics_card_flag_temporary_21
				set_country_flag = EDG_DMR_mechanics_card_flag_21
			}
		}
	}

	after = {
		from = {
			country_event = {
				id = EDG_DMR_mechanics.3
			}
		}
	}
}

country_event = {
	id = EDG_DMR_mechanics.3
	is_triggered_only = yes
	trigger = {

	}
	title = EDG_DMR_mechanics.3.name
	desc = EDG_DMR_mechanics.3.desc
	picture = EDG_tarot

	option = {
		name = EDG_DMR_mechanics.3.aa
		if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_0
				has_country_flag = EDG_DMR_mechanics_card_flag_1
				has_country_flag = EDG_DMR_mechanics_card_flag_2
				has_country_flag = EDG_DMR_mechanics_card_flag_3
				has_country_flag = EDG_DMR_mechanics_card_flag_4
				has_country_flag = EDG_DMR_mechanics_card_flag_5
				has_country_flag = EDG_DMR_mechanics_card_flag_6
				has_country_flag = EDG_DMR_mechanics_card_flag_7
				has_country_flag = EDG_DMR_mechanics_card_flag_8
				has_country_flag = EDG_DMR_mechanics_card_flag_9
				has_country_flag = EDG_DMR_mechanics_card_flag_10
				has_country_flag = EDG_DMR_mechanics_card_flag_11
				has_country_flag = EDG_DMR_mechanics_card_flag_12
				has_country_flag = EDG_DMR_mechanics_card_flag_13
				has_country_flag = EDG_DMR_mechanics_card_flag_14
				has_country_flag = EDG_DMR_mechanics_card_flag_15
				has_country_flag = EDG_DMR_mechanics_card_flag_16
				has_country_flag = EDG_DMR_mechanics_card_flag_17
				has_country_flag = EDG_DMR_mechanics_card_flag_18
				has_country_flag = EDG_DMR_mechanics_card_flag_19
				has_country_flag = EDG_DMR_mechanics_card_flag_20
				has_country_flag = EDG_DMR_mechanics_card_flag_21
			}
			custom_tooltip = EDG_DMR_mechanics_begin_new_loop.tt
			hidden_effect = {
				change_variable = {
					which = EDG_DMR_compelete_round
					value = 1
				}
			}
			custom_tooltip = EDG_SPACE_TT
			hidden_effect = {
				clr_country_flag = EDG_DMR_mechanics_card_flag_0
				clr_country_flag = EDG_DMR_mechanics_card_flag_1
				clr_country_flag = EDG_DMR_mechanics_card_flag_2
				clr_country_flag = EDG_DMR_mechanics_card_flag_3
				clr_country_flag = EDG_DMR_mechanics_card_flag_4
				clr_country_flag = EDG_DMR_mechanics_card_flag_5
				clr_country_flag = EDG_DMR_mechanics_card_flag_6
				clr_country_flag = EDG_DMR_mechanics_card_flag_7
				clr_country_flag = EDG_DMR_mechanics_card_flag_8
				clr_country_flag = EDG_DMR_mechanics_card_flag_9
				clr_country_flag = EDG_DMR_mechanics_card_flag_10
				clr_country_flag = EDG_DMR_mechanics_card_flag_11
				clr_country_flag = EDG_DMR_mechanics_card_flag_12
				clr_country_flag = EDG_DMR_mechanics_card_flag_13
				clr_country_flag = EDG_DMR_mechanics_card_flag_14
				clr_country_flag = EDG_DMR_mechanics_card_flag_15
				clr_country_flag = EDG_DMR_mechanics_card_flag_16
				clr_country_flag = EDG_DMR_mechanics_card_flag_17
				clr_country_flag = EDG_DMR_mechanics_card_flag_18
				clr_country_flag = EDG_DMR_mechanics_card_flag_19
				clr_country_flag = EDG_DMR_mechanics_card_flag_20
				clr_country_flag = EDG_DMR_mechanics_card_flag_21
			}
		}
		if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_0
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_0.tt #将一半的行政点转为军事点
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					set_variable = {
						which = EDG_DMR_adm_power
						value = 0
					}
					export_to_variable = {
						which = EDG_DMR_adm_power
						value = trigger_value:adm_power
					}
					divide_variable = {
						which = EDG_DMR_adm_power
						value = 2
					}
					while = {
						limit = { 
							check_variable = {
								which = EDG_DMR_adm_power
								value = 0
							}
						}
						subtract_variable = {
							which = EDG_DMR_adm_power
							value = 1
						}
						add_adm_power = -1
						add_mil_power = 1
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_0_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_0.tt #将一半的外交点转为行政点数
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					set_variable = {
						which = EDG_DMR_dip_power
						value = 0
					}
					export_to_variable = {
						which = EDG_DMR_dip_power
						value = trigger_value:dip_power
					}
					divide_variable = {
						which = EDG_DMR_dip_power
						value = 2
					}
					while = {
						limit = { 
							check_variable = {
								which = EDG_DMR_dip_power
								value = 0
							}
						}
						subtract_variable = {
							which = EDG_DMR_dip_power
							value = 1
						}
						add_adm_power = 1
						add_dip_power = -1
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_0_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_1
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				add_years_of_income = 2.5
				custom_tooltip = EDG_SPACE_TT
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_1_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				add_years_of_income = -2.5
				custom_tooltip = EDG_SPACE_TT
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_1_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_2
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				add_adm_power = 200
				add_dip_power = 200
				add_mil_power = 200
				custom_tooltip = EDG_SPACE_TT
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_2_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				add_adm_power = -200
				add_dip_power = -200
				add_mil_power = -200
				custom_tooltip = EDG_SPACE_TT
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_2_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_3
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_3.tt
				hidden_effect = {
					set_variable = {
						which = EDG_DMR_total_development
						value = 0
					}
					export_to_variable = {
						which = EDG_DMR_total_development
						value = trigger_value:total_development
					}
					multiply_variable = {
						which = EDG_DMR_total_development
						value = 0.05
					}
					if = {
						limit = { 
							check_variable = {
								which = EDG_DMR_total_development
								value = 1
							}
						}
						while = {
							limit = { 
								check_variable = {
									which = EDG_DMR_total_development
									value = 0
								}
							}
							subtract_variable = {
								which = EDG_DMR_total_development
								value = 1
							}
							if = {
								limit = { 
									any_owned_province = {
										is_core = root
										NOT = {
											has_province_flag = EDG_DMR_target_province_flag
										}
									}
								}
								random_owned_province = {
									limit = {
										is_core = root
										NOT = {
											has_province_flag = EDG_DMR_target_province_flag
										}
									}
									add_random_development = 1
								}
							}
							else = {
								every_owned_province = {
									clr_province_flag = EDG_DMR_target_province_flag
								}
								random_owned_province = {
									limit = {
										is_core = root
										NOT = {
											has_province_flag = EDG_DMR_target_province_flag
										}
									}
									add_random_development = 1
								}
							}
						}
						every_owned_province = {
							clr_province_flag = EDG_DMR_target_province_flag
						}
					}
					else = {
						random_owned_province = {
							limit = {
								is_core = root
							}
							add_random_development = 1
						}
					}
				}
				custom_tooltip = EDG_SPACE_TT
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_3_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_3.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					set_variable = {
						which = EDG_DMR_total_development
						value = 0
					}
					export_to_variable = {
						which = EDG_DMR_total_development
						value = trigger_value:total_development
					}
					multiply_variable = {
						which = EDG_DMR_total_development
						value = 0.05
					}
					if = {
						limit = { 
							check_variable = {
								which = EDG_DMR_total_development
								value = 1
							}
						}
						while = {
							limit = { 
								check_variable = {
									which = EDG_DMR_total_development
									value = 0
								}
							}
							subtract_variable = {
								which = EDG_DMR_total_development
								value = 1
							}
							if = {
								limit = { 
									any_owned_province = {
										is_core = root
										NOT = {
											has_province_flag = EDG_DMR_target_province_flag
										}
									}
								}
								random_owned_province = {
									limit = {
										development = 4
										is_core = root
										NOT = {
											has_province_flag = EDG_DMR_target_province_flag
										}
									}
									if = {
										limit = { 
											base_tax = 2
										}
										add_base_tax = -1
									}
									else_if = {
										limit = { 
											base_production = 2
										}
										add_base_production = -1
									}
									else_if = {
										limit = { 
											base_manpower = 2
										}
										add_base_manpower = -1
									}
								}
							}
							else = {
								every_owned_province = {
									clr_province_flag = EDG_DMR_target_province_flag
								}
								random_owned_province = {
									limit = {
										development = 4
										is_core = root
										NOT = {
											has_province_flag = EDG_DMR_target_province_flag
										}
									}
									if = {
										limit = { 
											base_tax = 2
										}
										add_base_tax = -1
									}
									else_if = {
										limit = { 
											base_production = 2
										}
										add_base_production = -1
									}
									else_if = {
										limit = { 
											base_manpower = 2
										}
										add_base_manpower = -1
									}
								}
							}
						}
						every_owned_province = {
							clr_province_flag = EDG_DMR_target_province_flag
						}
					}
					else = {
						random_owned_province = {
							limit = {
								development = 4
								is_core = root
							}
							if = {
								limit = { 
									base_tax = 2
								}
								add_base_tax = -1
							}
							else_if = {
								limit = { 
									base_production = 2
								}
								add_base_production = -1
							}
							else_if = {
								limit = { 
									base_manpower = 2
								}
								add_base_manpower = -1
							}
						}
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_3_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_4
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_4.tt
				hidden_effect = {
					every_owned_province = {
						limit = {
							is_core = root
						}
						add_local_autonomy = -25
					}
				}
				custom_tooltip = EDG_SPACE_TT
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_4_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_4.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					every_owned_province = {
						limit = {
							is_core = root
						}
						add_local_autonomy = 25
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_4_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_5
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_5.tt
				hidden_effect = {
					every_owned_province = {
						limit = {
							NOT = {
								religion = root
							}
							has_province_modifier = religious_zeal_at_conv
						}
						remove_province_modifier = religious_zeal_at_conv
					}
					if = {
						limit = { 
							any_owned_province = {
								NOT = {
									religion = root
								}
							}
						}
						for = {
							amount = 5
							effect = "
								random_owned_province = {
									limit = {
										is_core = root
										NOT = {
											religion = root
										}
									}
									change_religion = root
								}
							"
						}
					}
				}
				custom_tooltip = EDG_SPACE_TT
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_5_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_5.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					for = {
						amount = 5
						effect = "
							random_owned_province = {
								limit = {
									is_core = root
									religion = root
									is_capital = no
								}
								remove_core = root
							}
						"
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_6_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_6
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_6.tt
				hidden_effect = {
					every_country = {
						limit = {
							marriage_with = root
						}
						add_trust = {
							who = root
							value = 20
							mutual = yes
						}
					}
					if = {
						limit = { 
							has_heir = no
						}
						define_heir = {
							change_adm = 1
							change_dip = 1
							change_mil = 1
							female = no
							age = 0
							dynasty = ROOT
							claim = 25
						}
					}
					if = {
						limit = { 
							has_consort = no
						}
						define_consort = { }
					}
				}
				custom_tooltip = EDG_SPACE_TT
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_6_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_6.tt
				custom_tooltip = EDG_SPACE_TT
				change_adm = -2
				change_dip = -2
				change_mil = -2
				custom_tooltip = EDG_SPACE_TT
				change_heir_stat = {
					type = adm
					amount = 1
				}
				change_heir_stat = {
					type = dip
					amount = 1
				}
				change_heir_stat = {
					type = mil
					amount = 1
				}
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					every_country = {
						limit = {
							marriage_with = root
						}
						add_trust = {
							who = root
							value = -20
							mutual = yes
						}
					}
					if = {
						limit = { 
							has_consort = yes
						}
						kill_consort = yes
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_6_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_7
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_7.tt
				if = {
					limit = { 
						NOT = {
							mil_tech = 10
						}
					}
					if = {
						limit = { 
							NOT = {
								army_size = 50
							}
						}
						capital_scope = {
							create_units_of_type_in_province = {
								amount = 3
								unit_type = peasant_cavalry_6_1
								who = root
							}
						}
					}
					else_if = {
						limit = { 
							NOT = {
								army_size = 100
							}
						}
						capital_scope = {
							create_units_of_type_in_province = {
								amount = 5
								unit_type = peasant_cavalry_6_1
								who = root
							}
						}
					}
					else_if = {
						limit = { 
							NOT = {
								army_size = 200
							}
						}
						capital_scope = {
							create_units_of_type_in_province = {
								amount = 10
								unit_type = peasant_cavalry_6_1
								who = root
							}
						}
					}
				}
				else_if = {
					limit = { 
						NOT = {
							mil_tech = 20
						}
					}
					if = {
						limit = { 
							NOT = {
								army_size = 50
							}
						}
						capital_scope = {
							create_units_of_type_in_province = {
								amount = 3
								unit_type = peasant_cavalry_13_1
								who = root
							}
						}
					}
					else_if = {
						limit = { 
							NOT = {
								army_size = 100
							}
						}
						capital_scope = {
							create_units_of_type_in_province = {
								amount = 5
								unit_type = peasant_cavalry_13_1
								who = root
							}
						}
					}
					else_if = {
						limit = { 
							NOT = {
								army_size = 200
							}
						}
						capital_scope = {
							create_units_of_type_in_province = {
								amount = 10
								unit_type = peasant_cavalry_13_1
								who = root
							}
						}
					}
				}
				else = {
					if = {
						limit = { 
							NOT = {
								army_size = 50
							}
						}
						capital_scope = {
							create_units_of_type_in_province = {
								amount = 3
								unit_type = peasant_cavalry_25_1
								who = root
							}
						}
					}
					else_if = {
						limit = { 
							NOT = {
								army_size = 100
							}
						}
						capital_scope = {
							create_units_of_type_in_province = {
								amount = 5
								unit_type = peasant_cavalry_25_1
								who = root
							}
						}
					}
					else_if = {
						limit = { 
							NOT = {
								army_size = 200
							}
						}
						capital_scope = {
							create_units_of_type_in_province = {
								amount = 10
								unit_type = peasant_cavalry_25_1
								who = root
							}
						}
					}
				}
				custom_tooltip = EDG_SPACE_TT
				create_general = { tradition = 100 }
				custom_tooltip = EDG_SPACE_TT
				add_army_tradition_or_mil_power = { amount = 10 }
				custom_tooltip = EDG_SPACE_TT
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_7_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_7.tt
				custom_tooltip = EDG_SPACE_TT
				add_army_tradition = -10
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					while = {
						limit = { 
							num_of_generals = 1
						}
						kill_leader = {
							type = general
						}
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_7_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_8
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_8.tt
				hidden_effect = {
					while = {
						limit = { 
							NOT = {
								manpower_percentage = 1
							}
						}
						add_manpower = 1
					}
				}
				custom_tooltip = EDG_SPACE_TT
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_8_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_8.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					add_manpower = -1000
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_8_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_9
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_9.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					random_list = {
						1 = { define_advisor = { type = philosopher cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = natural_scientist cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = artist cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = treasurer cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = theologian cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = master_of_mint cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = inquisitor cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = economist cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = innovator cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = administrative_experts cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = chamberlain cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = bailiff cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = architect cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = reformer cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = procurator cost_multiplier = 0.25 skill = 5 } }
					}
					random_list = {
						1 = { define_advisor = { type = statesman cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = naval_reformer cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = trader cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = spymaster cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = colonial_governor cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = diplomat cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = navigator cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = country_representative cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = historian cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = admiral cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = resettlement_specialist cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = educationist cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = cardinal cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = negotiator cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = feudal_tax_official cost_multiplier = 0.25 skill = 5 } }
					}
					random_list = {
						1 = { define_advisor = { type = army_reformer cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = army_organiser cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = commandant cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = quartermaster cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = recruitmaster cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = fortification_expert cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = grand_captain cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = infantry_commander cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = cavalry_commander cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = artillery_commander cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = siege_engineer cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = mercenary_leader cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = xungui cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = castle_master cost_multiplier = 0.25 skill = 5 } }
						1 = { define_advisor = { type = logistics_specialist cost_multiplier = 0.25 skill = 5 } }
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_9_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_9.tt
				custom_tooltip = EDG_SPACE_TT
				set_estate_privilege = estate_church_inwards_perfection
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					kill_advisor = random
					kill_advisor = random
					kill_advisor = random
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_9_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_10
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_10.tt
				hidden_effect = {
					set_variable = {
						which = EDG_DMR_adm_power
						value = 0
					}
					set_variable = {
						which = EDG_DMR_mil_power
						value = 0
					}
					export_to_variable = {
						which = EDG_DMR_adm_power
						value = trigger_value:adm_power
					}
					export_to_variable = {
						which = EDG_DMR_mil_power
						value = trigger_value:mil_power
					}
					set_variable = {
						which = EDG_DMR_difference
						which = EDG_DMR_adm_power
					}
					subtract_variable = {
						which = EDG_DMR_difference
						which = EDG_DMR_mil_power
					}
					if = {
						limit = { 
							NOT = {
								check_variable = {
									which = EDG_DMR_difference
									value = 0
								}
							}
						}
						multiply_variable = {
							which = EDG_DMR_difference
							value = -1
						}
					}
					while = {
						limit = { 
							mil_power = 1
						}
						add_mil_power = -1
					}
					while = {
						limit = { 
							adm_power = 1
						}
						add_adm_power = -1
					}
					while = {
						limit = { 
							check_variable = {
								which = EDG_DMR_mil_power
								value = 0
							}
						}
						add_adm_power = 1
						subtract_variable = {
							which = EDG_DMR_mil_power
							value = 1
						}
					}
					while = {
						limit = { 
							check_variable = {
								which = EDG_DMR_adm_power
								value = 0
							}
						}
						add_mil_power = 1
						subtract_variable = {
							which = EDG_DMR_adm_power
							value = 1
						}
					}
					while = {
						limit = { 
							check_variable = {
								which = EDG_DMR_difference
								value = 0
							}
						}
						add_dip_power = 1
						subtract_variable = {
							which = EDG_DMR_difference
							value = 1
						}
					}
				}
				custom_tooltip = EDG_SPACE_TT
				change_government_reform_progress = 100
				custom_tooltip = EDG_SPACE_TT
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_10_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_10.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					set_variable = {
						which = EDG_DMR_adm_power
						value = 0
					}
					set_variable = {
						which = EDG_DMR_dip_power
						value = 0
					}
					set_variable = {
						which = EDG_DMR_mil_power
						value = 0
					}
					export_to_variable = {
						which = EDG_DMR_adm_power
						value = trigger_value:adm_power
					}
					export_to_variable = {
						which = EDG_DMR_dip_power
						value = trigger_value:dip_power
					}
					export_to_variable = {
						which = EDG_DMR_mil_power
						value = trigger_value:mil_power
					}
					if = {
						limit = { 
							check_variable = {
								which = EDG_DMR_adm_power
								which = EDG_DMR_dip_power
							}
						}
						set_country_flag = EDG_DMR_adm_highest
						set_variable = {
							which = EDG_DMR_compare_var
							which = EDG_DMR_adm_power
						}
					}
					else = {
						set_country_flag = EDG_DMR_dip_highest
						set_variable = {
							which = EDG_DMR_compare_var
							which = EDG_DMR_dip_power
						}
					}
					if = {
						limit = { 
							check_variable = {
								which = EDG_DMR_compare_var
								which = EDG_DMR_mil_power
							}
						}
						while = {
							limit = { 
								check_variable = {
									which = EDG_DMR_compare_var
									value = 0
								}
							}
							subtract_variable = {
								which = EDG_DMR_compare_var
								value = 1
							}
							if = {
								limit = { 
									has_country_flag = EDG_DMR_adm_highest
								}
								add_adm_power = -1
							}
							else_if = {
								limit = { 
									has_country_flag = EDG_DMR_dip_highest
								}
								add_dip_power = -1
							}
						}
					}
					else = {
						set_variable = {
							which = EDG_DMR_compare_var
							which = EDG_DMR_mil_power
						}
						while = {
							limit = { 
								check_variable = {
									which = EDG_DMR_compare_var
									value = 0
								}
							}
							subtract_variable = {
								which = EDG_DMR_compare_var
								value = 1
							}
							add_mil_power = -1
						}
					}
					change_government_reform_progress = -10000
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_10_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_11
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_11.tt
				hidden_effect = {
					every_owned_province = {
						limit = {
							unrest = 1
							is_core = root
						}
						add_unrest = -100
					}
				}
				custom_tooltip = EDG_SPACE_TT
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_11_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_11.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					every_owned_province = {
						limit = {
							is_core = root
						}
						add_nationalism = 10
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_11_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_12
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_12.tt
				custom_tooltip = EDG_SPACE_TT
				change_ruler_stat = {
					type = mil
					amount = 1
				}
				change_ruler_stat = {
					type = mil
					amount = 1
				}
				change_dip = -1
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					change_variable = {
						which = EDG_DMR_num_of_overturn_chance
						value = 1
					}
				}
				custom_tooltip = EDG_SPACE_TT
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_12_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_12.tt
				custom_tooltip = EDG_SPACE_TT
				change_ruler_stat = {
					type = dip
					amount = 1
				}
				change_adm = -1
				change_mil = -1
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					every_owned_province = {
						limit = {
							base_manpower = 2
						}
						add_base_manpower = -1
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_12_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_13
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_13.tt
				custom_tooltip = EDG_SPACE_TT
				
				hidden_effect = {
					set_variable = {
						which = EDG_DMR_ruler_adm
						value = 0
					}
					set_variable = {
						which = EDG_DMR_ruler_dip
						value = 0
					}
					set_variable = {
						which = EDG_DMR_ruler_mil
						value = 0
					}
					export_to_variable = {
						which = EDG_DMR_ruler_adm
						value = trigger_value:adm
					}
					export_to_variable = {
						which = EDG_DMR_ruler_dip
						value = trigger_value:adm
					}
					export_to_variable = {
						which = EDG_DMR_ruler_mil
						value = trigger_value:adm
					}
					if = {
						limit = { 
							check_variable = {
								which = EDG_DMR_ruler_adm
								value = 1
							}
						}
						while = {
							limit = { 
								check_variable = {
									which = EDG_DMR_ruler_adm
									value = 1
								}
							}
							subtract_variable = {
								which = EDG_DMR_ruler_adm
								value = 1
							}
							add_adm_power = 100
						}
					}
					if = {
						limit = { 
							check_variable = {
								which = EDG_DMR_ruler_dip
								value = 1
							}
						}
						while = {
							limit = { 
								check_variable = {
									which = EDG_DMR_ruler_dip
									value = 1
								}
							}
							subtract_variable = {
								which = EDG_DMR_ruler_dip
								value = 1
							}
							add_dip_power = 100
						}
					}
					if = {
						limit = { 
							check_variable = {
								which = EDG_DMR_ruler_mil
								value = 1
							}
						}
						while = {
							limit = { 
								check_variable = {
									which = EDG_DMR_ruler_mil
									value = 1
								}
							}
							subtract_variable = {
								which = EDG_DMR_ruler_mil
								value = 1
							}
							add_mil_power = 100
						}
					}
					change_adm = -6
					change_dip = -6
					change_mil = -6
					add_stability = -6
				}
				custom_tooltip = EDG_SPACE_TT
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_13_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_13.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					if = {
						limit = { 
							NOT = {
								adm = 6
							}
						}
						while = {
							limit = { 
								NOT = {
									adm = 6
								}
							}
							change_adm = 1
						}
					}
					if = {
						limit = { 
							NOT = {
								dip = 6
							}
						}
						while = {
							limit = { 
								NOT = {
									dip = 6
								}
							}
							change_dip = 1
						}
					}
					if = {
						limit = { 
							NOT = {
								mil = 6
							}
						}
						while = {
							limit = { 
								NOT = {
									mil = 6
								}
							}
							change_mil = 1
						}
					}
					add_stability = 6
					change_variable = {
						which = EDG_DMR_num_of_overturn_chance
						value = 1
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_13_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_14
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_14.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					every_known_country = {
						limit = {
							has_opinion_modifier = {
								who = root
								modifier = aggressive_expansion
							}
						}
						add_aggressive_expansion = {
							who = root
							value = -100
							apply_calc = no
						}
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_14_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_14.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					every_owned_province = {
						limit = {
							base_tax = 2
							is_core = root
						}
						add_base_tax = -1
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_14_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_15
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_15.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					for = {
						amount = 10
						effect = "
							add_loan = {
								interest_modifier = 20
								duration = 60
							}
						"
					}
					every_owned_province = {
						limit = {
							is_core = root
						}
						add_devastation = 50
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_15_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_15.tt
				custom_tooltip = EDG_SPACE_TT
				add_corruption = -3
				add_inflation = -10
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					every_owned_province = {
						limit = {
							is_core = root
						}
						add_base_production = 1
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_15_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_16
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_16.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					every_known_country = {
						limit = {
							has_opinion_modifier = {
								who = root
								modifier = aggressive_expansion
							}
						}
						add_aggressive_expansion = {
							who = root
							value = 25
						}
					}
					every_owned_province = {
						limit = {
							is_core = root
							is_capital = no
							has_fort_building_trigger = yes
						}
						if = {
							limit = { 
								has_building = fort_15th
							}
							remove_building = fort_15th
						}
						else_if = {
							limit = { 
								has_building = fort_16th
							}
							remove_building = fort_16th
						}
						else_if = {
							limit = { 
								has_building = fort_17th
							}
							remove_building = fort_17th
						}
						else_if = {
							limit = { 
								has_building = fort_18th
							}
							remove_building = fort_18th
						}
					}
					# for = {
					# 	amount = 5
					# 	effect = "
					# 		random_owned_province = {
					# 			limit = {
					# 				has_fort_building_trigger = yes
					# 			}
					# 			if = {
					# 				limit = { 
					# 					has_building = fort_15th
					# 				}
					# 				remove_building = fort_15th
					# 			}
					# 			else_if = {
					# 				limit = { 
					# 					has_building = fort_16th
					# 				}
					# 				remove_building = fort_16th
					# 			}
					# 			else_if = {
					# 				limit = { 
					# 					has_building = fort_17th
					# 				}
					# 				remove_building = fort_17th
					# 			}
					# 			else_if = {
					# 				limit = { 
					# 					has_building = fort_18th
					# 				}
					# 				remove_building = fort_18th
					# 			}
					# 		}
					# 	"
						
					# }
					
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_16_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_16.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					every_owned_province = {
						limit = {
							is_core = root
						}
						add_base_manpower = 1
					}
					for = {
						amount = 5
						effect = "
							random_owned_province = {
								limit = {
									NOT = {
										has_province_flag = EDG_DMR_target_province_flag
									}
									has_fort_building_trigger = yes
								}
								upgrade_fort_building = yes
								set_province_flag = EDG_DMR_target_province_flag
							}
						"
					}
					every_owned_province = {
						clr_province_flag = EDG_DMR_target_province_flag
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_16_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_17
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_17.tt
				custom_tooltip = EDG_SPACE_TT
				add_years_of_trade_income = {
					years = 3
					custom_tooltip = EDG_DMR_straight_card_17.trade_income.tt
				}
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					set_variable = {
						which = EDG_DMR_num_of_cities
						value = 0
					}
					export_to_variable = {
						which = EDG_DMR_num_of_cities
						value = trigger_value:num_of_cities
					}
					if = {
						limit = { 
							check_variable = {
								which = EDG_DMR_num_of_cities
								value = 999
							}
						}
						set_variable = {
							which = EDG_DMR_num_of_cities
							value = 999
						}
					}
					while = {
						limit = { 	
							check_variable = {
								which = EDG_DMR_num_of_cities
								value = 1
							}
						}
						add_dip_power = 1
						subtract_variable = {
							which = EDG_DMR_num_of_cities
							value = 1
						}
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_17_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_17.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					set_variable = {
						which = EDG_DMR_num_of_cities
						value = 0
					}
					export_to_variable = {
						which = EDG_DMR_num_of_cities
						value = trigger_value:num_of_cities
					}
					divide_variable = {
						which = EDG_DMR_num_of_cities
						value = 2
					}
					while = {
						limit = { 	
							check_variable = {
								which = EDG_DMR_num_of_cities
								value = 1
							}
						}
						add_treasury = -20
						add_adm_power = -1
						add_mil_power = -1
						subtract_variable = {
							which = EDG_DMR_num_of_cities
							value = 1
						}
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_17_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_18
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_18.tt
				custom_tooltip = EDG_SPACE_TT
				add_dip_power = -200
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					every_ally = {
						add_opinion = {
							who = root
							modifier = scornfully_insulted
						}
						root = {
							break_alliance = prev
						}
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_18_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_18.tt
				custom_tooltip = EDG_SPACE_TT
				add_dip_power = 200
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					every_ally = {
						add_trust = {
							who = root
							value = 10
							mutual = yes
						}
						add_favors = {
							who = root
							amount = 20
						}
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_18_modifier_contrary
				}
				
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_19
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_19.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					every_owned_province = {
						limit = {
							is_core = root
						}
						if = {
							limit = { 
								OR = {
									has_construction = building
									has_construction = great_project
								}
							}
							add_construction_progress = 1
						}
						add_devastation = -100
						add_prosperity = 100
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_19_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_19.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					every_owned_province = {
						limit = {
							is_core = root
						}
						add_base_production = -1
						add_prosperity = -50
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_19_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_20
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_20.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					every_owned_province = {
						clear_rebels = yes
						if = {
							limit = { 
								controlled_by = REB
							}
							change_controller = root
						}
						add_nationalism = -10
					}
					add_rebel_progress = {
						value = -100
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_20_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_20.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					every_owned_province = {
						add_unrest = 10
					}
					add_rebel_progress = {
						value = 100
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_20_modifier_contrary
				}
			}
		}
		else_if = {
			limit = { 
				has_country_flag = EDG_DMR_mechanics_card_flag_temporary_21
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_straight_flag
				}
				custom_tooltip = EDG_DMR_straight_card_21.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					every_owned_province = {
						limit = {
							has_construction = core
						}
						add_core = root
					}
					every_neighbor_province = {
						limit = {
							is_city = yes
						}
						add_core = root
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_21_modifier_straight
				}
			}
			else_if = {
				limit = { 
					has_country_flag = EDG_DMR_contrary_flag
				}
				custom_tooltip = EDG_DMR_contrary_card_21.tt
				custom_tooltip = EDG_SPACE_TT
				hidden_effect = {
					set_bankruptcy = root
					change_variable = {
						which = EDG_DMR_num_of_overturn_chance
						value = 3
					}
					add_adm_power = 600
					add_dip_power = 600
					add_mil_power = 600
					add_stability = 0
					add_legitimacy = 90
					every_neighbor_country = {
						add_truce_with = root
						root = {
							add_truce_with = prev
						}
						if = {
							limit = { 
								is_subject = yes
							}
							overlord = {
								add_truce_with = root
								root = {
									add_truce_with = prev
								}
							}
						}
					}
				}
				EDG_DMR_mechanics_add_modifier = {
					modifier = EDG_DMR_card_21_modifier_contrary
				}
			}
		}
	}

	after = {
		hidden_effect = {
			change_variable = {
				which = EDG_DMR_num_of_divination
				value = 1
			}
			if = {
				limit = { 
					has_country_flag = EDG_DMR_begin_flip_flag
				}
				clr_country_flag = EDG_DMR_begin_flip_flag
				if = {
					limit = { 
						has_country_flag = EDG_DMR_contrary_flag
					}
					clr_country_flag = EDG_DMR_contrary_flag
					set_country_flag = EDG_DMR_straight_flag
				}
				else = {
					clr_country_flag = EDG_DMR_straight_flag
					set_country_flag = EDG_DMR_contrary_flag
				}
			}
			else = {
				country_event = {
					id = EDG_DMR_mechanics.4
				}
			}
		}
	}
}

country_event = {
	id = EDG_DMR_mechanics.4
	is_triggered_only = yes
	trigger = {
	}
	title = EDG_DMR_mechanics.4.name
	desc = EDG_DMR_mechanics.4.desc
	picture = EDG_tarot

	option = {
		name = EDG_DMR_mechanics.4.aa
		EDG_DMR_mechanics_add_modifier = {
			modifier = EDG_DMR_secondary_deck_1_modifier
		}
		hidden_effect = {
			set_country_flag = EDG_DMR_secondary_deck_1_flag
		}
	}
	option = {
		name = EDG_DMR_mechanics.4.bb
		EDG_DMR_mechanics_add_modifier = {
			modifier = EDG_DMR_secondary_deck_2_modifier
		}
		hidden_effect = {
			set_country_flag = EDG_DMR_secondary_deck_2_flag
		}
	}
	option = {
		name = EDG_DMR_mechanics.4.cc
		EDG_DMR_mechanics_add_modifier = {
			modifier = EDG_DMR_secondary_deck_3_modifier
		}
		hidden_effect = {
			set_country_flag = EDG_DMR_secondary_deck_3_flag
		}
	}
	option = {
		name = EDG_DMR_mechanics.4.dd
		EDG_DMR_mechanics_add_modifier = {
			modifier = EDG_DMR_secondary_deck_4_modifier
		}
		hidden_effect = {
			set_country_flag = EDG_DMR_secondary_deck_4_flag
		}
	}

	after = {
		hidden_effect = {
			unfreeze_government_power = {
				mechanic_type = EDG_DMR_gripsy_romanticism_ability
				power_type = EDG_DMR_gripsy_romanticism_power
			}
			clr_country_flag = EDG_DMR_begin_divination
		}
	}
}

country_event = {
	id = EDG_DMR_mechanics.100
	is_triggered_only = yes
	trigger = {
	}
	title = EDG_DMR_mechanics.100.name
	desc = EDG_DMR_mechanics.100.desc
	picture = EDG_tarot
	immediate = {
		hidden_effect = {
			set_country_flag = EDG_DMR_begin_divination
			set_government_power = {
				mechanic_type = EDG_DMR_gripsy_romanticism_ability
				power_type = EDG_DMR_gripsy_romanticism_power
				value = 0
			}
			freeze_government_power = {
				mechanic_type = EDG_DMR_gripsy_romanticism_ability
				power_type = EDG_DMR_gripsy_romanticism_power
			}
			clr_country_flag = EDG_DMR_secondary_deck_1_flag
			clr_country_flag = EDG_DMR_secondary_deck_2_flag
			clr_country_flag = EDG_DMR_secondary_deck_3_flag
			clr_country_flag = EDG_DMR_secondary_deck_4_flag
			clr_country_flag = EDG_DMR_straight_flag
			clr_country_flag = EDG_DMR_contrary_flag
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_0
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_1
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_2
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_3
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_4
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_5
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_6
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_7
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_8
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_9
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_10
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_11
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_12
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_13
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_14
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_15
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_16
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_17
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_18
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_19
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_20
			clr_country_flag = EDG_DMR_mechanics_card_flag_temporary_21
		}
	}



	option = {
		name = EDG_DMR_mechanics.100.aa
		custom_tooltip = EDG_DMR_mechanics.100.aa.tt
		tooltip = {
			freeze_government_power = {
				mechanic_type = EDG_DMR_gripsy_romanticism_ability
				power_type = EDG_DMR_gripsy_romanticism_power
			}
		}
		hidden_effect = {
			random_country = {
				limit = {
					NOT = {
						tag = root
					}
				}
				country_event = {
					id = EDG_DMR_mechanics.0
				}
			}
		}
	}
}


country_event = {
	id = EDG_DMR_mechanics.200
	is_triggered_only = yes
	trigger = {
	}
	hidden = yes

	immediate = {
		set_government_power = {
			mechanic_type = EDG_DMR_gripsy_romanticism_ability
			power_type = EDG_DMR_gripsy_romanticism_power
			value = 0
		}
	}

	option = {
		
	}
}